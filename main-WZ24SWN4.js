var h0=Object.defineProperty,f0=Object.defineProperties;var p0=Object.getOwnPropertyDescriptors;var hE=Object.getOwnPropertySymbols;var g0=Object.prototype.hasOwnProperty,m0=Object.prototype.propertyIsEnumerable;var fE=(t,e,n)=>e in t?h0(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,L=(t,e)=>{for(var n in e||={})g0.call(e,n)&&fE(t,n,e[n]);if(hE)for(var n of hE(e))m0.call(e,n)&&fE(t,n,e[n]);return t},ve=(t,e)=>f0(t,p0(e));var Xe=null,Sc=!1,Bh=1,y0=null,At=Symbol("SIGNAL");function H(t){let e=Xe;return Xe=t,e}function Ac(){return Xe}var Rc={version:0,lastCleanEpoch:0,dirty:!1,producers:void 0,producersTail:void 0,consumers:void 0,consumersTail:void 0,recomputing:!1,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,kind:"unknown",producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function Nc(t){if(Sc)throw new Error("");if(Xe===null)return;Xe.consumerOnSignalRead(t);let e=Xe.producersTail;if(e!==void 0&&e.producer===t)return;let n,r=Xe.recomputing;if(r&&(n=e!==void 0?e.nextProducer:Xe.producers,n!==void 0&&n.producer===t)){Xe.producersTail=n,n.lastReadVersion=t.version;return}let i=t.consumersTail;if(i!==void 0&&i.consumer===Xe&&(!r||_0(i,Xe)))return;let o=Ai(Xe),s={producer:t,consumer:Xe,nextProducer:n,prevConsumer:i,lastReadVersion:t.version,nextConsumer:void 0};Xe.producersTail=s,e!==void 0?e.nextProducer=s:Xe.producers=s,o&&vE(t,s)}function pE(){Bh++}function gE(t){if(!(Ai(t)&&!t.dirty)&&!(!t.dirty&&t.lastCleanEpoch===Bh)){if(!t.producerMustRecompute(t)&&!Pc(t)){Uh(t);return}t.producerRecomputeValue(t),Uh(t)}}function $h(t){if(t.consumers===void 0)return;let e=Sc;Sc=!0;try{for(let n=t.consumers;n!==void 0;n=n.nextConsumer){let r=n.consumer;r.dirty||v0(r)}}finally{Sc=e}}function Hh(){return Xe?.consumerAllowSignalWrites!==!1}function v0(t){t.dirty=!0,$h(t),t.consumerMarkedDirty?.(t)}function Uh(t){t.dirty=!1,t.lastCleanEpoch=Bh}function Mc(t){return t&&mE(t),H(t)}function mE(t){t.producersTail=void 0,t.recomputing=!0}function zh(t,e){H(e),t&&yE(t)}function yE(t){t.recomputing=!1;let e=t.producersTail,n=e!==void 0?e.nextProducer:t.producers;if(n!==void 0){if(Ai(t))do n=qh(n);while(n!==void 0);e!==void 0?e.nextProducer=void 0:t.producers=void 0}}function Pc(t){for(let e=t.producers;e!==void 0;e=e.nextProducer){let n=e.producer,r=e.lastReadVersion;if(r!==n.version||(gE(n),r!==n.version))return!0}return!1}function vs(t){if(Ai(t)){let e=t.producers;for(;e!==void 0;)e=qh(e)}t.producers=void 0,t.producersTail=void 0,t.consumers=void 0,t.consumersTail=void 0}function vE(t,e){let n=t.consumersTail,r=Ai(t);if(n!==void 0?(e.nextConsumer=n.nextConsumer,n.nextConsumer=e):(e.nextConsumer=void 0,t.consumers=e),e.prevConsumer=n,t.consumersTail=e,!r)for(let i=t.producers;i!==void 0;i=i.nextProducer)vE(i.producer,i)}function qh(t){let e=t.producer,n=t.nextProducer,r=t.nextConsumer,i=t.prevConsumer;if(t.nextConsumer=void 0,t.prevConsumer=void 0,r!==void 0?r.prevConsumer=i:e.consumersTail=i,i!==void 0)i.nextConsumer=r;else if(e.consumers=r,!Ai(e)){let o=e.producers;for(;o!==void 0;)o=qh(o)}return n}function Ai(t){return t.consumerIsAlwaysLive||t.consumers!==void 0}function _E(t){y0?.(t)}function _0(t,e){let n=e.producersTail;if(n!==void 0){let r=e.producers;do{if(r===t)return!0;if(r===n)break;r=r.nextProducer}while(r!==void 0)}return!1}function EE(t,e){return Object.is(t,e)}function E0(){throw new Error}var IE=E0;function wE(t){IE(t)}function Gh(t){IE=t}var I0=null;function Wh(t,e){let n=Object.create(xc);n.value=t,e!==void 0&&(n.equal=e);let r=()=>TE(n);return r[At]=n,_E(n),[r,s=>_s(n,s),s=>DE(n,s)]}function TE(t){return Nc(t),t.value}function _s(t,e){Hh()||wE(t),t.equal(t.value,e)||(t.value=e,w0(t))}function DE(t,e){Hh()||wE(t),_s(t,e(t.value))}var xc=ve(L({},Rc),{equal:EE,value:void 0,kind:"signal"});function w0(t){t.version++,pE(),$h(t),I0?.(t)}function Kh(t){let e=H(null);try{return t()}finally{H(e)}}function W(t){return typeof t=="function"}function Ri(t){let n=t(r=>{Error.call(r),r.stack=new Error().stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var kc=Ri(t=>function(n){t(this),this.message=n?`${n.length} errors occurred during unsubscription:
${n.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=n});function Tr(t,e){if(t){let n=t.indexOf(e);0<=n&&t.splice(n,1)}}var xe=class t{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(let o of n)o.remove(this);else n.remove(this);let{initialTeardown:r}=this;if(W(r))try{r()}catch(o){e=o instanceof kc?o.errors:[o]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let o of i)try{bE(o)}catch(s){e=e??[],s instanceof kc?e=[...e,...s.errors]:e.push(s)}}if(e)throw new kc(e)}}add(e){var n;if(e&&e!==this)if(this.closed)bE(e);else{if(e instanceof t){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(e)}}_hasParent(e){let{_parentage:n}=this;return n===e||Array.isArray(n)&&n.includes(e)}_addParent(e){let{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(e),n):n?[n,e]:e}_removeParent(e){let{_parentage:n}=this;n===e?this._parentage=null:Array.isArray(n)&&Tr(n,e)}remove(e){let{_finalizers:n}=this;n&&Tr(n,e),e instanceof t&&e._removeParent(this)}};xe.EMPTY=(()=>{let t=new xe;return t.closed=!0,t})();var Qh=xe.EMPTY;function Oc(t){return t instanceof xe||t&&"closed"in t&&W(t.remove)&&W(t.add)&&W(t.unsubscribe)}function bE(t){W(t)?t():t.unsubscribe()}var Vt={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var Ni={setTimeout(t,e,...n){let{delegate:r}=Ni;return r?.setTimeout?r.setTimeout(t,e,...n):setTimeout(t,e,...n)},clearTimeout(t){let{delegate:e}=Ni;return(e?.clearTimeout||clearTimeout)(t)},delegate:void 0};function Lc(t){Ni.setTimeout(()=>{let{onUnhandledError:e}=Vt;if(e)e(t);else throw t})}function Es(){}var CE=Yh("C",void 0,void 0);function SE(t){return Yh("E",void 0,t)}function AE(t){return Yh("N",t,void 0)}function Yh(t,e,n){return{kind:t,value:e,error:n}}var Dr=null;function Mi(t){if(Vt.useDeprecatedSynchronousErrorHandling){let e=!Dr;if(e&&(Dr={errorThrown:!1,error:null}),t(),e){let{errorThrown:n,error:r}=Dr;if(Dr=null,n)throw r}}else t()}function RE(t){Vt.useDeprecatedSynchronousErrorHandling&&Dr&&(Dr.errorThrown=!0,Dr.error=t)}var br=class extends xe{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,Oc(e)&&e.add(this)):this.destination=b0}static create(e,n,r){return new Pi(e,n,r)}next(e){this.isStopped?Jh(AE(e),this):this._next(e)}error(e){this.isStopped?Jh(SE(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?Jh(CE,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},T0=Function.prototype.bind;function Zh(t,e){return T0.call(t,e)}var Xh=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:n}=this;if(n.next)try{n.next(e)}catch(r){Fc(r)}}error(e){let{partialObserver:n}=this;if(n.error)try{n.error(e)}catch(r){Fc(r)}else Fc(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(n){Fc(n)}}},Pi=class extends br{constructor(e,n,r){super();let i;if(W(e)||!e)i={next:e??void 0,error:n??void 0,complete:r??void 0};else{let o;this&&Vt.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&Zh(e.next,o),error:e.error&&Zh(e.error,o),complete:e.complete&&Zh(e.complete,o)}):i=e}this.destination=new Xh(i)}};function Fc(t){Vt.useDeprecatedSynchronousErrorHandling?RE(t):Lc(t)}function D0(t){throw t}function Jh(t,e){let{onStoppedNotification:n}=Vt;n&&Ni.setTimeout(()=>n(t,e))}var b0={closed:!0,next:Es,error:D0,complete:Es};var xi=typeof Symbol=="function"&&Symbol.observable||"@@observable";function jt(t){return t}function Vc(...t){return ef(t)}function ef(t){return t.length===0?jt:t.length===1?t[0]:function(n){return t.reduce((r,i)=>i(r),n)}}var J=(()=>{class t{constructor(n){n&&(this._subscribe=n)}lift(n){let r=new t;return r.source=this,r.operator=n,r}subscribe(n,r,i){let o=S0(n)?n:new Pi(n,r,i);return Mi(()=>{let{operator:s,source:c}=this;o.add(s?s.call(o,c):c?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(n){try{return this._subscribe(n)}catch(r){n.error(r)}}forEach(n,r){return r=NE(r),new r((i,o)=>{let s=new Pi({next:c=>{try{n(c)}catch(u){o(u),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(n){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(n)}[xi](){return this}pipe(...n){return ef(n)(this)}toPromise(n){return n=NE(n),new n((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return t.create=e=>new t(e),t})();function NE(t){var e;return(e=t??Vt.Promise)!==null&&e!==void 0?e:Promise}function C0(t){return t&&W(t.next)&&W(t.error)&&W(t.complete)}function S0(t){return t&&t instanceof br||C0(t)&&Oc(t)}function A0(t){return W(t?.lift)}function ue(t){return e=>{if(A0(e))return e.lift(function(n){try{return t(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function fe(t,e,n,r,i){return new tf(t,e,n,r,i)}var tf=class extends br{constructor(e,n,r,i,o,s){super(e),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=n?function(c){try{n(c)}catch(u){e.error(u)}}:super._next,this._error=i?function(c){try{i(c)}catch(u){e.error(u)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:n}=this;super.unsubscribe(),!n&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};var ME=Ri(t=>function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var et=(()=>{class t extends J{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){let r=new jc(this,this);return r.operator=n,r}_throwIfClosed(){if(this.closed)throw new ME}next(n){Mi(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(n)}})}error(n){Mi(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;let{observers:r}=this;for(;r.length;)r.shift().error(n)}})}complete(){Mi(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){let{hasError:r,isStopped:i,observers:o}=this;return r||i?Qh:(this.currentObservers=null,o.push(n),new xe(()=>{this.currentObservers=null,Tr(o,n)}))}_checkFinalizedStatuses(n){let{hasError:r,thrownError:i,isStopped:o}=this;r?n.error(i):o&&n.complete()}asObservable(){let n=new J;return n.source=this,n}}return t.create=(e,n)=>new jc(e,n),t})(),jc=class extends et{constructor(e,n){super(),this.destination=e,this.source=n}next(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.next)===null||r===void 0||r.call(n,e)}error(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.error)===null||r===void 0||r.call(n,e)}complete(){var e,n;(n=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||n===void 0||n.call(e)}_subscribe(e){var n,r;return(r=(n=this.source)===null||n===void 0?void 0:n.subscribe(e))!==null&&r!==void 0?r:Qh}};var We=class extends et{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let n=super._subscribe(e);return!n.closed&&e.next(this._value),n}getValue(){let{hasError:e,thrownError:n,_value:r}=this;if(e)throw n;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var nf={now(){return(nf.delegate||Date).now()},delegate:void 0};var Uc=class extends xe{constructor(e,n){super()}schedule(e,n=0){return this}};var Is={setInterval(t,e,...n){let{delegate:r}=Is;return r?.setInterval?r.setInterval(t,e,...n):setInterval(t,e,...n)},clearInterval(t){let{delegate:e}=Is;return(e?.clearInterval||clearInterval)(t)},delegate:void 0};var ki=class extends Uc{constructor(e,n){super(e,n),this.scheduler=e,this.work=n,this.pending=!1}schedule(e,n=0){var r;if(this.closed)return this;this.state=e;let i=this.id,o=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(o,i,n)),this.pending=!0,this.delay=n,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(o,this.id,n),this}requestAsyncId(e,n,r=0){return Is.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,n,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return n;n!=null&&Is.clearInterval(n)}execute(e,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,n);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,n){let r=!1,i;try{this.work(e)}catch(o){r=!0,i=o||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:n}=this,{actions:r}=n;this.work=this.state=this.scheduler=null,this.pending=!1,Tr(r,this),e!=null&&(this.id=this.recycleAsyncId(n,e,null)),this.delay=null,super.unsubscribe()}}};var Oi=class t{constructor(e,n=t.now){this.schedulerActionCtor=e,this.now=n}schedule(e,n=0,r){return new this.schedulerActionCtor(this,e).schedule(r,n)}};Oi.now=nf.now;var Li=class extends Oi{constructor(e,n=Oi.now){super(e,n),this.actions=[],this._active=!1}flush(e){let{actions:n}=this;if(this._active){n.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=n.shift());if(this._active=!1,r){for(;e=n.shift();)e.unsubscribe();throw r}}};var rf=new Li(ki);var Bc=class extends ki{constructor(e,n){super(e,n),this.scheduler=e,this.work=n}schedule(e,n=0){return n>0?super.schedule(e,n):(this.delay=n,this.state=e,this.scheduler.flush(this),this)}execute(e,n){return n>0||this.closed?super.execute(e,n):this._execute(e,n)}requestAsyncId(e,n,r=0){return r!=null&&r>0||r==null&&this.delay>0?super.requestAsyncId(e,n,r):(e.flush(this),0)}};var $c=class extends Li{};var of=new $c(Bc);var gt=new J(t=>t.complete());function PE(t){return t&&W(t.schedule)}function xE(t){return t[t.length-1]}function kE(t){return W(xE(t))?t.pop():void 0}function Qn(t){return PE(xE(t))?t.pop():void 0}function sf(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function LE(t,e,n,r){function i(o){return o instanceof n?o:new n(function(s){s(o)})}return new(n||(n=Promise))(function(o,s){function c(h){try{l(r.next(h))}catch(p){s(p)}}function u(h){try{l(r.throw(h))}catch(p){s(p)}}function l(h){h.done?o(h.value):i(h.value).then(c,u)}l((r=r.apply(t,e||[])).next())})}function OE(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Cr(t){return this instanceof Cr?(this.v=t,this):new Cr(t)}function FE(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),i,o=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),c("next"),c("throw"),c("return",s),i[Symbol.asyncIterator]=function(){return this},i;function s(y){return function(C){return Promise.resolve(C).then(y,p)}}function c(y,C){r[y]&&(i[y]=function(A){return new Promise(function(R,k){o.push([y,A,R,k])>1||u(y,A)})},C&&(i[y]=C(i[y])))}function u(y,C){try{l(r[y](C))}catch(A){m(o[0][3],A)}}function l(y){y.value instanceof Cr?Promise.resolve(y.value.v).then(h,p):m(o[0][2],y)}function h(y){u("next",y)}function p(y){u("throw",y)}function m(y,C){y(C),o.shift(),o.length&&u(o[0][0],o[0][1])}}function VE(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof OE=="function"?OE(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(o){n[o]=t[o]&&function(s){return new Promise(function(c,u){s=t[o](s),i(c,u,s.done,s.value)})}}function i(o,s,c,u){Promise.resolve(u).then(function(l){o({value:l,done:c})},s)}}var Hc=t=>t&&typeof t.length=="number"&&typeof t!="function";function zc(t){return W(t?.then)}function qc(t){return W(t[xi])}function Gc(t){return Symbol.asyncIterator&&W(t?.[Symbol.asyncIterator])}function Wc(t){return new TypeError(`You provided ${t!==null&&typeof t=="object"?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function R0(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var Kc=R0();function Qc(t){return W(t?.[Kc])}function Yc(t){return FE(this,arguments,function*(){let n=t.getReader();try{for(;;){let{value:r,done:i}=yield Cr(n.read());if(i)return yield Cr(void 0);yield yield Cr(r)}}finally{n.releaseLock()}})}function Zc(t){return W(t?.getReader)}function Ue(t){if(t instanceof J)return t;if(t!=null){if(qc(t))return N0(t);if(Hc(t))return M0(t);if(zc(t))return P0(t);if(Gc(t))return jE(t);if(Qc(t))return x0(t);if(Zc(t))return k0(t)}throw Wc(t)}function N0(t){return new J(e=>{let n=t[xi]();if(W(n.subscribe))return n.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function M0(t){return new J(e=>{for(let n=0;n<t.length&&!e.closed;n++)e.next(t[n]);e.complete()})}function P0(t){return new J(e=>{t.then(n=>{e.closed||(e.next(n),e.complete())},n=>e.error(n)).then(null,Lc)})}function x0(t){return new J(e=>{for(let n of t)if(e.next(n),e.closed)return;e.complete()})}function jE(t){return new J(e=>{O0(t,e).catch(n=>e.error(n))})}function k0(t){return jE(Yc(t))}function O0(t,e){var n,r,i,o;return LE(this,void 0,void 0,function*(){try{for(n=VE(t);r=yield n.next(),!r.done;){let s=r.value;if(e.next(s),e.closed)return}}catch(s){i={error:s}}finally{try{r&&!r.done&&(o=n.return)&&(yield o.call(n))}finally{if(i)throw i.error}}e.complete()})}function mt(t,e,n,r=0,i=!1){let o=e.schedule(function(){n(),i?t.add(this.schedule(null,r)):this.unsubscribe()},r);if(t.add(o),!i)return o}function Yn(t,e=0){return ue((n,r)=>{n.subscribe(fe(r,i=>mt(r,t,()=>r.next(i),e),()=>mt(r,t,()=>r.complete(),e),i=>mt(r,t,()=>r.error(i),e)))})}function Zn(t,e=0){return ue((n,r)=>{r.add(t.schedule(()=>n.subscribe(r),e))})}function UE(t,e){return Ue(t).pipe(Zn(e),Yn(e))}function BE(t,e){return Ue(t).pipe(Zn(e),Yn(e))}function $E(t,e){return new J(n=>{let r=0;return e.schedule(function(){r===t.length?n.complete():(n.next(t[r++]),n.closed||this.schedule())})})}function HE(t,e){return new J(n=>{let r;return mt(n,e,()=>{r=t[Kc](),mt(n,e,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(s){n.error(s);return}o?n.complete():n.next(i)},0,!0)}),()=>W(r?.return)&&r.return()})}function Jc(t,e){if(!t)throw new Error("Iterable cannot be null");return new J(n=>{mt(n,e,()=>{let r=t[Symbol.asyncIterator]();mt(n,e,()=>{r.next().then(i=>{i.done?n.complete():n.next(i.value)})},0,!0)})})}function zE(t,e){return Jc(Yc(t),e)}function qE(t,e){if(t!=null){if(qc(t))return UE(t,e);if(Hc(t))return $E(t,e);if(zc(t))return BE(t,e);if(Gc(t))return Jc(t,e);if(Qc(t))return HE(t,e);if(Zc(t))return zE(t,e)}throw Wc(t)}function ke(t,e){return e?qE(t,e):Ue(t)}function ne(...t){let e=Qn(t);return ke(t,e)}function af(t,e){let n=W(t)?t:()=>t,r=i=>i.error(n());return new J(e?i=>e.schedule(r,0,i):r)}function Xc(t){return!!t&&(t instanceof J||W(t.lift)&&W(t.subscribe))}var Sr=Ri(t=>function(){t(this),this.name="EmptyError",this.message="no elements in sequence"});function ye(t,e){return ue((n,r)=>{let i=0;n.subscribe(fe(r,o=>{r.next(t.call(e,o,i++))}))})}var{isArray:L0}=Array;function F0(t,e){return L0(e)?t(...e):t(e)}function GE(t){return ye(e=>F0(t,e))}var{isArray:V0}=Array,{getPrototypeOf:j0,prototype:U0,keys:B0}=Object;function WE(t){if(t.length===1){let e=t[0];if(V0(e))return{args:e,keys:null};if($0(e)){let n=B0(e);return{args:n.map(r=>e[r]),keys:n}}}return{args:t,keys:null}}function $0(t){return t&&typeof t=="object"&&j0(t)===U0}function KE(t,e){return t.reduce((n,r,i)=>(n[r]=e[i],n),{})}function cf(...t){let e=Qn(t),n=kE(t),{args:r,keys:i}=WE(t);if(r.length===0)return ke([],e);let o=new J(H0(r,e,i?s=>KE(i,s):jt));return n?o.pipe(GE(n)):o}function H0(t,e,n=jt){return r=>{QE(e,()=>{let{length:i}=t,o=new Array(i),s=i,c=i;for(let u=0;u<i;u++)QE(e,()=>{let l=ke(t[u],e),h=!1;l.subscribe(fe(r,p=>{o[u]=p,h||(h=!0,c--),c||r.next(n(o.slice()))},()=>{--s||r.complete()}))},r)},r)}}function QE(t,e,n){t?mt(n,t,e):e()}function YE(t,e,n,r,i,o,s,c){let u=[],l=0,h=0,p=!1,m=()=>{p&&!u.length&&!l&&e.complete()},y=A=>l<r?C(A):u.push(A),C=A=>{o&&e.next(A),l++;let R=!1;Ue(n(A,h++)).subscribe(fe(e,k=>{i?.(k),o?y(k):e.next(k)},()=>{R=!0},void 0,()=>{if(R)try{for(l--;u.length&&l<r;){let k=u.shift();s?mt(e,s,()=>C(k)):C(k)}m()}catch(k){e.error(k)}}))};return t.subscribe(fe(e,y,()=>{p=!0,m()})),()=>{c?.()}}function ct(t,e,n=1/0){return W(e)?ct((r,i)=>ye((o,s)=>e(r,o,i,s))(Ue(t(r,i))),n):(typeof e=="number"&&(n=e),ue((r,i)=>YE(r,i,t,n)))}function ZE(t=1/0){return ct(jt,t)}function JE(){return ZE(1)}function Fi(...t){return JE()(ke(t,Qn(t)))}function ws(t){return new J(e=>{Ue(t()).subscribe(e)})}function Ut(t,e){return ue((n,r)=>{let i=0;n.subscribe(fe(r,o=>t.call(e,o,i++)&&r.next(o)))})}function Ts(t){return ue((e,n)=>{let r=null,i=!1,o;r=e.subscribe(fe(n,void 0,void 0,s=>{o=Ue(t(s,Ts(t)(e))),r?(r.unsubscribe(),r=null,o.subscribe(n)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(n))})}function eu(t,e){return W(e)?ct(t,e,1):ct(t,1)}function uf(t){return ue((e,n)=>{let r=!1;e.subscribe(fe(n,i=>{r=!0,n.next(i)},()=>{r||n.next(t),n.complete()}))})}function wn(t){return t<=0?()=>gt:ue((e,n)=>{let r=0;e.subscribe(fe(n,i=>{++r<=t&&(n.next(i),t<=r&&n.complete())}))})}function XE(t=z0){return ue((e,n)=>{let r=!1;e.subscribe(fe(n,i=>{r=!0,n.next(i)},()=>r?n.complete():n.error(t())))})}function z0(){return new Sr}function lf(t){return ue((e,n)=>{try{e.subscribe(n)}finally{n.add(t)}})}function Rt(t,e){let n=arguments.length>=2;return r=>r.pipe(t?Ut((i,o)=>t(i,o,r)):jt,wn(1),n?uf(e):XE(()=>new Sr))}function tu(t){return t<=0?()=>gt:ue((e,n)=>{let r=[];e.subscribe(fe(n,i=>{r.push(i),t<r.length&&r.shift()},()=>{for(let i of r)n.next(i);n.complete()},void 0,()=>{r=null}))})}function nu(...t){let e=Qn(t);return ue((n,r)=>{(e?Fi(t,n,e):Fi(t,n)).subscribe(r)})}function tn(t,e){return ue((n,r)=>{let i=null,o=0,s=!1,c=()=>s&&!i&&r.complete();n.subscribe(fe(r,u=>{i?.unsubscribe();let l=0,h=o++;Ue(t(u,h)).subscribe(i=fe(r,p=>r.next(e?e(u,p,h,l++):p),()=>{i=null,c()}))},()=>{s=!0,c()}))})}function Ds(t){return ue((e,n)=>{Ue(t).subscribe(fe(n,()=>n.complete(),Es)),!n.closed&&e.subscribe(n)})}function ut(t,e,n){let r=W(t)||e||n?{next:t,error:e,complete:n}:t;return r?ue((i,o)=>{var s;(s=r.subscribe)===null||s===void 0||s.call(r);let c=!0;i.subscribe(fe(o,u=>{var l;(l=r.next)===null||l===void 0||l.call(r,u),o.next(u)},()=>{var u;c=!1,(u=r.complete)===null||u===void 0||u.call(r),o.complete()},u=>{var l;c=!1,(l=r.error)===null||l===void 0||l.call(r,u),o.error(u)},()=>{var u,l;c&&((u=r.unsubscribe)===null||u===void 0||u.call(r)),(l=r.finalize)===null||l===void 0||l.call(r)}))}):jt}var df;function ru(){return df}function nn(t){let e=df;return df=t,e}var eI=Symbol("NotFound");function Vi(t){return t===eI||t?.name==="\u0275NotFound"}var Ui=class{full;major;minor;patch;constructor(e){this.full=e;let n=e.split(".");this.major=n[0],this.minor=n[1],this.patch=n.slice(2).join(".")}},Sf=new Ui("21.0.6");var Af="https://angular.dev/best-practices/security#preventing-cross-site-scripting-xss",V=class extends Error{code;constructor(e,n){super(Bi(e,n)),this.code=e}};function K0(t){return`NG0${Math.abs(t)}`}function Bi(t,e){return`${K0(t)}${e?": "+e:""}`}function le(t){for(let e in t)if(t[e]===le)return e;throw Error("")}function Jn(t){if(typeof t=="string")return t;if(Array.isArray(t))return`[${t.map(Jn).join(", ")}]`;if(t==null)return""+t;let e=t.overriddenName||t.name;if(e)return`${e}`;let n=t.toString();if(n==null)return""+n;let r=n.indexOf(`
`);return r>=0?n.slice(0,r):n}function uu(t,e){return t?e?`${t} ${e}`:t:e||""}var Q0=le({__forward_ref__:le});function lu(t){return t.__forward_ref__=lu,t.toString=function(){return Jn(this())},t}function yt(t){return Rf(t)?t():t}function Rf(t){return typeof t=="function"&&t.hasOwnProperty(Q0)&&t.__forward_ref__===lu}function j(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function $i(t){return{providers:t.providers||[],imports:t.imports||[]}}function Ns(t){return Y0(t,du)}function Nf(t){return Ns(t)!==null}function Y0(t,e){return t.hasOwnProperty(e)&&t[e]||null}function Z0(t){let e=t?.[du]??null;return e||null}function ff(t){return t&&t.hasOwnProperty(ou)?t[ou]:null}var du=le({\u0275prov:le}),ou=le({\u0275inj:le}),U=class{_desc;ngMetadataName="InjectionToken";\u0275prov;constructor(e,n){this._desc=e,this.\u0275prov=void 0,typeof n=="number"?this.__NG_ELEMENT_ID__=n:n!==void 0&&(this.\u0275prov=j({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function Mf(t){return t&&!!t.\u0275providers}var Pf=le({\u0275cmp:le}),xf=le({\u0275dir:le}),kf=le({\u0275pipe:le}),Of=le({\u0275mod:le}),Cs=le({\u0275fac:le}),Pr=le({__NG_ELEMENT_ID__:le}),tI=le({__NG_ENV_ID__:le});function Lf(t){return hu(t,"@NgModule"),t[Of]||null}function tr(t){return hu(t,"@Component"),t[Pf]||null}function Ff(t){return hu(t,"@Directive"),t[xf]||null}function oI(t){return hu(t,"@Pipe"),t[kf]||null}function hu(t,e){if(t==null)throw new V(-919,!1)}function Vf(t){return typeof t=="string"?t:t==null?"":String(t)}function sI(t){return typeof t=="function"?t.name||t.toString():typeof t=="object"&&t!=null&&typeof t.type=="function"?t.type.name||t.type.toString():Vf(t)}var aI=le({ngErrorCode:le}),J0=le({ngErrorMessage:le}),X0=le({ngTokenPath:le});function jf(t,e){return cI("",-200,e)}function fu(t,e){throw new V(-201,!1)}function cI(t,e,n){let r=new V(e,t);return r[aI]=e,r[J0]=t,n&&(r[X0]=n),r}function eR(t){return t[aI]}var pf;function uI(){return pf}function lt(t){let e=pf;return pf=t,e}function Uf(t,e,n){let r=Ns(t);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(n&8)return null;if(e!==void 0)return e;fu(t,"")}var tR={},Ar=tR,gf="__NG_DI_FLAG__",mf=class{injector;constructor(e){this.injector=e}retrieve(e,n){let r=Rr(n)||0;try{return this.injector.get(e,r&8?null:Ar,r)}catch(i){if(Vi(i))return i;throw i}}};function nR(t,e=0){let n=ru();if(n===void 0)throw new V(-203,!1);if(n===null)return Uf(t,void 0,e);{let r=rR(e),i=n.retrieve(t,r);if(Vi(i)){if(r.optional)return null;throw i}return i}}function z(t,e=0){return(uI()||nR)(yt(t),e)}function M(t,e){return z(t,Rr(e))}function Rr(t){return typeof t>"u"||typeof t=="number"?t:0|(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function rR(t){return{optional:!!(t&8),host:!!(t&1),self:!!(t&2),skipSelf:!!(t&4)}}function yf(t){let e=[];for(let n=0;n<t.length;n++){let r=yt(t[n]);if(Array.isArray(r)){if(r.length===0)throw new V(900,!1);let i,o=0;for(let s=0;s<r.length;s++){let c=r[s],u=iR(c);typeof u=="number"?u===-1?i=c.token:o|=u:i=c}e.push(z(i,o))}else e.push(z(r))}return e}function lI(t,e){return t[gf]=e,t.prototype[gf]=e,t}function iR(t){return t[gf]}function Xn(t,e){let n=t.hasOwnProperty(Cs);return n?t[Cs]:null}function pu(t,e){t.forEach(n=>Array.isArray(n)?pu(n,e):e(n))}function Bf(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function Ms(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function dI(t,e,n,r){let i=t.length;if(i==e)t.push(n,r);else if(i===1)t.push(r,t[0]),t[0]=n;else{for(i--,t.push(t[i-1],t[i]);i>e;){let o=i-2;t[i]=t[o],i--}t[e]=n,t[e+1]=r}}function gu(t,e,n){let r=Hi(t,e);return r>=0?t[r|1]=n:(r=~r,dI(t,r,e,n)),r}function mu(t,e){let n=Hi(t,e);if(n>=0)return t[n|1]}function Hi(t,e){return oR(t,e,1)}function oR(t,e,n){let r=0,i=t.length>>n;for(;i!==r;){let o=r+(i-r>>1),s=t[o<<n];if(e===s)return o<<n;s>e?i=o:r=o+1}return~(i<<n)}var xr={},vt=[],kr=new U(""),$f=new U("",-1),Hf=new U(""),Ss=class{get(e,n=Ar){if(n===Ar){let i=cI("",-201);throw i.name="\u0275NotFound",i}return n}};function Bt(t){return{\u0275providers:t}}function hI(t){return Bt([{provide:kr,multi:!0,useValue:t}])}function fI(...t){return{\u0275providers:zf(!0,t),\u0275fromNgModule:!0}}function zf(t,...e){let n=[],r=new Set,i,o=s=>{n.push(s)};return pu(e,s=>{let c=s;su(c,o,[],r)&&(i||=[],i.push(c))}),i!==void 0&&pI(i,o),n}function pI(t,e){for(let n=0;n<t.length;n++){let{ngModule:r,providers:i}=t[n];qf(i,o=>{e(o,r)})}}function su(t,e,n,r){if(t=yt(t),!t)return!1;let i=null,o=ff(t),s=!o&&tr(t);if(!o&&!s){let u=t.ngModule;if(o=ff(u),o)i=u;else return!1}else{if(s&&!s.standalone)return!1;i=t}let c=r.has(i);if(s){if(c)return!1;if(r.add(i),s.dependencies){let u=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let l of u)su(l,e,n,r)}}else if(o){if(o.imports!=null&&!c){r.add(i);let l;try{pu(o.imports,h=>{su(h,e,n,r)&&(l||=[],l.push(h))})}finally{}l!==void 0&&pI(l,e)}if(!c){let l=Xn(i)||(()=>new i);e({provide:i,useFactory:l,deps:vt},i),e({provide:Hf,useValue:i,multi:!0},i),e({provide:kr,useValue:()=>z(i),multi:!0},i)}let u=o.providers;if(u!=null&&!c){let l=t;qf(u,h=>{e(h,l)})}}else return!1;return i!==t&&t.providers!==void 0}function qf(t,e){for(let n of t)Mf(n)&&(n=n.\u0275providers),Array.isArray(n)?qf(n,e):e(n)}var sR=le({provide:String,useValue:le});function gI(t){return t!==null&&typeof t=="object"&&sR in t}function aR(t){return!!(t&&t.useExisting)}function cR(t){return!!(t&&t.useFactory)}function au(t){return typeof t=="function"}var Ps=new U(""),iu={},nI={},hf;function xs(){return hf===void 0&&(hf=new Ss),hf}var Oe=class{},Nr=class extends Oe{parent;source;scopes;records=new Map;_ngOnDestroyHooks=new Set;_onDestroyHooks=[];get destroyed(){return this._destroyed}_destroyed=!1;injectorDefTypes;constructor(e,n,r,i){super(),this.parent=n,this.source=r,this.scopes=i,_f(e,s=>this.processProvider(s)),this.records.set($f,ji(void 0,this)),i.has("environment")&&this.records.set(Oe,ji(void 0,this));let o=this.records.get(Ps);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(Hf,vt,{self:!0}))}retrieve(e,n){let r=Rr(n)||0;try{return this.get(e,Ar,r)}catch(i){if(Vi(i))return i;throw i}}destroy(){bs(this),this._destroyed=!0;let e=H(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let n=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of n)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),H(e)}}onDestroy(e){return bs(this),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){bs(this);let n=nn(this),r=lt(void 0),i;try{return e()}finally{nn(n),lt(r)}}get(e,n=Ar,r){if(bs(this),e.hasOwnProperty(tI))return e[tI](this);let i=Rr(r),o,s=nn(this),c=lt(void 0);try{if(!(i&4)){let l=this.records.get(e);if(l===void 0){let h=fR(e)&&Ns(e);h&&this.injectableDefInScope(h)?l=ji(vf(e),iu):l=null,this.records.set(e,l)}if(l!=null)return this.hydrate(e,l,i)}let u=i&2?xs():this.parent;return n=i&8&&n===Ar?null:n,u.get(e,n)}catch(u){let l=eR(u);throw l===-200||l===-201?new V(l,null):u}finally{lt(c),nn(s)}}resolveInjectorInitializers(){let e=H(null),n=nn(this),r=lt(void 0),i;try{let o=this.get(kr,vt,{self:!0});for(let s of o)s()}finally{nn(n),lt(r),H(e)}}toString(){let e=[],n=this.records;for(let r of n.keys())e.push(Jn(r));return`R3Injector[${e.join(", ")}]`}processProvider(e){e=yt(e);let n=au(e)?e:yt(e&&e.provide),r=lR(e);if(!au(e)&&e.multi===!0){let i=this.records.get(n);i||(i=ji(void 0,iu,!0),i.factory=()=>yf(i.multi),this.records.set(n,i)),n=e,i.multi.push(e)}this.records.set(n,r)}hydrate(e,n,r){let i=H(null);try{if(n.value===nI)throw jf(Jn(e));return n.value===iu&&(n.value=nI,n.value=n.factory(void 0,r)),typeof n.value=="object"&&n.value&&hR(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}finally{H(i)}}injectableDefInScope(e){if(!e.providedIn)return!1;let n=yt(e.providedIn);return typeof n=="string"?n==="any"||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(e){let n=this._onDestroyHooks.indexOf(e);n!==-1&&this._onDestroyHooks.splice(n,1)}};function vf(t){let e=Ns(t),n=e!==null?e.factory:Xn(t);if(n!==null)return n;if(t instanceof U)throw new V(204,!1);if(t instanceof Function)return uR(t);throw new V(204,!1)}function uR(t){if(t.length>0)throw new V(204,!1);let n=Z0(t);return n!==null?()=>n.factory(t):()=>new t}function lR(t){if(gI(t))return ji(void 0,t.useValue);{let e=mI(t);return ji(e,iu)}}function mI(t,e,n){let r;if(au(t)){let i=yt(t);return Xn(i)||vf(i)}else if(gI(t))r=()=>yt(t.useValue);else if(cR(t))r=()=>t.useFactory(...yf(t.deps||[]));else if(aR(t))r=(i,o)=>z(yt(t.useExisting),o!==void 0&&o&8?8:void 0);else{let i=yt(t&&(t.useClass||t.provide));if(dR(t))r=()=>new i(...yf(t.deps));else return Xn(i)||vf(i)}return r}function bs(t){if(t.destroyed)throw new V(205,!1)}function ji(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function dR(t){return!!t.deps}function hR(t){return t!==null&&typeof t=="object"&&typeof t.ngOnDestroy=="function"}function fR(t){return typeof t=="function"||typeof t=="object"&&t.ngMetadataName==="InjectionToken"}function _f(t,e){for(let n of t)Array.isArray(n)?_f(n,e):n&&Mf(n)?_f(n.\u0275providers,e):e(n)}function Le(t,e){let n;t instanceof Nr?(bs(t),n=t):n=new mf(t);let r,i=nn(n),o=lt(void 0);try{return e()}finally{nn(i),lt(o)}}function yI(){return uI()!==void 0||ru()!=null}var $t=0,q=1,Z=2,Be=3,Nt=4,Mt=5,zi=6,qi=7,be=8,bn=9,Cn=10,$e=11,Gi=12,Gf=13,Or=14,It=15,Lr=16,Fr=17,Vr=18,ks=19,Wf=20,Tn=21,yu=22,Os=23,wt=24,vu=25,jr=26,Fe=27,vI=1,Kf=6,nr=7,Ls=8,Fs=9,Ce=10;function Sn(t){return Array.isArray(t)&&typeof t[vI]=="object"}function Ht(t){return Array.isArray(t)&&t[vI]===!0}function Qf(t){return(t.flags&4)!==0}function Ur(t){return t.componentOffset>-1}function _u(t){return(t.flags&1)===1}function Br(t){return!!t.template}function Wi(t){return(t[Z]&512)!==0}function $r(t){return(t[Z]&256)===256}var Yf="svg",_I="math";function Pt(t){for(;Array.isArray(t);)t=t[$t];return t}function Zf(t,e){return Pt(e[t])}function An(t,e){return Pt(e[t.index])}function Eu(t,e){return t.data[e]}function EI(t,e){return t[e]}function Jf(t,e,n,r){n>=t.data.length&&(t.data[n]=null,t.blueprint[n]=null),e[n]=r}function rn(t,e){let n=e[t];return Sn(n)?n:n[$t]}function Iu(t){return(t[Z]&128)===128}function II(t){return Ht(t[Be])}function on(t,e){return e==null?null:t[e]}function Xf(t){t[Fr]=0}function ep(t){t[Z]&1024||(t[Z]|=1024,Iu(t)&&js(t))}function wI(t,e){for(;t>0;)e=e[Or],t--;return e}function Vs(t){return!!(t[Z]&9216||t[wt]?.dirty)}function wu(t){t[Cn].changeDetectionScheduler?.notify(8),t[Z]&64&&(t[Z]|=1024),Vs(t)&&js(t)}function js(t){t[Cn].changeDetectionScheduler?.notify(0);let e=er(t);for(;e!==null&&!(e[Z]&8192||(e[Z]|=8192,!Iu(e)));)e=er(e)}function tp(t,e){if($r(t))throw new V(911,!1);t[Tn]===null&&(t[Tn]=[]),t[Tn].push(e)}function TI(t,e){if(t[Tn]===null)return;let n=t[Tn].indexOf(e);n!==-1&&t[Tn].splice(n,1)}function er(t){let e=t[Be];return Ht(e)?e[Be]:e}function DI(t){return t[qi]??=[]}function bI(t){return t.cleanup??=[]}var X={lFrame:UI(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var Ef=!1;function CI(){return X.lFrame.elementDepthCount}function SI(){X.lFrame.elementDepthCount++}function np(){X.lFrame.elementDepthCount--}function AI(){return X.bindingsEnabled}function RI(){return X.skipHydrationRootTNode!==null}function rp(t){return X.skipHydrationRootTNode===t}function ip(){X.skipHydrationRootTNode=null}function _e(){return X.lFrame.lView}function sn(){return X.lFrame.tView}function Ki(t){return X.lFrame.contextLView=t,t[be]}function Qi(t){return X.lFrame.contextLView=null,t}function an(){let t=op();for(;t!==null&&t.type===64;)t=t.parent;return t}function op(){return X.lFrame.currentTNode}function NI(){let t=X.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}function Yi(t,e){let n=X.lFrame;n.currentTNode=t,n.isParent=e}function sp(){return X.lFrame.isParent}function MI(){X.lFrame.isParent=!1}function ap(){return Ef}function cp(t){let e=Ef;return Ef=t,e}function PI(){let t=X.lFrame,e=t.bindingRootIndex;return e===-1&&(e=t.bindingRootIndex=t.tView.bindingStartIndex),e}function xI(t){return X.lFrame.bindingIndex=t}function Tu(){return X.lFrame.bindingIndex++}function kI(t){let e=X.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+t,n}function OI(){return X.lFrame.inI18n}function LI(t,e){let n=X.lFrame;n.bindingIndex=n.bindingRootIndex=t,Du(e)}function FI(){return X.lFrame.currentDirectiveIndex}function Du(t){X.lFrame.currentDirectiveIndex=t}function VI(t){let e=X.lFrame.currentDirectiveIndex;return e===-1?null:t[e]}function up(t){X.lFrame.currentQueryIndex=t}function pR(t){let e=t[q];return e.type===2?e.declTNode:e.type===1?t[Mt]:null}function lp(t,e,n){if(n&4){let i=e,o=t;for(;i=i.parent,i===null&&!(n&1);)if(i=pR(o),i===null||(o=o[Or],i.type&10))break;if(i===null)return!1;e=i,t=o}let r=X.lFrame=jI();return r.currentTNode=e,r.lView=t,!0}function bu(t){let e=jI(),n=t[q];X.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function jI(){let t=X.lFrame,e=t===null?null:t.child;return e===null?UI(t):e}function UI(t){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return t!==null&&(t.child=e),e}function BI(){let t=X.lFrame;return X.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}var dp=BI;function Cu(){let t=BI();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function $I(t){return(X.lFrame.contextLView=wI(t,X.lFrame.contextLView))[be]}function rr(){return X.lFrame.selectedIndex}function ir(t){X.lFrame.selectedIndex=t}function Su(){X.lFrame.currentNamespace=Yf}function Au(){gR()}function gR(){X.lFrame.currentNamespace=null}function HI(){return X.lFrame.currentNamespace}var zI=!0;function Ru(){return zI}function Nu(t){zI=t}function If(t,e=null,n=null,r){let i=hp(t,e,n,r);return i.resolveInjectorInitializers(),i}function hp(t,e=null,n=null,r,i=new Set){let o=[n||vt,fI(t)];return r=r||(typeof t=="object"?void 0:Jn(t)),new Nr(o,e||xs(),r||null,i)}var tt=class t{static THROW_IF_NOT_FOUND=Ar;static NULL=new Ss;static create(e,n){if(Array.isArray(e))return If({name:""},n,e,"");{let r=e.name??"";return If({name:r},e.parent,e.providers,r)}}static \u0275prov=j({token:t,providedIn:"any",factory:()=>z($f)});static __NG_ELEMENT_ID__=-1},Ve=new U(""),or=(()=>{class t{static __NG_ELEMENT_ID__=mR;static __NG_ENV_ID__=n=>n}return t})(),wf=class extends or{_lView;constructor(e){super(),this._lView=e}get destroyed(){return $r(this._lView)}onDestroy(e){let n=this._lView;return tp(n,e),()=>TI(n,e)}};function mR(){return new wf(_e())}var qI=!1,Rn=(()=>{class t{taskId=0;pendingTasks=new Set;destroyed=!1;pendingTask=new We(!1);get hasPendingTasks(){return this.destroyed?!1:this.pendingTask.value}get hasPendingTasksObservable(){return this.destroyed?new J(n=>{n.next(!1),n.complete()}):this.pendingTask}add(){!this.hasPendingTasks&&!this.destroyed&&this.pendingTask.next(!0);let n=this.taskId++;return this.pendingTasks.add(n),n}has(n){return this.pendingTasks.has(n)}remove(n){this.pendingTasks.delete(n),this.pendingTasks.size===0&&this.hasPendingTasks&&this.pendingTask.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks&&this.pendingTask.next(!1),this.destroyed=!0,this.pendingTask.unsubscribe()}static \u0275prov=j({token:t,providedIn:"root",factory:()=>new t})}return t})(),Tf=class extends et{__isAsync;destroyRef=void 0;pendingTasks=void 0;constructor(e=!1){super(),this.__isAsync=e,yI()&&(this.destroyRef=M(or,{optional:!0})??void 0,this.pendingTasks=M(Rn,{optional:!0})??void 0)}emit(e){let n=H(null);try{super.next(e)}finally{H(n)}}subscribe(e,n,r){let i=e,o=n||(()=>null),s=r;if(e&&typeof e=="object"){let u=e;i=u.next?.bind(u),o=u.error?.bind(u),s=u.complete?.bind(u)}this.__isAsync&&(o=this.wrapInTimeout(o),i&&(i=this.wrapInTimeout(i)),s&&(s=this.wrapInTimeout(s)));let c=super.subscribe({next:i,error:o,complete:s});return e instanceof xe&&e.add(c),c}wrapInTimeout(e){return n=>{let r=this.pendingTasks?.add();setTimeout(()=>{try{e(n)}finally{r!==void 0&&this.pendingTasks?.remove(r)}})}}},dt=Tf;function cu(...t){}function fp(t){let e,n;function r(){t=cu;try{n!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(n),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{t(),r()}),typeof requestAnimationFrame=="function"&&(n=requestAnimationFrame(()=>{t(),r()})),()=>r()}function pp(t){return queueMicrotask(()=>t()),()=>{t=cu}}var gp="isAngularZone",As=gp+"_ID",yR=0,De=class t{hasPendingMacrotasks=!1;hasPendingMicrotasks=!1;isStable=!0;onUnstable=new dt(!1);onMicrotaskEmpty=new dt(!1);onStable=new dt(!1);onError=new dt(!1);constructor(e){let{enableLongStackTrace:n=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:o=qI}=e;if(typeof Zone>"u")throw new V(908,!1);Zone.assertZonePatched();let s=this;s._nesting=0,s._outer=s._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(s._inner=s._inner.fork(new Zone.TaskTrackingZoneSpec)),n&&Zone.longStackTraceZoneSpec&&(s._inner=s._inner.fork(Zone.longStackTraceZoneSpec)),s.shouldCoalesceEventChangeDetection=!i&&r,s.shouldCoalesceRunChangeDetection=i,s.callbackScheduled=!1,s.scheduleInRootZone=o,ER(s)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(gp)===!0}static assertInAngularZone(){if(!t.isInAngularZone())throw new V(909,!1)}static assertNotInAngularZone(){if(t.isInAngularZone())throw new V(909,!1)}run(e,n,r){return this._inner.run(e,n,r)}runTask(e,n,r,i){let o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,e,vR,cu,cu);try{return o.runTask(s,n,r)}finally{o.cancelTask(s)}}runGuarded(e,n,r){return this._inner.runGuarded(e,n,r)}runOutsideAngular(e){return this._outer.run(e)}},vR={};function mp(t){if(t._nesting==0&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function _R(t){if(t.isCheckStableRunning||t.callbackScheduled)return;t.callbackScheduled=!0;function e(){fp(()=>{t.callbackScheduled=!1,Df(t),t.isCheckStableRunning=!0,mp(t),t.isCheckStableRunning=!1})}t.scheduleInRootZone?Zone.root.run(()=>{e()}):t._outer.run(()=>{e()}),Df(t)}function ER(t){let e=()=>{_R(t)},n=yR++;t._inner=t._inner.fork({name:"angular",properties:{[gp]:!0,[As]:n,[As+n]:!0},onInvokeTask:(r,i,o,s,c,u)=>{if(IR(u))return r.invokeTask(o,s,c,u);try{return rI(t),r.invokeTask(o,s,c,u)}finally{(t.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||t.shouldCoalesceRunChangeDetection)&&e(),iI(t)}},onInvoke:(r,i,o,s,c,u,l)=>{try{return rI(t),r.invoke(o,s,c,u,l)}finally{t.shouldCoalesceRunChangeDetection&&!t.callbackScheduled&&!wR(u)&&e(),iI(t)}},onHasTask:(r,i,o,s)=>{r.hasTask(o,s),i===o&&(s.change=="microTask"?(t._hasPendingMicrotasks=s.microTask,Df(t),mp(t)):s.change=="macroTask"&&(t.hasPendingMacrotasks=s.macroTask))},onHandleError:(r,i,o,s)=>(r.handleError(o,s),t.runOutsideAngular(()=>t.onError.emit(s)),!1)})}function Df(t){t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&t.callbackScheduled===!0?t.hasPendingMicrotasks=!0:t.hasPendingMicrotasks=!1}function rI(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function iI(t){t._nesting--,mp(t)}var Rs=class{hasPendingMicrotasks=!1;hasPendingMacrotasks=!1;isStable=!0;onUnstable=new dt;onMicrotaskEmpty=new dt;onStable=new dt;onError=new dt;run(e,n,r){return e.apply(n,r)}runGuarded(e,n,r){return e.apply(n,r)}runOutsideAngular(e){return e()}runTask(e,n,r,i){return e.apply(n,r)}};function IR(t){return GI(t,"__ignore_ng_zone__")}function wR(t){return GI(t,"__scheduler_tick__")}function GI(t,e){return!Array.isArray(t)||t.length!==1?!1:t[0]?.data?.[e]===!0}var Dn=class{_console=console;handleError(e){this._console.error("ERROR",e)}},Tt=new U("",{factory:()=>{let t=M(De),e=M(Oe),n;return r=>{t.runOutsideAngular(()=>{e.destroyed&&!n?setTimeout(()=>{throw r}):(n??=e.get(Dn),n.handleError(r))})}}}),WI={provide:kr,useValue:()=>{let t=M(Dn,{optional:!0})},multi:!0},TR=new U("",{factory:()=>{let t=M(Ve).defaultView;if(!t)return;let e=M(Tt),n=o=>{e(o.reason),o.preventDefault()},r=o=>{o.error?e(o.error):e(new Error(o.message,{cause:o})),o.preventDefault()},i=()=>{t.addEventListener("unhandledrejection",n),t.addEventListener("error",r)};typeof Zone<"u"?Zone.root.run(i):i(),M(or).onDestroy(()=>{t.removeEventListener("error",r),t.removeEventListener("unhandledrejection",n)})}});function yp(){return Bt([hI(()=>void M(TR))])}function ht(t,e){let[n,r,i]=Wh(t,e?.equal),o=n,s=o[At];return o.set=r,o.update=i,o.asReadonly=KI.bind(o),o}function KI(){let t=this[At];if(t.readonlyFn===void 0){let e=()=>this();e[At]=t,t.readonlyFn=e}return t.readonlyFn}var Mr=class{},Us=new U("",{factory:()=>!0});var vp=new U(""),Zi=(()=>{class t{internalPendingTasks=M(Rn);scheduler=M(Mr);errorHandler=M(Tt);add(){let n=this.internalPendingTasks.add();return()=>{this.internalPendingTasks.has(n)&&(this.scheduler.notify(11),this.internalPendingTasks.remove(n))}}run(n){let r=this.add();n().catch(this.errorHandler).finally(r)}static \u0275prov=j({token:t,providedIn:"root",factory:()=>new t})}return t})(),_p=(()=>{class t{static \u0275prov=j({token:t,providedIn:"root",factory:()=>new bf})}return t})(),bf=class{dirtyEffectCount=0;queues=new Map;add(e){this.enqueue(e),this.schedule(e)}schedule(e){e.dirty&&this.dirtyEffectCount++}remove(e){let n=e.zone,r=this.queues.get(n);r.has(e)&&(r.delete(e),e.dirty&&this.dirtyEffectCount--)}enqueue(e){let n=e.zone;this.queues.has(n)||this.queues.set(n,new Set);let r=this.queues.get(n);r.has(e)||r.add(e)}flush(){for(;this.dirtyEffectCount>0;){let e=!1;for(let[n,r]of this.queues)n===null?e||=this.flushQueue(r):e||=n.run(()=>this.flushQueue(r));e||(this.dirtyEffectCount=0)}}flushQueue(e){let n=!1;for(let r of e)r.dirty&&(this.dirtyEffectCount--,n=!0,r.run());return n}},Cf=class{[At];constructor(e){this[At]=e}destroy(){this[At].destroy()}};function Dt(t){return Kh(t)}function ro(t){return{toString:t}.toString()}var Mu="__parameters__";function NR(t){return function(...n){if(t){let r=t(...n);for(let i in r)this[i]=r[i]}}}function MR(t,e,n){return ro(()=>{let r=NR(e);function i(...o){if(this instanceof i)return r.apply(this,o),this;let s=new i(...o);return c.annotation=s,c;function c(u,l,h){let p=u.hasOwnProperty(Mu)?u[Mu]:Object.defineProperty(u,Mu,{value:[]})[Mu];for(;p.length<=h;)p.push(null);return(p[h]=p[h]||[]).push(s),u}}return i.prototype.ngMetadataName=t,i.annotationCls=i,i})}var Nn=lI(MR("Optional"),8);function PR(t){return typeof t=="function"}function Ew(t,e,n,r){e!==null?e.applyValueToInputSignal(e,r):t[n]=r}var Lu=class{previousValue;currentValue;firstChange;constructor(e,n,r){this.previousValue=e,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}},Zu=(()=>{let t=()=>Iw;return t.ngInherit=!0,t})();function Iw(t){return t.type.prototype.ngOnChanges&&(t.setInput=kR),xR}function xR(){let t=Tw(this),e=t?.current;if(e){let n=t.previous;if(n===xr)t.previous=e;else for(let r in e)n[r]=e[r];t.current=null,this.ngOnChanges(e)}}function kR(t,e,n,r,i){let o=this.declaredInputs[r],s=Tw(t)||OR(t,{previous:xr,current:null}),c=s.current||(s.current={}),u=s.previous,l=u[o];c[o]=new Lu(l&&l.currentValue,n,u===xr),Ew(t,e,i,n)}var ww="__ngSimpleChanges__";function Tw(t){return t[ww]||null}function OR(t,e){return t[ww]=e}var QI=[];var pe=function(t,e=null,n){for(let r=0;r<QI.length;r++){let i=QI[r];i(t,e,n)}},ae=(function(t){return t[t.TemplateCreateStart=0]="TemplateCreateStart",t[t.TemplateCreateEnd=1]="TemplateCreateEnd",t[t.TemplateUpdateStart=2]="TemplateUpdateStart",t[t.TemplateUpdateEnd=3]="TemplateUpdateEnd",t[t.LifecycleHookStart=4]="LifecycleHookStart",t[t.LifecycleHookEnd=5]="LifecycleHookEnd",t[t.OutputStart=6]="OutputStart",t[t.OutputEnd=7]="OutputEnd",t[t.BootstrapApplicationStart=8]="BootstrapApplicationStart",t[t.BootstrapApplicationEnd=9]="BootstrapApplicationEnd",t[t.BootstrapComponentStart=10]="BootstrapComponentStart",t[t.BootstrapComponentEnd=11]="BootstrapComponentEnd",t[t.ChangeDetectionStart=12]="ChangeDetectionStart",t[t.ChangeDetectionEnd=13]="ChangeDetectionEnd",t[t.ChangeDetectionSyncStart=14]="ChangeDetectionSyncStart",t[t.ChangeDetectionSyncEnd=15]="ChangeDetectionSyncEnd",t[t.AfterRenderHooksStart=16]="AfterRenderHooksStart",t[t.AfterRenderHooksEnd=17]="AfterRenderHooksEnd",t[t.ComponentStart=18]="ComponentStart",t[t.ComponentEnd=19]="ComponentEnd",t[t.DeferBlockStateStart=20]="DeferBlockStateStart",t[t.DeferBlockStateEnd=21]="DeferBlockStateEnd",t[t.DynamicComponentStart=22]="DynamicComponentStart",t[t.DynamicComponentEnd=23]="DynamicComponentEnd",t[t.HostBindingsUpdateStart=24]="HostBindingsUpdateStart",t[t.HostBindingsUpdateEnd=25]="HostBindingsUpdateEnd",t})(ae||{});function LR(t,e,n){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){let s=Iw(e);(n.preOrderHooks??=[]).push(t,s),(n.preOrderCheckHooks??=[]).push(t,s)}i&&(n.preOrderHooks??=[]).push(0-t,i),o&&((n.preOrderHooks??=[]).push(t,o),(n.preOrderCheckHooks??=[]).push(t,o))}function FR(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){let o=t.data[n].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:c,ngAfterViewInit:u,ngAfterViewChecked:l,ngOnDestroy:h}=o;s&&(t.contentHooks??=[]).push(-n,s),c&&((t.contentHooks??=[]).push(n,c),(t.contentCheckHooks??=[]).push(n,c)),u&&(t.viewHooks??=[]).push(-n,u),l&&((t.viewHooks??=[]).push(n,l),(t.viewCheckHooks??=[]).push(n,l)),h!=null&&(t.destroyHooks??=[]).push(n,h)}}function xu(t,e,n){Dw(t,e,3,n)}function ku(t,e,n,r){(t[Z]&3)===n&&Dw(t,e,n,r)}function Ep(t,e){let n=t[Z];(n&3)===e&&(n&=16383,n+=1,t[Z]=n)}function Dw(t,e,n,r){let i=r!==void 0?t[Fr]&65535:0,o=r??-1,s=e.length-1,c=0;for(let u=i;u<s;u++)if(typeof e[u+1]=="number"){if(c=e[u],r!=null&&c>=r)break}else e[u]<0&&(t[Fr]+=65536),(c<o||o==-1)&&(VR(t,n,e,u),t[Fr]=(t[Fr]&4294901760)+u+2),u++}function YI(t,e){pe(ae.LifecycleHookStart,t,e);let n=H(null);try{e.call(t)}finally{H(n),pe(ae.LifecycleHookEnd,t,e)}}function VR(t,e,n,r){let i=n[r]<0,o=n[r+1],s=i?-n[r]:n[r],c=t[s];i?t[Z]>>14<t[Fr]>>16&&(t[Z]&3)===e&&(t[Z]+=16384,YI(c,o)):YI(c,o)}var Xi=-1,Hs=class{factory;name;injectImpl;resolving=!1;canSeeViewProviders;multi;componentProviders;index;providerFactory;constructor(e,n,r,i){this.factory=e,this.name=i,this.canSeeViewProviders=n,this.injectImpl=r}};function jR(t){return(t.flags&8)!==0}function UR(t){return(t.flags&16)!==0}function BR(t,e,n){let r=0;for(;r<n.length;){let i=n[r];if(typeof i=="number"){if(i!==0)break;r++;let o=n[r++],s=n[r++],c=n[r++];t.setAttribute(e,s,c,o)}else{let o=i,s=n[++r];HR(o)?t.setProperty(e,o,s):t.setAttribute(e,o,s),r++}}return r}function $R(t){return t===3||t===4||t===6}function HR(t){return t.charCodeAt(0)===64}function Ju(t,e){if(!(e===null||e.length===0))if(t===null||t.length===0)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?n=i:n===0||(n===-1||n===2?ZI(t,n,i,null,e[++r]):ZI(t,n,i,null,null))}}return t}function ZI(t,e,n,r,i){let o=0,s=t.length;if(e===-1)s=-1;else for(;o<t.length;){let c=t[o++];if(typeof c=="number"){if(c===e){s=-1;break}else if(c>e){s=o-1;break}}}for(;o<t.length;){let c=t[o];if(typeof c=="number")break;if(c===n){i!==null&&(t[o+1]=i);return}o++,i!==null&&o++}s!==-1&&(t.splice(s,0,e),o=s+1),t.splice(o++,0,n),i!==null&&t.splice(o++,0,i)}function bw(t){return t!==Xi}function Fu(t){return t&32767}function zR(t){return t>>16}function Vu(t,e){let n=zR(t),r=e;for(;n>0;)r=r[Or],n--;return r}var Sp=!0;function ju(t){let e=Sp;return Sp=t,e}var qR=256,Cw=qR-1,Sw=5,GR=0,cn={};function WR(t,e,n){let r;typeof n=="string"?r=n.charCodeAt(0)||0:n.hasOwnProperty(Pr)&&(r=n[Pr]),r==null&&(r=n[Pr]=GR++);let i=r&Cw,o=1<<i;e.data[t+(i>>Sw)]|=o}function Aw(t,e){let n=Rw(t,e);if(n!==-1)return n;let r=e[q];r.firstCreatePass&&(t.injectorIndex=e.length,Ip(r.data,t),Ip(e,null),Ip(r.blueprint,null));let i=Qp(t,e),o=t.injectorIndex;if(bw(i)){let s=Fu(i),c=Vu(i,e),u=c[q].data;for(let l=0;l<8;l++)e[o+l]=c[s+l]|u[s+l]}return e[o+8]=i,o}function Ip(t,e){t.push(0,0,0,0,0,0,0,0,e)}function Rw(t,e){return t.injectorIndex===-1||t.parent&&t.parent.injectorIndex===t.injectorIndex||e[t.injectorIndex+8]===null?-1:t.injectorIndex}function Qp(t,e){if(t.parent&&t.parent.injectorIndex!==-1)return t.parent.injectorIndex;let n=0,r=null,i=e;for(;i!==null;){if(r=kw(i),r===null)return Xi;if(n++,i=i[Or],r.injectorIndex!==-1)return r.injectorIndex|n<<16}return Xi}function KR(t,e,n){WR(t,e,n)}function Nw(t,e,n){if(n&8||t!==void 0)return t;fu(e,"NodeInjector")}function Mw(t,e,n,r){if(n&8&&r===void 0&&(r=null),(n&3)===0){let i=t[bn],o=lt(void 0);try{return i?i.get(e,r,n&8):Uf(e,r,n&8)}finally{lt(o)}}return Nw(r,e,n)}function Pw(t,e,n,r=0,i){if(t!==null){if(e[Z]&2048&&!(r&2)){let s=XR(t,e,n,r,cn);if(s!==cn)return s}let o=xw(t,e,n,r,cn);if(o!==cn)return o}return Mw(e,n,r,i)}function xw(t,e,n,r,i){let o=ZR(n);if(typeof o=="function"){if(!lp(e,t,r))return r&1?Nw(i,n,r):Mw(e,n,r,i);try{let s;if(s=o(r),s==null&&!(r&8))fu(n);else return s}finally{dp()}}else if(typeof o=="number"){let s=null,c=Rw(t,e),u=Xi,l=r&1?e[It][Mt]:null;for((c===-1||r&4)&&(u=c===-1?Qp(t,e):e[c+8],u===Xi||!XI(r,!1)?c=-1:(s=e[q],c=Fu(u),e=Vu(u,e)));c!==-1;){let h=e[q];if(JI(o,c,h.data)){let p=QR(c,e,n,s,r,l);if(p!==cn)return p}u=e[c+8],u!==Xi&&XI(r,e[q].data[c+8]===l)&&JI(o,c,e)?(s=h,c=Fu(u),e=Vu(u,e)):c=-1}}return i}function QR(t,e,n,r,i,o){let s=e[q],c=s.data[t+8],u=r==null?Ur(c)&&Sp:r!=s&&(c.type&3)!==0,l=i&1&&o===c,h=YR(c,s,n,u,l);return h!==null?Ap(e,s,h,c,i):cn}function YR(t,e,n,r,i){let o=t.providerIndexes,s=e.data,c=o&1048575,u=t.directiveStart,l=t.directiveEnd,h=o>>20,p=r?c:c+h,m=i?c+h:l;for(let y=p;y<m;y++){let C=s[y];if(y<u&&n===C||y>=u&&C.type===n)return y}if(i){let y=s[u];if(y&&Br(y)&&y.type===n)return u}return null}function Ap(t,e,n,r,i){let o=t[n],s=e.data;if(o instanceof Hs){let c=o;if(c.resolving){let y=sI(s[n]);throw jf(y)}let u=ju(c.canSeeViewProviders);c.resolving=!0;let l=s[n].type||s[n],h,p=c.injectImpl?lt(c.injectImpl):null,m=lp(t,r,0);try{o=t[n]=c.factory(void 0,i,s,t,r),e.firstCreatePass&&n>=r.directiveStart&&LR(n,s[n],e)}finally{p!==null&&lt(p),ju(u),c.resolving=!1,dp()}}return o}function ZR(t){if(typeof t=="string")return t.charCodeAt(0)||0;let e=t.hasOwnProperty(Pr)?t[Pr]:void 0;return typeof e=="number"?e>=0?e&Cw:JR:e}function JI(t,e,n){let r=1<<t;return!!(n[e+(t>>Sw)]&r)}function XI(t,e){return!(t&2)&&!(t&1&&e)}var Hr=class{_tNode;_lView;constructor(e,n){this._tNode=e,this._lView=n}get(e,n,r){return Pw(this._tNode,this._lView,e,Rr(r),n)}};function JR(){return new Hr(an(),_e())}function Xu(t){return ro(()=>{let e=t.prototype.constructor,n=e[Cs]||Rp(e),r=Object.prototype,i=Object.getPrototypeOf(t.prototype).constructor;for(;i&&i!==r;){let o=i[Cs]||Rp(i);if(o&&o!==n)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function Rp(t){return Rf(t)?()=>{let e=Rp(yt(t));return e&&e()}:Xn(t)}function XR(t,e,n,r,i){let o=t,s=e;for(;o!==null&&s!==null&&s[Z]&2048&&!Wi(s);){let c=xw(o,s,n,r|2,cn);if(c!==cn)return c;let u=o.parent;if(!u){let l=s[Wf];if(l){let h=l.get(n,cn,r);if(h!==cn)return h}u=kw(s),s=s[Or]}o=u}return i}function kw(t){let e=t[q],n=e.type;return n===2?e.declTNode:n===1?t[Mt]:null}function eN(){return Yp(an(),_e())}function Yp(t,e){return new Zp(An(t,e))}var Zp=(()=>{class t{nativeElement;constructor(n){this.nativeElement=n}static __NG_ELEMENT_ID__=eN}return t})();function Ow(t){return(t.flags&128)===128}var Jp=(function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t})(Jp||{}),Lw=new Map,tN=0;function nN(){return tN++}function rN(t){Lw.set(t[ks],t)}function Np(t){Lw.delete(t[ks])}var ew="__ngContext__";function eo(t,e){Sn(e)?(t[ew]=e[ks],rN(e)):t[ew]=e}function Fw(t){return jw(t[Gi])}function Vw(t){return jw(t[Nt])}function jw(t){for(;t!==null&&!Ht(t);)t=t[Nt];return t}var iN;function Xp(t){iN=t}var el=new U("",{factory:()=>oN}),oN="ng";var tl=new U(""),Qr=new U("",{providedIn:"platform",factory:()=>"unknown"});var nl=new U("",{factory:()=>M(Ve).body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var Uw="r";var Bw="di";var $w=!1,Hw=new U("",{factory:()=>$w});var sN=(t,e,n,r)=>{};function aN(t,e,n,r){sN(t,e,n,r)}function eg(t){return(t.flags&32)===32}var cN=()=>null;function zw(t,e,n=!1){return cN(t,e,n)}function qw(t,e){let n=t.contentQueries;if(n!==null){let r=H(null);try{for(let i=0;i<n.length;i+=2){let o=n[i],s=n[i+1];if(s!==-1){let c=t.data[s];up(o),c.contentQueries(2,e[s],s)}}}finally{H(r)}}}function Mp(t,e,n){up(0);let r=H(null);try{e(t,n)}finally{H(r)}}function Gw(t,e,n){if(Qf(e)){let r=H(null);try{let i=e.directiveStart,o=e.directiveEnd;for(let s=i;s<o;s++){let c=t.data[s];if(c.contentQueries){let u=n[s];c.contentQueries(1,u,s)}}}finally{H(r)}}}var Gt=(function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t[t.ExperimentalIsolatedShadowDom=4]="ExperimentalIsolatedShadowDom",t})(Gt||{});var Pp=class{changingThisBreaksApplicationSecurity;constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${Af})`}};function Ww(t){return t instanceof Pp?t.changingThisBreaksApplicationSecurity:t}function uN(t,e){return t.createText(e)}function lN(t,e,n){t.setValue(e,n)}function Kw(t,e,n){return t.createElement(e,n)}function Uu(t,e,n,r,i){t.insertBefore(e,n,r,i)}function Qw(t,e,n){t.appendChild(e,n)}function tw(t,e,n,r,i){r!==null?Uu(t,e,n,r,i):Qw(t,e,n)}function Yw(t,e,n,r){t.removeChild(null,e,n,r)}function dN(t,e,n){t.setAttribute(e,"style",n)}function hN(t,e,n){n===""?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n)}function Zw(t,e,n){let{mergedAttrs:r,classes:i,styles:o}=n;r!==null&&BR(t,e,r),i!==null&&hN(t,e,i),o!==null&&dN(t,e,o)}function Jw(t){return t instanceof Function?t():t}function fN(t,e,n){let r=t.length;for(;;){let i=t.indexOf(e,n);if(i===-1)return i;if(i===0||t.charCodeAt(i-1)<=32){let o=e.length;if(i+o===r||t.charCodeAt(i+o)<=32)return i}n=i+1}}var Xw="ng-template";function pN(t,e,n,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&fN(e[i+1].toLowerCase(),n,0)!==-1)return!0}else if(tg(t))return!1;if(i=e.indexOf(1,i),i>-1){let o;for(;++i<e.length&&typeof(o=e[i])=="string";)if(o.toLowerCase()===n)return!0}return!1}function tg(t){return t.type===4&&t.value!==Xw}function gN(t,e,n){let r=t.type===4&&!n?Xw:t.value;return e===r}function mN(t,e,n){let r=4,i=t.attrs,o=i!==null?_N(i):0,s=!1;for(let c=0;c<e.length;c++){let u=e[c];if(typeof u=="number"){if(!s&&!zt(r)&&!zt(u))return!1;if(s&&zt(u))continue;s=!1,r=u|r&1;continue}if(!s)if(r&4){if(r=2|r&1,u!==""&&!gN(t,u,n)||u===""&&e.length===1){if(zt(r))return!1;s=!0}}else if(r&8){if(i===null||!pN(t,i,u,n)){if(zt(r))return!1;s=!0}}else{let l=e[++c],h=yN(u,i,tg(t),n);if(h===-1){if(zt(r))return!1;s=!0;continue}if(l!==""){let p;if(h>o?p="":p=i[h+1].toLowerCase(),r&2&&l!==p){if(zt(r))return!1;s=!0}}}}return zt(r)||s}function zt(t){return(t&1)===0}function yN(t,e,n,r){if(e===null)return-1;let i=0;if(r||!n){let o=!1;for(;i<e.length;){let s=e[i];if(s===t)return i;if(s===3||s===6)o=!0;else if(s===1||s===2){let c=e[++i];for(;typeof c=="string";)c=e[++i];continue}else{if(s===4)break;if(s===0){i+=4;continue}}i+=o?1:2}return-1}else return EN(e,t)}function vN(t,e,n=!1){for(let r=0;r<e.length;r++)if(mN(t,e[r],n))return!0;return!1}function _N(t){for(let e=0;e<t.length;e++){let n=t[e];if($R(n))return e}return t.length}function EN(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){let r=t[n];if(typeof r=="number")return-1;if(r===e)return n;n++}return-1}function nw(t,e){return t?":not("+e.trim()+")":e}function IN(t){let e=t[0],n=1,r=2,i="",o=!1;for(;n<t.length;){let s=t[n];if(typeof s=="string")if(r&2){let c=t[++n];i+="["+s+(c.length>0?'="'+c+'"':"")+"]"}else r&8?i+="."+s:r&4&&(i+=" "+s);else i!==""&&!zt(s)&&(e+=nw(o,i),i=""),r=s,o=o||!zt(r);n++}return i!==""&&(e+=nw(o,i)),e}function wN(t){return t.map(IN).join(",")}function TN(t){let e=[],n=[],r=1,i=2;for(;r<t.length;){let o=t[r];if(typeof o=="string")i===2?o!==""&&e.push(o,t[++r]):i===8&&n.push(o);else{if(!zt(i))break;i=o}r++}return n.length&&e.push(1,...n),e}var Wt={};function ng(t,e,n,r,i,o,s,c,u,l,h){let p=Fe+r,m=p+i,y=DN(p,m),C=typeof l=="function"?l():l;return y[q]={type:t,blueprint:y,template:n,queries:null,viewQuery:c,declTNode:e,data:y.slice().fill(null,p),bindingStartIndex:p,expandoStartIndex:m,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:u,consts:C,incompleteFirstPass:!1,ssrId:h}}function DN(t,e){let n=[];for(let r=0;r<e;r++)n.push(r<t?null:Wt);return n}function bN(t){let e=t.tView;return e===null||e.incompleteFirstPass?t.tView=ng(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts,t.id):e}function rg(t,e,n,r,i,o,s,c,u,l,h){let p=e.blueprint.slice();return p[$t]=i,p[Z]=r|4|128|8|64|1024,(l!==null||t&&t[Z]&2048)&&(p[Z]|=2048),Xf(p),p[Be]=p[Or]=t,p[be]=n,p[Cn]=s||t&&t[Cn],p[$e]=c||t&&t[$e],p[bn]=u||t&&t[bn]||null,p[Mt]=o,p[ks]=nN(),p[zi]=h,p[Wf]=l,p[It]=e.type==2?t[It]:p,p}function CN(t,e,n){let r=An(e,t),i=bN(n),o=t[Cn].rendererFactory,s=ig(t,rg(t,i,null,eT(n),r,e,null,o.createRenderer(r,n),null,null,null));return t[e.index]=s}function eT(t){let e=16;return t.signals?e=4096:t.onPush&&(e=64),e}function tT(t,e,n,r){if(n===0)return-1;let i=e.length;for(let o=0;o<n;o++)e.push(r),t.blueprint.push(r),t.data.push(null);return i}function ig(t,e){return t[Gi]?t[Gf][Nt]=e:t[Gi]=e,t[Gf]=e,e}function bt(t=1){nT(sn(),_e(),rr()+t,!1)}function nT(t,e,n,r){if(!r)if((e[Z]&3)===3){let o=t.preOrderCheckHooks;o!==null&&xu(e,o,n)}else{let o=t.preOrderHooks;o!==null&&ku(e,o,0,n)}ir(n)}var rl=(function(t){return t[t.None=0]="None",t[t.SignalBased=1]="SignalBased",t[t.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",t})(rl||{});function xp(t,e,n,r){let i=H(null);try{let[o,s,c]=t.inputs[n],u=null;(s&rl.SignalBased)!==0&&(u=e[o][At]),u!==null&&u.transformFn!==void 0?r=u.transformFn(r):c!==null&&(r=c.call(e,r)),t.setInput!==null?t.setInput(e,u,r,n,o):Ew(e,u,o,r)}finally{H(i)}}var un=(function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t})(un||{}),SN;function og(t,e){return SN(t,e)}var zr=new Set,sg=(function(t){return t[t.CHANGE_DETECTION=0]="CHANGE_DETECTION",t[t.AFTER_NEXT_RENDER=1]="AFTER_NEXT_RENDER",t})(sg||{}),Qs=new U(""),rw=new Set;function Yr(t){rw.has(t)||(rw.add(t),performance?.mark?.("mark_feature_usage",{detail:{feature:t}}))}var rT=(()=>{class t{impl=null;execute(){this.impl?.execute()}static \u0275prov=j({token:t,providedIn:"root",factory:()=>new t})}return t})();var iT=new U("",{factory:()=>({queue:new Set,isScheduled:!1,scheduler:null,injector:M(Oe)})});function oT(t,e,n){let r=t.get(iT);if(Array.isArray(e))for(let i of e)r.queue.add(i),n?.detachedLeaveAnimationFns?.push(i);else r.queue.add(e),n?.detachedLeaveAnimationFns?.push(e);r.scheduler&&r.scheduler(t)}function AN(t,e){let n=t.get(iT);if(e.detachedLeaveAnimationFns){for(let r of e.detachedLeaveAnimationFns)n.queue.delete(r);e.detachedLeaveAnimationFns=void 0}}function RN(t,e){for(let[n,r]of e)oT(t,r.animateFns)}function iw(t,e,n,r){let i=t?.[jr]?.enter;e!==null&&i&&i.has(n.index)&&RN(r,i)}function Ji(t,e,n,r,i,o,s,c){if(i!=null){let u,l=!1;Ht(i)?u=i:Sn(i)&&(l=!0,i=i[$t]);let h=Pt(i);t===0&&r!==null?(iw(c,r,o,n),s==null?Qw(e,r,h):Uu(e,r,h,s||null,!0)):t===1&&r!==null?(iw(c,r,o,n),Uu(e,r,h,s||null,!0)):t===2?ow(c,o,n,p=>{Yw(e,h,l,p)}):t===3&&ow(c,o,n,()=>{e.destroyNode(h)}),u!=null&&$N(e,t,n,u,o,r,s)}}function NN(t,e){sT(t,e),e[$t]=null,e[Mt]=null}function MN(t,e,n,r,i,o){r[$t]=i,r[Mt]=e,ol(t,r,n,1,i,o)}function sT(t,e){e[Cn].changeDetectionScheduler?.notify(9),ol(t,e,e[$e],2,null,null)}function PN(t){let e=t[Gi];if(!e)return wp(t[q],t);for(;e;){let n=null;if(Sn(e))n=e[Gi];else{let r=e[Ce];r&&(n=r)}if(!n){for(;e&&!e[Nt]&&e!==t;)Sn(e)&&wp(e[q],e),e=e[Be];e===null&&(e=t),Sn(e)&&wp(e[q],e),n=e&&e[Nt]}e=n}}function ag(t,e){let n=t[Fs],r=n.indexOf(e);n.splice(r,1)}function il(t,e){if($r(e))return;let n=e[$e];n.destroyNode&&ol(t,e,n,3,null,null),PN(e)}function wp(t,e){if($r(e))return;let n=H(null);try{e[Z]&=-129,e[Z]|=256,e[wt]&&vs(e[wt]),ON(t,e),kN(t,e),e[q].type===1&&e[$e].destroy();let r=e[Lr];if(r!==null&&Ht(e[Be])){r!==e[Be]&&ag(r,e);let i=e[Vr];i!==null&&i.detachView(t)}Np(e)}finally{H(n)}}function ow(t,e,n,r){let i=t?.[jr];if(i==null||i.leave==null||!i.leave.has(e.index))return r(!1);t&&zr.add(t),oT(n,()=>{if(i.leave&&i.leave.has(e.index)){let s=i.leave.get(e.index),c=[];if(s){for(let u=0;u<s.animateFns.length;u++){let l=s.animateFns[u],{promise:h}=l();c.push(h)}i.detachedLeaveAnimationFns=void 0}i.running=Promise.allSettled(c),xN(t,r)}else t&&zr.delete(t),r(!1)},i)}function xN(t,e){let n=t[jr]?.running;if(n){n.then(()=>{t[jr].running=void 0,zr.delete(t),e(!0)});return}e(!1)}function kN(t,e){let n=t.cleanup,r=e[qi];if(n!==null)for(let s=0;s<n.length-1;s+=2)if(typeof n[s]=="string"){let c=n[s+3];c>=0?r[c]():r[-c].unsubscribe(),s+=2}else{let c=r[n[s+1]];n[s].call(c)}r!==null&&(e[qi]=null);let i=e[Tn];if(i!==null){e[Tn]=null;for(let s=0;s<i.length;s++){let c=i[s];c()}}let o=e[Os];if(o!==null){e[Os]=null;for(let s of o)s.destroy()}}function ON(t,e){let n;if(t!=null&&(n=t.destroyHooks)!=null)for(let r=0;r<n.length;r+=2){let i=e[n[r]];if(!(i instanceof Hs)){let o=n[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){let c=i[o[s]],u=o[s+1];pe(ae.LifecycleHookStart,c,u);try{u.call(c)}finally{pe(ae.LifecycleHookEnd,c,u)}}else{pe(ae.LifecycleHookStart,i,o);try{o.call(i)}finally{pe(ae.LifecycleHookEnd,i,o)}}}}}function LN(t,e,n){return FN(t,e.parent,n)}function FN(t,e,n){let r=e;for(;r!==null&&r.type&168;)e=r,r=e.parent;if(r===null)return n[$t];if(Ur(r)){let{encapsulation:i}=t.data[r.directiveStart+r.componentOffset];if(i===Gt.None||i===Gt.Emulated)return null}return An(r,n)}function VN(t,e,n){return UN(t,e,n)}function jN(t,e,n){return t.type&40?An(t,n):null}var UN=jN,sw;function cg(t,e,n,r){let i=LN(t,r,e),o=e[$e],s=r.parent||e[Mt],c=VN(s,r,e);if(i!=null)if(Array.isArray(n))for(let u=0;u<n.length;u++)tw(o,i,n[u],c,!1);else tw(o,i,n,c,!1);sw!==void 0&&sw(o,r,e,n,i)}function Bs(t,e){if(e!==null){let n=e.type;if(n&3)return An(e,t);if(n&4)return kp(-1,t[e.index]);if(n&8){let r=e.child;if(r!==null)return Bs(t,r);{let i=t[e.index];return Ht(i)?kp(-1,i):Pt(i)}}else{if(n&128)return Bs(t,e.next);if(n&32)return og(e,t)()||Pt(t[e.index]);{let r=aT(t,e);if(r!==null){if(Array.isArray(r))return r[0];let i=er(t[It]);return Bs(i,r)}else return Bs(t,e.next)}}}return null}function aT(t,e){if(e!==null){let r=t[It][Mt],i=e.projection;return r.projection[i]}return null}function kp(t,e){let n=Ce+t+1;if(n<e.length){let r=e[n],i=r[q].firstChild;if(i!==null)return Bs(r,i)}return e[nr]}function ug(t,e,n,r,i,o,s){for(;n!=null;){let c=r[bn];if(n.type===128){n=n.next;continue}let u=r[n.index],l=n.type;if(s&&e===0&&(u&&eo(Pt(u),r),n.flags|=2),!eg(n))if(l&8)ug(t,e,n.child,r,i,o,!1),Ji(e,t,c,i,u,n,o,r);else if(l&32){let h=og(n,r),p;for(;p=h();)Ji(e,t,c,i,p,n,o,r);Ji(e,t,c,i,u,n,o,r)}else l&16?BN(t,e,r,n,i,o):Ji(e,t,c,i,u,n,o,r);n=s?n.projectionNext:n.next}}function ol(t,e,n,r,i,o){ug(n,r,t.firstChild,e,i,o,!1)}function BN(t,e,n,r,i,o){let s=n[It],u=s[Mt].projection[r.projection];if(Array.isArray(u))for(let l=0;l<u.length;l++){let h=u[l];Ji(e,t,n[bn],i,h,r,o,n)}else{let l=u,h=s[Be];Ow(r)&&(l.flags|=128),ug(t,e,l,h,i,o,!0)}}function $N(t,e,n,r,i,o,s){let c=r[nr],u=Pt(r);c!==u&&Ji(e,t,n,o,c,i,s);for(let l=Ce;l<r.length;l++){let h=r[l];ol(h[q],h,t,e,o,c)}}function HN(t,e,n,r,i){if(e)i?t.addClass(n,r):t.removeClass(n,r);else{let o=r.indexOf("-")===-1?void 0:un.DashCase;i==null?t.removeStyle(n,r,o):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),o|=un.Important),t.setStyle(n,r,i,o))}}function cT(t,e,n,r,i){let o=rr(),s=r&2;try{ir(-1),s&&e.length>Fe&&nT(t,e,Fe,!1);let c=s?ae.TemplateUpdateStart:ae.TemplateCreateStart;pe(c,i,n),n(r,i)}finally{ir(o);let c=s?ae.TemplateUpdateEnd:ae.TemplateCreateEnd;pe(c,i,n)}}function uT(t,e,n){WN(t,e,n),(n.flags&64)===64&&KN(t,e,n)}function lg(t,e,n=An){let r=e.localNames;if(r!==null){let i=e.index+1;for(let o=0;o<r.length;o+=2){let s=r[o+1],c=s===-1?n(e,t):t[s];t[i++]=c}}}function zN(t,e,n,r){let o=r.get(Hw,$w)||n===Gt.ShadowDom||n===Gt.ExperimentalIsolatedShadowDom,s=t.selectRootElement(e,o);return qN(s),s}function qN(t){GN(t)}var GN=()=>null;function WN(t,e,n){let r=n.directiveStart,i=n.directiveEnd;Ur(n)&&CN(e,n,t.data[r+n.componentOffset]),t.firstCreatePass||Aw(n,e);let o=n.initialInputs;for(let s=r;s<i;s++){let c=t.data[s],u=Ap(e,t,s,n);if(eo(u,e),o!==null&&ZN(e,s-r,u,c,n,o),Br(c)){let l=rn(n.index,e);l[be]=Ap(e,t,s,n)}}}function KN(t,e,n){let r=n.directiveStart,i=n.directiveEnd,o=n.index,s=FI();try{ir(o);for(let c=r;c<i;c++){let u=t.data[c],l=e[c];Du(c),(u.hostBindings!==null||u.hostVars!==0||u.hostAttrs!==null)&&QN(u,l)}}finally{ir(-1),Du(s)}}function QN(t,e){t.hostBindings!==null&&t.hostBindings(1,e)}function YN(t,e){let n=t.directiveRegistry,r=null;if(n)for(let i=0;i<n.length;i++){let o=n[i];vN(e,o.selectors,!1)&&(r??=[],Br(o)?r.unshift(o):r.push(o))}return r}function ZN(t,e,n,r,i,o){let s=o[e];if(s!==null)for(let c=0;c<s.length;c+=2){let u=s[c],l=s[c+1];xp(r,n,u,l)}}function lT(t,e,n,r,i){let o=Fe+n,s=e[q],c=i(s,e,t,r,n);e[o]=c,Yi(t,!0);let u=t.type===2;return u?(Zw(e[$e],c,t),(CI()===0||_u(t))&&eo(c,e),SI()):eo(c,e),Ru()&&(!u||!eg(t))&&cg(s,e,c,t),t}function dT(t){let e=t;return sp()?MI():(e=e.parent,Yi(e,!1)),e}function JN(t,e){let n=t[bn];if(!n)return;let r;try{r=n.get(Tt,null)}catch{r=null}r?.(e)}function hT(t,e,n,r,i){let o=t.inputs?.[r],s=t.hostDirectiveInputs?.[r],c=!1;if(s)for(let u=0;u<s.length;u+=2){let l=s[u],h=s[u+1],p=e.data[l];xp(p,n[l],h,i),c=!0}if(o)for(let u of o){let l=n[u],h=e.data[u];xp(h,l,r,i),c=!0}return c}function XN(t,e){let n=rn(e,t),r=n[q];eM(r,n);let i=n[$t];i!==null&&n[zi]===null&&(n[zi]=zw(i,n[bn])),pe(ae.ComponentStart);try{dg(r,n,n[be])}finally{pe(ae.ComponentEnd,n[be])}}function eM(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}function dg(t,e,n){bu(e);try{let r=t.viewQuery;r!==null&&Mp(1,r,n);let i=t.template;i!==null&&cT(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),e[Vr]?.finishViewCreation(t),t.staticContentQueries&&qw(t,e),t.staticViewQueries&&Mp(2,t.viewQuery,n);let o=t.components;o!==null&&tM(e,o)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),r}finally{e[Z]&=-5,Cu()}}function tM(t,e){for(let n=0;n<e.length;n++)XN(t,e[n])}function hg(t,e,n,r){let i=H(null);try{let o=e.tView,c=t[Z]&4096?4096:16,u=rg(t,o,n,c,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),l=t[e.index];u[Lr]=l;let h=t[Vr];return h!==null&&(u[Vr]=h.createEmbeddedView(o)),dg(o,u,n),u}finally{H(i)}}function zs(t,e){return!e||e.firstChild===null||Ow(t)}function qs(t,e,n,r,i=!1){for(;n!==null;){if(n.type===128){n=i?n.projectionNext:n.next;continue}let o=e[n.index];o!==null&&r.push(Pt(o)),Ht(o)&&fT(o,r);let s=n.type;if(s&8)qs(t,e,n.child,r);else if(s&32){let c=og(n,e),u;for(;u=c();)r.push(u)}else if(s&16){let c=aT(e,n);if(Array.isArray(c))r.push(...c);else{let u=er(e[It]);qs(u[q],u,c,r,!0)}}n=i?n.projectionNext:n.next}return r}function fT(t,e){for(let n=Ce;n<t.length;n++){let r=t[n],i=r[q].firstChild;i!==null&&qs(r[q],r,i,e)}t[nr]!==t[$t]&&e.push(t[nr])}function pT(t){if(t[vu]!==null){for(let e of t[vu])e.impl.addSequence(e);t[vu].length=0}}var gT=[];function nM(t){return t[wt]??rM(t)}function rM(t){let e=gT.pop()??Object.create(oM);return e.lView=t,e}function iM(t){t.lView[wt]!==t&&(t.lView=null,gT.push(t))}var oM=ve(L({},Rc),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:t=>{js(t.lView)},consumerOnSignalRead(){this.lView[wt]=this}});function sM(t){let e=t[wt]??Object.create(aM);return e.lView=t,e}var aM=ve(L({},Rc),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:t=>{let e=er(t.lView);for(;e&&!mT(e[q]);)e=er(e);e&&ep(e)},consumerOnSignalRead(){this.lView[wt]=this}});function mT(t){return t.type!==2}function yT(t){if(t[Os]===null)return;let e=!0;for(;e;){let n=!1;for(let r of t[Os])r.dirty&&(n=!0,r.zone===null||Zone.current===r.zone?r.run():r.zone.run(()=>r.run()));e=n&&!!(t[Z]&8192)}}var cM=100;function vT(t,e=0){let r=t[Cn].rendererFactory,i=!1;i||r.begin?.();try{uM(t,e)}finally{i||r.end?.()}}function uM(t,e){let n=ap();try{cp(!0),Op(t,e);let r=0;for(;Vs(t);){if(r===cM)throw new V(103,!1);r++,Op(t,1)}}finally{cp(n)}}function lM(t,e,n,r){if($r(e))return;let i=e[Z],o=!1,s=!1;bu(e);let c=!0,u=null,l=null;o||(mT(t)?(l=nM(e),u=Mc(l)):Ac()===null?(c=!1,l=sM(e),u=Mc(l)):e[wt]&&(vs(e[wt]),e[wt]=null));try{Xf(e),xI(t.bindingStartIndex),n!==null&&cT(t,e,n,2,r);let h=(i&3)===3;if(!o)if(h){let y=t.preOrderCheckHooks;y!==null&&xu(e,y,null)}else{let y=t.preOrderHooks;y!==null&&ku(e,y,0,null),Ep(e,0)}if(s||dM(e),yT(e),_T(e,0),t.contentQueries!==null&&qw(t,e),!o)if(h){let y=t.contentCheckHooks;y!==null&&xu(e,y)}else{let y=t.contentHooks;y!==null&&ku(e,y,1),Ep(e,1)}fM(t,e);let p=t.components;p!==null&&IT(e,p,0);let m=t.viewQuery;if(m!==null&&Mp(2,m,r),!o)if(h){let y=t.viewCheckHooks;y!==null&&xu(e,y)}else{let y=t.viewHooks;y!==null&&ku(e,y,2),Ep(e,2)}if(t.firstUpdatePass===!0&&(t.firstUpdatePass=!1),e[yu]){for(let y of e[yu])y();e[yu]=null}o||(pT(e),e[Z]&=-73)}catch(h){throw o||js(e),h}finally{l!==null&&(zh(l,u),c&&iM(l)),Cu()}}function _T(t,e){for(let n=Fw(t);n!==null;n=Vw(n))for(let r=Ce;r<n.length;r++){let i=n[r];ET(i,e)}}function dM(t){for(let e=Fw(t);e!==null;e=Vw(e)){if(!(e[Z]&2))continue;let n=e[Fs];for(let r=0;r<n.length;r++){let i=n[r];ep(i)}}}function hM(t,e,n){pe(ae.ComponentStart);let r=rn(e,t);try{ET(r,n)}finally{pe(ae.ComponentEnd,r[be])}}function ET(t,e){Iu(t)&&Op(t,e)}function Op(t,e){let r=t[q],i=t[Z],o=t[wt],s=!!(e===0&&i&16);if(s||=!!(i&64&&e===0),s||=!!(i&1024),s||=!!(o?.dirty&&Pc(o)),s||=!1,o&&(o.dirty=!1),t[Z]&=-9217,s)lM(r,t,r.template,t[be]);else if(i&8192){let c=H(null);try{yT(t),_T(t,1);let u=r.components;u!==null&&IT(t,u,1),pT(t)}finally{H(c)}}}function IT(t,e,n){for(let r=0;r<e.length;r++)hM(t,e[r],n)}function fM(t,e){let n=t.hostBindingOpCodes;if(n!==null)try{for(let r=0;r<n.length;r++){let i=n[r];if(i<0)ir(~i);else{let o=i,s=n[++r],c=n[++r];LI(s,o);let u=e[o];pe(ae.HostBindingsUpdateStart,u);try{c(2,u)}finally{pe(ae.HostBindingsUpdateEnd,u)}}}}finally{ir(-1)}}function fg(t,e){let n=ap()?64:1088;for(t[Cn].changeDetectionScheduler?.notify(e);t;){t[Z]|=n;let r=er(t);if(Wi(t)&&!r)return t;t=r}return null}function wT(t,e,n,r){return[t,!0,0,e,null,r,null,n,null,null]}function TT(t,e){let n=Ce+e;if(n<t.length)return t[n]}function sl(t,e,n,r=!0){let i=e[q];if(pM(i,e,t,n),r){let s=kp(n,t),c=e[$e],u=c.parentNode(t[nr]);u!==null&&MN(i,t[Mt],c,e,u,s)}let o=e[zi];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function DT(t,e){let n=Gs(t,e);return n!==void 0&&il(n[q],n),n}function Gs(t,e){if(t.length<=Ce)return;let n=Ce+e,r=t[n];if(r){let i=r[Lr];i!==null&&i!==t&&ag(i,r),e>0&&(t[n-1][Nt]=r[Nt]);let o=Ms(t,Ce+e);NN(r[q],r);let s=o[Vr];s!==null&&s.detachView(o[q]),r[Be]=null,r[Nt]=null,r[Z]&=-129}return r}function pM(t,e,n,r){let i=Ce+r,o=n.length;r>0&&(n[i-1][Nt]=e),r<o-Ce?(e[Nt]=n[i],Bf(n,Ce+r,e)):(n.push(e),e[Nt]=null),e[Be]=n;let s=e[Lr];s!==null&&n!==s&&bT(s,e);let c=e[Vr];c!==null&&c.insertView(t),wu(e),e[Z]|=128}function bT(t,e){let n=t[Fs],r=e[Be];if(Sn(r))t[Z]|=2;else{let i=r[Be][It];e[It]!==i&&(t[Z]|=2)}n===null?t[Fs]=[e]:n.push(e)}var qr=class{_lView;_cdRefInjectingView;_appRef=null;_attachedToViewContainer=!1;exhaustive;get rootNodes(){let e=this._lView,n=e[q];return qs(n,e,n.firstChild,[])}constructor(e,n){this._lView=e,this._cdRefInjectingView=n}get context(){return this._lView[be]}set context(e){this._lView[be]=e}get destroyed(){return $r(this._lView)}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[Be];if(Ht(e)){let n=e[Ls],r=n?n.indexOf(this):-1;r>-1&&(Gs(e,r),Ms(n,r))}this._attachedToViewContainer=!1}il(this._lView[q],this._lView)}onDestroy(e){tp(this._lView,e)}markForCheck(){fg(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[Z]&=-129}reattach(){wu(this._lView),this._lView[Z]|=128}detectChanges(){this._lView[Z]|=1024,vT(this._lView)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new V(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=Wi(this._lView),n=this._lView[Lr];n!==null&&!e&&ag(n,this._lView),sT(this._lView[q],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new V(902,!1);this._appRef=e;let n=Wi(this._lView),r=this._lView[Lr];r!==null&&!n&&bT(r,this._lView),wu(this._lView)}};function al(t,e,n,r,i){let o=t.data[e];if(o===null)o=gM(t,e,n,r,i),OI()&&(o.flags|=32);else if(o.type&64){o.type=n,o.value=r,o.attrs=i;let s=NI();o.injectorIndex=s===null?-1:s.injectorIndex}return Yi(o,!0),o}function gM(t,e,n,r,i){let o=op(),s=sp(),c=s?o:o&&o.parent,u=t.data[e]=yM(t,c,n,e,r,i);return mM(t,u,o,s),u}function mM(t,e,n,r){t.firstChild===null&&(t.firstChild=e),n!==null&&(r?n.child==null&&e.parent!==null&&(n.child=e):n.next===null&&(n.next=e,e.prev=n))}function yM(t,e,n,r,i,o){let s=e?e.injectorIndex:-1,c=0;return RI()&&(c|=128),{type:n,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,fieldIndex:-1,customControlIndex:-1,propertyBindings:null,flags:c,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:null,inputs:null,hostDirectiveInputs:null,outputs:null,hostDirectiveOutputs:null,directiveToIndex:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function vM(t){let e=t[Kf]??[],r=t[Be][$e],i=[];for(let o of e)o.data[Bw]!==void 0?i.push(o):_M(o,r);t[Kf]=i}function _M(t,e){let n=0,r=t.firstChild;if(r){let i=t.data[Uw];for(;n<i;){let o=r.nextSibling;Yw(e,r,!1),r=o,n++}}}var EM=()=>null,IM=()=>null;function Lp(t,e){return EM(t,e)}function CT(t,e,n){return IM(t,e,n)}var ST=class{},cl=class{},Fp=class{resolveComponentFactory(e){throw new V(917,!1)}},Ys=class{static NULL=new Fp},Gr=class{};var AT=(()=>{class t{static \u0275prov=j({token:t,providedIn:"root",factory:()=>null})}return t})();var Ou={},Vp=class{injector;parentInjector;constructor(e,n){this.injector=e,this.parentInjector=n}get(e,n,r){let i=this.injector.get(e,Ou,r);return i!==Ou||n===Ou?i:this.parentInjector.get(e,n,r)}};function Bu(t,e,n){let r=n?t.styles:null,i=n?t.classes:null,o=0;if(e!==null)for(let s=0;s<e.length;s++){let c=e[s];if(typeof c=="number")o=c;else if(o==1)i=uu(i,c);else if(o==2){let u=c,l=e[++s];r=uu(r,u+": "+l+";")}}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}function Zs(t,e=0){let n=_e();if(n===null)return z(t,e);let r=an();return Pw(r,n,yt(t),e)}function wM(t,e,n,r,i){let o=r===null?null:{"":-1},s=i(t,n);if(s!==null){let c=s,u=null,l=null;for(let h of s)if(h.resolveHostDirectives!==null){[c,u,l]=h.resolveHostDirectives(s);break}bM(t,e,n,c,o,u,l)}o!==null&&r!==null&&TM(n,r,o)}function TM(t,e,n){let r=t.localNames=[];for(let i=0;i<e.length;i+=2){let o=n[e[i+1]];if(o==null)throw new V(-301,!1);r.push(e[i],o)}}function DM(t,e,n){e.componentOffset=n,(t.components??=[]).push(e.index)}function bM(t,e,n,r,i,o,s){let c=r.length,u=null;for(let m=0;m<c;m++){let y=r[m];u===null&&Br(y)&&(u=y,DM(t,n,m)),KR(Aw(n,e),t,y.type)}MM(n,t.data.length,c),u?.viewProvidersResolver&&u.viewProvidersResolver(u);for(let m=0;m<c;m++){let y=r[m];y.providersResolver&&y.providersResolver(y)}let l=!1,h=!1,p=tT(t,e,c,null);c>0&&(n.directiveToIndex=new Map);for(let m=0;m<c;m++){let y=r[m];if(n.mergedAttrs=Ju(n.mergedAttrs,y.hostAttrs),SM(t,n,e,p,y),NM(p,y,i),s!==null&&s.has(y)){let[A,R]=s.get(y);n.directiveToIndex.set(y.type,[p,A+n.directiveStart,R+n.directiveStart])}else(o===null||!o.has(y))&&n.directiveToIndex.set(y.type,p);y.contentQueries!==null&&(n.flags|=4),(y.hostBindings!==null||y.hostAttrs!==null||y.hostVars!==0)&&(n.flags|=64);let C=y.type.prototype;!l&&(C.ngOnChanges||C.ngOnInit||C.ngDoCheck)&&((t.preOrderHooks??=[]).push(n.index),l=!0),!h&&(C.ngOnChanges||C.ngDoCheck)&&((t.preOrderCheckHooks??=[]).push(n.index),h=!0),p++}CM(t,n,o)}function CM(t,e,n){for(let r=e.directiveStart;r<e.directiveEnd;r++){let i=t.data[r];if(n===null||!n.has(i))aw(0,e,i,r),aw(1,e,i,r),uw(e,r,!1);else{let o=n.get(i);cw(0,e,o,r),cw(1,e,o,r),uw(e,r,!0)}}}function aw(t,e,n,r){let i=t===0?n.inputs:n.outputs;for(let o in i)if(i.hasOwnProperty(o)){let s;t===0?s=e.inputs??={}:s=e.outputs??={},s[o]??=[],s[o].push(r),RT(e,o)}}function cw(t,e,n,r){let i=t===0?n.inputs:n.outputs;for(let o in i)if(i.hasOwnProperty(o)){let s=i[o],c;t===0?c=e.hostDirectiveInputs??={}:c=e.hostDirectiveOutputs??={},c[s]??=[],c[s].push(r,o),RT(e,s)}}function RT(t,e){e==="class"?t.flags|=8:e==="style"&&(t.flags|=16)}function uw(t,e,n){let{attrs:r,inputs:i,hostDirectiveInputs:o}=t;if(r===null||!n&&i===null||n&&o===null||tg(t)){t.initialInputs??=[],t.initialInputs.push(null);return}let s=null,c=0;for(;c<r.length;){let u=r[c];if(u===0){c+=4;continue}else if(u===5){c+=2;continue}else if(typeof u=="number")break;if(!n&&i.hasOwnProperty(u)){let l=i[u];for(let h of l)if(h===e){s??=[],s.push(u,r[c+1]);break}}else if(n&&o.hasOwnProperty(u)){let l=o[u];for(let h=0;h<l.length;h+=2)if(l[h]===e){s??=[],s.push(l[h+1],r[c+1]);break}}c+=2}t.initialInputs??=[],t.initialInputs.push(s)}function SM(t,e,n,r,i){t.data[r]=i;let o=i.factory||(i.factory=Xn(i.type,!0)),s=new Hs(o,Br(i),Zs,null);t.blueprint[r]=s,n[r]=s,AM(t,e,r,tT(t,n,i.hostVars,Wt),i)}function AM(t,e,n,r,i){let o=i.hostBindings;if(o){let s=t.hostBindingOpCodes;s===null&&(s=t.hostBindingOpCodes=[]);let c=~e.index;RM(s)!=c&&s.push(c),s.push(n,r,o)}}function RM(t){let e=t.length;for(;e>0;){let n=t[--e];if(typeof n=="number"&&n<0)return n}return 0}function NM(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;Br(e)&&(n[""]=t)}}function MM(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function NT(t,e,n,r,i,o,s,c){let u=e[q],l=u.consts,h=on(l,s),p=al(u,t,n,r,h);return o&&wM(u,e,p,on(l,c),i),p.mergedAttrs=Ju(p.mergedAttrs,p.attrs),p.attrs!==null&&Bu(p,p.attrs,!1),p.mergedAttrs!==null&&Bu(p,p.mergedAttrs,!0),u.queries!==null&&u.queries.elementStart(u,p),p}function MT(t,e){FR(t,e),Qf(e)&&t.queries.elementEnd(e)}function PM(t,e,n,r,i,o){let s=e.consts,c=on(s,i),u=al(e,t,n,r,c);if(u.mergedAttrs=Ju(u.mergedAttrs,u.attrs),o!=null){let l=on(s,o);u.localNames=[];for(let h=0;h<l.length;h+=2)u.localNames.push(l[h],-1)}return u.attrs!==null&&Bu(u,u.attrs,!1),u.mergedAttrs!==null&&Bu(u,u.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,u),u}function xM(t,e,n){return t[e]=n}function Js(t,e,n){if(n===Wt)return!1;let r=t[e];return Object.is(r,n)?!1:(t[e]=n,!0)}function kM(t,e,n){return function r(i){let o=Ur(t)?rn(t.index,e):e;fg(o,5);let s=e[be],c=lw(e,s,n,i),u=r.__ngNextListenerFn__;for(;u;)c=lw(e,s,u,i)&&c,u=u.__ngNextListenerFn__;return c}}function lw(t,e,n,r){let i=H(null);try{return pe(ae.OutputStart,e,n),n(r)!==!1}catch(o){return JN(t,o),!1}finally{pe(ae.OutputEnd,e,n),H(i)}}function OM(t,e,n,r,i,o,s,c){let u=_u(t),l=!1,h=null;if(!r&&u&&(h=FM(e,n,o,t.index)),h!==null){let p=h.__ngLastListenerFn__||h;p.__ngNextListenerFn__=s,h.__ngLastListenerFn__=s,l=!0}else{let p=An(t,n),m=r?r(p):p;aN(n,m,o,c);let y=i.listen(m,o,c);if(!LM(o)){let C=r?A=>r(Pt(A[t.index])):t.index;VM(C,e,n,o,c,y,!1)}}return l}function LM(t){return t.startsWith("animation")||t.startsWith("transition")}function FM(t,e,n,r){let i=t.cleanup;if(i!=null)for(let o=0;o<i.length-1;o+=2){let s=i[o];if(s===n&&i[o+1]===r){let c=e[qi],u=i[o+2];return c&&c.length>u?c[u]:null}typeof s=="string"&&(o+=2)}return null}function VM(t,e,n,r,i,o,s){let c=e.firstCreatePass?bI(e):null,u=DI(n),l=u.length;u.push(i,o),c&&c.push(r,t,l,(l+1)*(s?-1:1))}var jp=Symbol("BINDING");var $u=class extends Ys{ngModule;constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let n=tr(e);return new to(n,this.ngModule)}};function jM(t){return Object.keys(t).map(e=>{let[n,r,i]=t[e],o={propName:n,templateName:e,isSignal:(r&rl.SignalBased)!==0};return i&&(o.transform=i),o})}function UM(t){return Object.keys(t).map(e=>({propName:t[e],templateName:e}))}function BM(t,e,n){let r=e instanceof Oe?e:e?.injector;return r&&t.getStandaloneInjector!==null&&(r=t.getStandaloneInjector(r)||r),r?new Vp(n,r):n}function $M(t){let e=t.get(Gr,null);if(e===null)throw new V(407,!1);let n=t.get(AT,null),r=t.get(Mr,null);return{rendererFactory:e,sanitizer:n,changeDetectionScheduler:r,ngReflect:!1}}function HM(t,e){let n=PT(t);return Kw(e,n,n==="svg"?Yf:n==="math"?_I:null)}function PT(t){return(t.selectors[0][0]||"div").toLowerCase()}var to=class extends cl{componentDef;ngModule;selector;componentType;ngContentSelectors;isBoundToModule;cachedInputs=null;cachedOutputs=null;get inputs(){return this.cachedInputs??=jM(this.componentDef.inputs),this.cachedInputs}get outputs(){return this.cachedOutputs??=UM(this.componentDef.outputs),this.cachedOutputs}constructor(e,n){super(),this.componentDef=e,this.ngModule=n,this.componentType=e.type,this.selector=wN(e.selectors),this.ngContentSelectors=e.ngContentSelectors??[],this.isBoundToModule=!!n}create(e,n,r,i,o,s){pe(ae.DynamicComponentStart);let c=H(null);try{let u=this.componentDef,l=zM(r,u,s,o),h=BM(u,i||this.ngModule,e),p=$M(h),m=p.rendererFactory.createRenderer(null,u),y=r?zN(m,r,u.encapsulation,h):HM(u,m),C=s?.some(dw)||o?.some(k=>typeof k!="function"&&k.bindings.some(dw)),A=rg(null,l,null,512|eT(u),null,null,p,m,h,null,zw(y,h,!0));A[Fe]=y,bu(A);let R=null;try{let k=NT(Fe,A,2,"#host",()=>l.directiveRegistry,!0,0);Zw(m,y,k),eo(y,A),uT(l,A,k),Gw(l,k,A),MT(l,k),n!==void 0&&GM(k,this.ngContentSelectors,n),R=rn(k.index,A),A[be]=R[be],dg(l,A,null)}catch(k){throw R!==null&&Np(R),Np(A),k}finally{pe(ae.DynamicComponentEnd),Cu()}return new Hu(this.componentType,A,!!C)}finally{H(c)}}};function zM(t,e,n,r){let i=t?["ng-version","21.0.6"]:TN(e.selectors[0]),o=null,s=null,c=0;if(n)for(let h of n)c+=h[jp].requiredVars,h.create&&(h.targetIdx=0,(o??=[]).push(h)),h.update&&(h.targetIdx=0,(s??=[]).push(h));if(r)for(let h=0;h<r.length;h++){let p=r[h];if(typeof p!="function")for(let m of p.bindings){c+=m[jp].requiredVars;let y=h+1;m.create&&(m.targetIdx=y,(o??=[]).push(m)),m.update&&(m.targetIdx=y,(s??=[]).push(m))}}let u=[e];if(r)for(let h of r){let p=typeof h=="function"?h:h.type,m=Ff(p);u.push(m)}return ng(0,null,qM(o,s),1,c,u,null,null,null,[i],null)}function qM(t,e){return!t&&!e?null:n=>{if(n&1&&t)for(let r of t)r.create();if(n&2&&e)for(let r of e)r.update()}}function dw(t){let e=t[jp].kind;return e==="input"||e==="twoWay"}var Hu=class extends ST{_rootLView;_hasInputBindings;instance;hostView;changeDetectorRef;componentType;location;previousInputValues=null;_tNode;constructor(e,n,r){super(),this._rootLView=n,this._hasInputBindings=r,this._tNode=Eu(n[q],Fe),this.location=Yp(this._tNode,n),this.instance=rn(this._tNode.index,n)[be],this.hostView=this.changeDetectorRef=new qr(n,void 0),this.componentType=e}setInput(e,n){this._hasInputBindings;let r=this._tNode;if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),n))return;let i=this._rootLView,o=hT(r,i[q],i,e,n);this.previousInputValues.set(e,n);let s=rn(r.index,i);fg(s,1)}get injector(){return new Hr(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function GM(t,e,n){let r=t.projection=[];for(let i=0;i<e.length;i++){let o=n[i];r.push(o!=null&&o.length?Array.from(o):null)}}var Xs=(()=>{class t{static __NG_ELEMENT_ID__=WM}return t})();function WM(){let t=an();return QM(t,_e())}var KM=Xs,xT=class extends KM{_lContainer;_hostTNode;_hostLView;constructor(e,n,r){super(),this._lContainer=e,this._hostTNode=n,this._hostLView=r}get element(){return Yp(this._hostTNode,this._hostLView)}get injector(){return new Hr(this._hostTNode,this._hostLView)}get parentInjector(){let e=Qp(this._hostTNode,this._hostLView);if(bw(e)){let n=Vu(e,this._hostLView),r=Fu(e),i=n[q].data[r+8];return new Hr(i,n)}else return new Hr(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let n=hw(this._lContainer);return n!==null&&n[e]||null}get length(){return this._lContainer.length-Ce}createEmbeddedView(e,n,r){let i,o;typeof r=="number"?i=r:r!=null&&(i=r.index,o=r.injector);let s=Lp(this._lContainer,e.ssrId),c=e.createEmbeddedViewImpl(n||{},o,s);return this.insertImpl(c,i,zs(this._hostTNode,s)),c}createComponent(e,n,r,i,o,s,c){let u=e&&!PR(e),l;if(u)l=n;else{let R=n||{};l=R.index,r=R.injector,i=R.projectableNodes,o=R.environmentInjector||R.ngModuleRef,s=R.directives,c=R.bindings}let h=u?e:new to(tr(e)),p=r||this.parentInjector;if(!o&&h.ngModule==null){let k=(u?p:this.parentInjector).get(Oe,null);k&&(o=k)}let m=tr(h.componentType??{}),y=Lp(this._lContainer,m?.id??null),C=y?.firstChild??null,A=h.create(p,i,C,o,s,c);return this.insertImpl(A.hostView,l,zs(this._hostTNode,y)),A}insert(e,n){return this.insertImpl(e,n,!0)}insertImpl(e,n,r){let i=e._lView;if(II(i)){let c=this.indexOf(e);if(c!==-1)this.detach(c);else{let u=i[Be],l=new xT(u,u[Mt],u[Be]);l.detach(l.indexOf(e))}}let o=this._adjustIndex(n),s=this._lContainer;return sl(s,i,o,r),e.attachToViewContainerRef(),Bf(Tp(s),o,e),e}move(e,n){return this.insert(e,n)}indexOf(e){let n=hw(this._lContainer);return n!==null?n.indexOf(e):-1}remove(e){let n=this._adjustIndex(e,-1),r=Gs(this._lContainer,n);r&&(Ms(Tp(this._lContainer),n),il(r[q],r))}detach(e){let n=this._adjustIndex(e,-1),r=Gs(this._lContainer,n);return r&&Ms(Tp(this._lContainer),n)!=null?new qr(r):null}_adjustIndex(e,n=0){return e??this.length+n}};function hw(t){return t[Ls]}function Tp(t){return t[Ls]||(t[Ls]=[])}function QM(t,e){let n,r=e[t.index];return Ht(r)?n=r:(n=wT(r,e,null,t),e[t.index]=n,ig(e,n)),ZM(n,e,t,r),new xT(n,t,e)}function YM(t,e){let n=t[$e],r=n.createComment(""),i=An(e,t),o=n.parentNode(i);return Uu(n,o,r,n.nextSibling(i),!1),r}var ZM=eP,JM=()=>!1;function XM(t,e,n){return JM(t,e,n)}function eP(t,e,n,r){if(t[nr])return;let i;n.type&8?i=Pt(r):i=YM(e,n),t[nr]=i}var Wr=class{},ul=class{};var zu=class extends Wr{ngModuleType;_parent;_bootstrapComponents=[];_r3Injector;instance;destroyCbs=[];componentFactoryResolver=new $u(this);constructor(e,n,r,i=!0){super(),this.ngModuleType=e,this._parent=n;let o=Lf(e);this._bootstrapComponents=Jw(o.bootstrap),this._r3Injector=hp(e,n,[{provide:Wr,useValue:this},{provide:Ys,useValue:this.componentFactoryResolver},...r],Jn(e),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},qu=class extends ul{moduleType;constructor(e){super(),this.moduleType=e}create(e){return new zu(this.moduleType,e,[])}};var Ws=class extends Wr{injector;componentFactoryResolver=new $u(this);instance=null;constructor(e){super();let n=new Nr([...e.providers,{provide:Wr,useValue:this},{provide:Ys,useValue:this.componentFactoryResolver}],e.parent||xs(),e.debugName,new Set(["environment"]));this.injector=n,e.runEnvironmentInitializers&&n.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function ea(t,e,n=null){return new Ws({providers:t,parent:e,debugName:n,runEnvironmentInitializers:!0}).injector}var tP=(()=>{class t{_injector;cachedInjectors=new Map;constructor(n){this._injector=n}getOrCreateStandaloneInjector(n){if(!n.standalone)return null;if(!this.cachedInjectors.has(n)){let r=zf(!1,n.type),i=r.length>0?ea([r],this._injector,""):null;this.cachedInjectors.set(n,i)}return this.cachedInjectors.get(n)}ngOnDestroy(){try{for(let n of this.cachedInjectors.values())n!==null&&n.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=j({token:t,providedIn:"environment",factory:()=>new t(z(Oe))})}return t})();function Zr(t){return ro(()=>{let e=kT(t),n=ve(L({},e),{decls:t.decls,vars:t.vars,template:t.template,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,onPush:t.changeDetection===Jp.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&t.dependencies||null,getStandaloneInjector:e.standalone?i=>i.get(tP).getOrCreateStandaloneInjector(n):null,getExternalStyles:null,signals:t.signals??!1,data:t.data||{},encapsulation:t.encapsulation||Gt.Emulated,styles:t.styles||vt,_:null,schemas:t.schemas||null,tView:null,id:""});e.standalone&&Yr("NgStandalone"),OT(n);let r=t.dependencies;return n.directiveDefs=fw(r,nP),n.pipeDefs=fw(r,oI),n.id=oP(n),n})}function nP(t){return tr(t)||Ff(t)}function ta(t){return ro(()=>({type:t.type,bootstrap:t.bootstrap||vt,declarations:t.declarations||vt,imports:t.imports||vt,exports:t.exports||vt,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function rP(t,e){if(t==null)return xr;let n={};for(let r in t)if(t.hasOwnProperty(r)){let i=t[r],o,s,c,u;Array.isArray(i)?(c=i[0],o=i[1],s=i[2]??o,u=i[3]||null):(o=i,s=i,c=rl.None,u=null),n[o]=[r,c,u],e[o]=s}return n}function iP(t){if(t==null)return xr;let e={};for(let n in t)t.hasOwnProperty(n)&&(e[t[n]]=n);return e}function ll(t){return ro(()=>{let e=kT(t);return OT(e),e})}function pg(t){return{type:t.type,name:t.name,factory:null,pure:t.pure!==!1,standalone:t.standalone??!0,onDestroy:t.type.prototype.ngOnDestroy||null}}function kT(t){let e={};return{type:t.type,providersResolver:null,viewProvidersResolver:null,factory:null,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputConfig:t.inputs||xr,exportAs:t.exportAs||null,standalone:t.standalone??!0,signals:t.signals===!0,selectors:t.selectors||vt,viewQuery:t.viewQuery||null,features:t.features||null,setInput:null,resolveHostDirectives:null,hostDirectives:null,inputs:rP(t.inputs,e),outputs:iP(t.outputs),debugInfo:null}}function OT(t){t.features?.forEach(e=>e(t))}function fw(t,e){return t?()=>{let n=typeof t=="function"?t():t,r=[];for(let i of n){let o=e(i);o!==null&&r.push(o)}return r}:null}function oP(t){let e=0,n=typeof t.consts=="function"?"":t.consts,r=[t.selectors,t.ngContentSelectors,t.hostVars,t.hostAttrs,n,t.vars,t.decls,t.encapsulation,t.standalone,t.signals,t.exportAs,JSON.stringify(t.inputs),JSON.stringify(t.outputs),Object.getOwnPropertyNames(t.type.prototype),!!t.contentQueries,!!t.viewQuery];for(let o of r.join("|"))e=Math.imul(31,e)+o.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function sP(t,e,n,r,i,o,s,c){if(n.firstCreatePass){t.mergedAttrs=Ju(t.mergedAttrs,t.attrs);let h=t.tView=ng(2,t,i,o,s,n.directiveRegistry,n.pipeRegistry,null,n.schemas,n.consts,null);n.queries!==null&&(n.queries.template(n,t),h.queries=n.queries.embeddedTView(t))}c&&(t.flags|=c),Yi(t,!1);let u=aP(n,e,t,r);Ru()&&cg(n,e,u,t),eo(u,e);let l=wT(u,e,u,t);e[r+Fe]=l,ig(e,l),XM(l,t,e)}function Gu(t,e,n,r,i,o,s,c,u,l,h){let p=n+Fe,m;if(e.firstCreatePass){if(m=al(e,p,4,s||null,c||null),l!=null){let y=on(e.consts,l);m.localNames=[];for(let C=0;C<y.length;C+=2)m.localNames.push(y[C],-1)}}else m=e.data[p];return sP(m,t,e,n,r,i,o,u),l!=null&&lg(t,m,h),m}var aP=cP;function cP(t,e,n,r){return Nu(!0),e[$e].createComment("")}var gg=(()=>{class t{log(n){console.log(n)}warn(n){console.warn(n)}static \u0275fac=function(r){return new(r||t)};static \u0275prov=j({token:t,factory:t.\u0275fac,providedIn:"platform"})}return t})();var mg=new U("");function Jr(t){return!!t&&typeof t.then=="function"}function dl(t){return!!t&&typeof t.subscribe=="function"}var LT=new U("");var yg=(()=>{class t{resolve;reject;initialized=!1;done=!1;donePromise=new Promise((n,r)=>{this.resolve=n,this.reject=r});appInits=M(LT,{optional:!0})??[];injector=M(tt);constructor(){}runInitializers(){if(this.initialized)return;let n=[];for(let i of this.appInits){let o=Le(this.injector,i);if(Jr(o))n.push(o);else if(dl(o)){let s=new Promise((c,u)=>{o.subscribe({complete:c,error:u})});n.push(s)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(n).then(()=>{r()}).catch(i=>{this.reject(i)}),n.length===0&&r(),this.initialized=!0}static \u0275fac=function(r){return new(r||t)};static \u0275prov=j({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),hl=new U("");function FT(){Gh(()=>{let t="";throw new V(600,t)})}function VT(t){return t.isBoundToModule}var uP=10;var io=(()=>{class t{_runningTick=!1;_destroyed=!1;_destroyListeners=[];_views=[];internalErrorHandler=M(Tt);afterRenderManager=M(rT);zonelessEnabled=M(Us);rootEffectScheduler=M(_p);dirtyFlags=0;tracingSnapshot=null;allTestViews=new Set;autoDetectTestViews=new Set;includeAllTestViews=!1;afterTick=new et;get allViews(){return[...(this.includeAllTestViews?this.allTestViews:this.autoDetectTestViews).keys(),...this._views]}get destroyed(){return this._destroyed}componentTypes=[];components=[];internalPendingTask=M(Rn);get isStable(){return this.internalPendingTask.hasPendingTasksObservable.pipe(ye(n=>!n))}constructor(){M(Qs,{optional:!0})}whenStable(){let n;return new Promise(r=>{n=this.isStable.subscribe({next:i=>{i&&r()}})}).finally(()=>{n.unsubscribe()})}_injector=M(Oe);_rendererFactory=null;get injector(){return this._injector}bootstrap(n,r){return this.bootstrapImpl(n,r)}bootstrapImpl(n,r,i=tt.NULL){return this._injector.get(De).run(()=>{pe(ae.BootstrapComponentStart);let s=n instanceof cl;if(!this._injector.get(yg).done){let C="";throw new V(405,C)}let u;s?u=n:u=this._injector.get(Ys).resolveComponentFactory(n),this.componentTypes.push(u.componentType);let l=VT(u)?void 0:this._injector.get(Wr),h=r||u.selector,p=u.create(i,[],h,l),m=p.location.nativeElement,y=p.injector.get(mg,null);return y?.registerApplication(m),p.onDestroy(()=>{this.detachView(p.hostView),$s(this.components,p),y?.unregisterApplication(m)}),this._loadComponent(p),pe(ae.BootstrapComponentEnd,p),p})}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){pe(ae.ChangeDetectionStart),this.tracingSnapshot!==null?this.tracingSnapshot.run(sg.CHANGE_DETECTION,this.tickImpl):this.tickImpl()}tickImpl=()=>{if(this._runningTick)throw pe(ae.ChangeDetectionEnd),new V(101,!1);let n=H(null);try{this._runningTick=!0,this.synchronize()}finally{this._runningTick=!1,this.tracingSnapshot?.dispose(),this.tracingSnapshot=null,H(n),this.afterTick.next(),pe(ae.ChangeDetectionEnd)}};synchronize(){this._rendererFactory===null&&!this._injector.destroyed&&(this._rendererFactory=this._injector.get(Gr,null,{optional:!0}));let n=0;for(;this.dirtyFlags!==0&&n++<uP;){pe(ae.ChangeDetectionSyncStart);try{this.synchronizeOnce()}finally{pe(ae.ChangeDetectionSyncEnd)}}}synchronizeOnce(){this.dirtyFlags&16&&(this.dirtyFlags&=-17,this.rootEffectScheduler.flush());let n=!1;if(this.dirtyFlags&7){let r=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8;for(let{_lView:i}of this.allViews){if(!r&&!Vs(i))continue;let o=r&&!this.zonelessEnabled?0:1;vT(i,o),n=!0}if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&23)return}n||(this._rendererFactory?.begin?.(),this._rendererFactory?.end?.()),this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:n})=>Vs(n))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(n){let r=n;this._views.push(r),r.attachToAppRef(this)}detachView(n){let r=n;$s(this._views,r),r.detachFromAppRef()}_loadComponent(n){this.attachView(n.hostView);try{this.tick()}catch(i){this.internalErrorHandler(i)}this.components.push(n),this._injector.get(hl,[]).forEach(i=>i(n))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(n=>n()),this._views.slice().forEach(n=>n.destroy())}finally{this._destroyed=!0,this._views=[],this._destroyListeners=[]}}onDestroy(n){return this._destroyListeners.push(n),()=>$s(this._destroyListeners,n)}destroy(){if(this._destroyed)throw new V(406,!1);let n=this._injector;n.destroy&&!n.destroyed&&n.destroy()}get viewCount(){return this._views.length}static \u0275fac=function(r){return new(r||t)};static \u0275prov=j({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function $s(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}var $q=typeof document<"u"&&typeof document?.documentElement?.getAnimations=="function";var Up=class{destroy(e){}updateValue(e,n){}swap(e,n){let r=Math.min(e,n),i=Math.max(e,n),o=this.detach(i);if(i-r>1){let s=this.detach(r);this.attach(r,o),this.attach(i,s)}else this.attach(r,o)}move(e,n){this.attach(n,this.detach(e))}};function Dp(t,e,n,r,i){return t===n&&Object.is(e,r)?1:Object.is(i(t,e),i(n,r))?-1:0}function lP(t,e,n,r){let i,o,s=0,c=t.length-1,u=void 0;if(Array.isArray(e)){H(r);let l=e.length-1;for(H(null);s<=c&&s<=l;){let h=t.at(s),p=e[s],m=Dp(s,h,s,p,n);if(m!==0){m<0&&t.updateValue(s,p),s++;continue}let y=t.at(c),C=e[l],A=Dp(c,y,l,C,n);if(A!==0){A<0&&t.updateValue(c,C),c--,l--;continue}let R=n(s,h),k=n(c,y),$=n(s,p);if(Object.is($,k)){let Q=n(l,C);Object.is(Q,R)?(t.swap(s,c),t.updateValue(c,C),l--,c--):t.move(c,s),t.updateValue(s,p),s++;continue}if(i??=new Wu,o??=gw(t,s,c,n),Bp(t,i,s,$))t.updateValue(s,p),s++,c++;else if(o.has($))i.set(R,t.detach(s)),c--;else{let Q=t.create(s,e[s]);t.attach(s,Q),s++,c++}}for(;s<=l;)pw(t,i,n,s,e[s]),s++}else if(e!=null){H(r);let l=e[Symbol.iterator]();H(null);let h=l.next();for(;!h.done&&s<=c;){let p=t.at(s),m=h.value,y=Dp(s,p,s,m,n);if(y!==0)y<0&&t.updateValue(s,m),s++,h=l.next();else{i??=new Wu,o??=gw(t,s,c,n);let C=n(s,m);if(Bp(t,i,s,C))t.updateValue(s,m),s++,c++,h=l.next();else if(!o.has(C))t.attach(s,t.create(s,m)),s++,c++,h=l.next();else{let A=n(s,p);i.set(A,t.detach(s)),c--}}}for(;!h.done;)pw(t,i,n,t.length,h.value),h=l.next()}for(;s<=c;)t.destroy(t.detach(c--));i?.forEach(l=>{t.destroy(l)})}function Bp(t,e,n,r){return e!==void 0&&e.has(r)?(t.attach(n,e.get(r)),e.delete(r),!0):!1}function pw(t,e,n,r,i){if(Bp(t,e,r,n(r,i)))t.updateValue(r,i);else{let o=t.create(r,i);t.attach(r,o)}}function gw(t,e,n,r){let i=new Set;for(let o=e;o<=n;o++)i.add(r(o,t.at(o)));return i}var Wu=class{kvMap=new Map;_vMap=void 0;has(e){return this.kvMap.has(e)}delete(e){if(!this.has(e))return!1;let n=this.kvMap.get(e);return this._vMap!==void 0&&this._vMap.has(n)?(this.kvMap.set(e,this._vMap.get(n)),this._vMap.delete(n)):this.kvMap.delete(e),!0}get(e){return this.kvMap.get(e)}set(e,n){if(this.kvMap.has(e)){let r=this.kvMap.get(e);this._vMap===void 0&&(this._vMap=new Map);let i=this._vMap;for(;i.has(r);)r=i.get(r);i.set(r,n)}else this.kvMap.set(e,n)}forEach(e){for(let[n,r]of this.kvMap)if(e(r,n),this._vMap!==void 0){let i=this._vMap;for(;i.has(r);)r=i.get(r),e(r,n)}}};function fl(t,e,n,r,i,o,s,c){Yr("NgControlFlow");let u=_e(),l=sn(),h=on(l.consts,o);return Gu(u,l,t,e,n,r,i,h,256,s,c),vg}function vg(t,e,n,r,i,o,s,c){Yr("NgControlFlow");let u=_e(),l=sn(),h=on(l.consts,o);return Gu(u,l,t,e,n,r,i,h,512,s,c),vg}function pl(t,e){Yr("NgControlFlow");let n=_e(),r=Tu(),i=n[r]!==Wt?n[r]:-1,o=i!==-1?Ku(n,Fe+i):void 0,s=0;if(Js(n,r,t)){let c=H(null);try{if(o!==void 0&&DT(o,s),t!==-1){let u=Fe+t,l=Ku(n,u),h=qp(n[q],u),p=CT(l,h,n),m=hg(n,h,e,{dehydratedView:p});sl(l,m,s,zs(h,p))}}finally{H(c)}}else if(o!==void 0){let c=TT(o,s);c!==void 0&&(c[be]=e)}}var $p=class{lContainer;$implicit;$index;constructor(e,n,r){this.lContainer=e,this.$implicit=n,this.$index=r}get $count(){return this.lContainer.length-Ce}};var Hp=class{hasEmptyBlock;trackByFn;liveCollection;constructor(e,n,r){this.hasEmptyBlock=e,this.trackByFn=n,this.liveCollection=r}};function na(t,e,n,r,i,o,s,c,u,l,h,p,m){Yr("NgControlFlow");let y=_e(),C=sn(),A=u!==void 0,R=_e(),k=c?s.bind(R[It][be]):s,$=new Hp(A,k);R[Fe+t]=$,Gu(y,C,t+1,e,n,r,i,on(C.consts,o),256),A&&Gu(y,C,t+2,u,l,h,p,on(C.consts,m),512)}var zp=class extends Up{lContainer;hostLView;templateTNode;operationsCounter=void 0;needsIndexUpdate=!1;constructor(e,n,r){super(),this.lContainer=e,this.hostLView=n,this.templateTNode=r}get length(){return this.lContainer.length-Ce}at(e){return this.getLView(e)[be].$implicit}attach(e,n){let r=n[zi];this.needsIndexUpdate||=e!==this.length,sl(this.lContainer,n,e,zs(this.templateTNode,r)),dP(this.lContainer,e)}detach(e){return this.needsIndexUpdate||=e!==this.length-1,hP(this.lContainer,e),fP(this.lContainer,e)}create(e,n){let r=Lp(this.lContainer,this.templateTNode.tView.ssrId);return hg(this.hostLView,this.templateTNode,new $p(this.lContainer,n,e),{dehydratedView:r})}destroy(e){il(e[q],e)}updateValue(e,n){this.getLView(e)[be].$implicit=n}reset(){this.needsIndexUpdate=!1}updateIndexes(){if(this.needsIndexUpdate)for(let e=0;e<this.length;e++)this.getLView(e)[be].$index=e}getLView(e){return pP(this.lContainer,e)}};function ra(t){let e=H(null),n=rr();try{let r=_e(),i=r[q],o=r[n],s=n+1,c=Ku(r,s);if(o.liveCollection===void 0){let l=qp(i,s);o.liveCollection=new zp(c,r,l)}else o.liveCollection.reset();let u=o.liveCollection;if(lP(u,t,o.trackByFn,e),u.updateIndexes(),o.hasEmptyBlock){let l=Tu(),h=u.length===0;if(Js(r,l,h)){let p=n+2,m=Ku(r,p);if(h){let y=qp(i,p),C=CT(m,y,r),A=hg(r,y,void 0,{dehydratedView:C});sl(m,A,0,zs(y,C))}else i.firstUpdatePass&&vM(m),DT(m,0)}}}finally{H(e)}}function Ku(t,e){return t[e]}function dP(t,e){if(t.length<=Ce)return;let n=Ce+e,r=t[n],i=r?r[jr]:void 0;if(r&&i&&i.detachedLeaveAnimationFns&&i.detachedLeaveAnimationFns.length>0){let o=r[bn];AN(o,i),zr.delete(r),i.detachedLeaveAnimationFns=void 0}}function hP(t,e){if(t.length<=Ce)return;let n=Ce+e,r=t[n],i=r?r[jr]:void 0;i&&i.leave&&i.leave.size>0&&(i.detachedLeaveAnimationFns=[])}function fP(t,e){return Gs(t,e)}function pP(t,e){return TT(t,e)}function qp(t,e){return Eu(t,e)}function Gp(t,e,n,r,i){hT(e,t,n,i?"class":"style",r)}function _g(t,e,n,r){let i=_e(),o=i[q],s=t+Fe,c=o.firstCreatePass?NT(s,i,2,e,YN,AI(),n,r):o.data[s];if(lT(c,i,t,e,jT),_u(c)){let u=i[q];uT(u,i,c),Gw(u,c,i)}return r!=null&&lg(i,c),_g}function Eg(){let t=sn(),e=an(),n=dT(e);return t.firstCreatePass&&MT(t,n),rp(n)&&ip(),np(),n.classesWithoutHost!=null&&jR(n)&&Gp(t,n,_e(),n.classesWithoutHost,!0),n.stylesWithoutHost!=null&&UR(n)&&Gp(t,n,_e(),n.stylesWithoutHost,!1),Eg}function oo(t,e,n,r){return _g(t,e,n,r),Eg(),oo}function He(t,e,n,r){let i=_e(),o=i[q],s=t+Fe,c=o.firstCreatePass?PM(s,o,2,e,n,r):o.data[s];return lT(c,i,t,e,jT),r!=null&&lg(i,c),He}function nt(){let t=an(),e=dT(t);return rp(e)&&ip(),np(),nt}function ia(t,e,n,r){return He(t,e,n,r),nt(),ia}var jT=(t,e,n,r,i)=>(Nu(!0),Kw(e[$e],r,HI()));function oa(){return _e()}var sa="en-US";var gP=sa;function UT(t){typeof t=="string"&&(gP=t.toLowerCase().replace(/_/g,"-"))}function so(t,e,n){let r=_e(),i=sn(),o=an();return(o.type&3||n)&&OM(o,i,r,n,r[$e],t,e,kM(o,r,e)),so}function Mn(t=1){return $I(t)}function Pu(t,e){return t<<17|e<<2}function Kr(t){return t>>17&32767}function mP(t){return(t&2)==2}function yP(t,e){return t&131071|e<<17}function Wp(t){return t|2}function no(t){return(t&131068)>>2}function bp(t,e){return t&-131069|e<<2}function vP(t){return(t&1)===1}function Kp(t){return t|1}function _P(t,e,n,r,i,o){let s=o?e.classBindings:e.styleBindings,c=Kr(s),u=no(s);t[r]=n;let l=!1,h;if(Array.isArray(n)){let p=n;h=p[1],(h===null||Hi(p,h)>0)&&(l=!0)}else h=n;if(i)if(u!==0){let m=Kr(t[c+1]);t[r+1]=Pu(m,c),m!==0&&(t[m+1]=bp(t[m+1],r)),t[c+1]=yP(t[c+1],r)}else t[r+1]=Pu(c,0),c!==0&&(t[c+1]=bp(t[c+1],r)),c=r;else t[r+1]=Pu(u,0),c===0?c=r:t[u+1]=bp(t[u+1],r),u=r;l&&(t[r+1]=Wp(t[r+1])),mw(t,h,r,!0),mw(t,h,r,!1),EP(e,h,t,r,o),s=Pu(c,u),o?e.classBindings=s:e.styleBindings=s}function EP(t,e,n,r,i){let o=i?t.residualClasses:t.residualStyles;o!=null&&typeof e=="string"&&Hi(o,e)>=0&&(n[r+1]=Kp(n[r+1]))}function mw(t,e,n,r){let i=t[n+1],o=e===null,s=r?Kr(i):no(i),c=!1;for(;s!==0&&(c===!1||o);){let u=t[s],l=t[s+1];IP(u,e)&&(c=!0,t[s+1]=r?Kp(l):Wp(l)),s=r?Kr(l):no(l)}c&&(t[n+1]=r?Wp(i):Kp(i))}function IP(t,e){return t===null||e==null||(Array.isArray(t)?t[1]:t)===e?!0:Array.isArray(t)&&typeof e=="string"?Hi(t,e)>=0:!1}var qt={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function wP(t){return t.substring(qt.key,qt.keyEnd)}function TP(t){return DP(t),BT(t,$T(t,0,qt.textEnd))}function BT(t,e){let n=qt.textEnd;return n===e?-1:(e=qt.keyEnd=bP(t,qt.key=e,n),$T(t,e,n))}function DP(t){qt.key=0,qt.keyEnd=0,qt.value=0,qt.valueEnd=0,qt.textEnd=t.length}function $T(t,e,n){for(;e<n&&t.charCodeAt(e)<=32;)e++;return e}function bP(t,e,n){for(;e<n&&t.charCodeAt(e)>32;)e++;return e}function Ig(t){SP(kP,CP,t,!0)}function CP(t,e){for(let n=TP(e);n>=0;n=BT(e,n))gu(t,wP(e),!0)}function SP(t,e,n,r){let i=sn(),o=kI(2);i.firstUpdatePass&&AP(i,null,o,r);let s=_e();if(n!==Wt&&Js(s,o,n)){let c=i.data[rr()];if(zT(c,r)&&!HT(i,o)){let u=r?c.classesWithoutHost:c.stylesWithoutHost;u!==null&&(n=uu(u,n||"")),Gp(i,c,s,n,r)}else OP(i,c,s,s[$e],s[o+1],s[o+1]=xP(t,e,n),r,o)}}function HT(t,e){return e>=t.expandoStartIndex}function AP(t,e,n,r){let i=t.data;if(i[n+1]===null){let o=i[rr()],s=HT(t,n);zT(o,r)&&e===null&&!s&&(e=!1),e=RP(i,o,e,r),_P(i,o,e,n,s,r)}}function RP(t,e,n,r){let i=VI(t),o=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(n=Cp(null,t,e,n,r),n=Ks(n,e.attrs,r),o=null);else{let s=e.directiveStylingLast;if(s===-1||t[s]!==i)if(n=Cp(i,t,e,n,r),o===null){let u=NP(t,e,r);u!==void 0&&Array.isArray(u)&&(u=Cp(null,t,e,u[1],r),u=Ks(u,e.attrs,r),MP(t,e,r,u))}else o=PP(t,e,r)}return o!==void 0&&(r?e.residualClasses=o:e.residualStyles=o),n}function NP(t,e,n){let r=n?e.classBindings:e.styleBindings;if(no(r)!==0)return t[Kr(r)]}function MP(t,e,n,r){let i=n?e.classBindings:e.styleBindings;t[Kr(i)]=r}function PP(t,e,n){let r,i=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<i;o++){let s=t[o].hostAttrs;r=Ks(r,s,n)}return Ks(r,e.attrs,n)}function Cp(t,e,n,r,i){let o=null,s=n.directiveEnd,c=n.directiveStylingLast;for(c===-1?c=n.directiveStart:c++;c<s&&(o=e[c],r=Ks(r,o.hostAttrs,i),o!==t);)c++;return t!==null&&(n.directiveStylingLast=c),r}function Ks(t,e,n){let r=n?1:2,i=-1;if(e!==null)for(let o=0;o<e.length;o++){let s=e[o];typeof s=="number"?i=s:i===r&&(Array.isArray(t)||(t=t===void 0?[]:["",t]),gu(t,s,n?!0:e[++o]))}return t===void 0?null:t}function xP(t,e,n){if(n==null||n==="")return vt;let r=[],i=Ww(n);if(Array.isArray(i))for(let o=0;o<i.length;o++)t(r,i[o],!0);else if(typeof i=="object")for(let o in i)i.hasOwnProperty(o)&&t(r,o,i[o]);else typeof i=="string"&&e(r,i);return r}function kP(t,e,n){let r=String(e);r!==""&&!r.includes(" ")&&gu(t,r,n)}function OP(t,e,n,r,i,o,s,c){i===Wt&&(i=vt);let u=0,l=0,h=0<i.length?i[0]:null,p=0<o.length?o[0]:null;for(;h!==null||p!==null;){let m=u<i.length?i[u+1]:void 0,y=l<o.length?o[l+1]:void 0,C=null,A;h===p?(u+=2,l+=2,m!==y&&(C=p,A=y)):p===null||h!==null&&h<p?(u+=2,C=h):(l+=2,C=p,A=y),C!==null&&LP(t,e,n,r,C,A,s,c),h=u<i.length?i[u]:null,p=l<o.length?o[l]:null}}function LP(t,e,n,r,i,o,s,c){if(!(e.type&3))return;let u=t.data,l=u[c+1],h=vP(l)?yw(u,e,n,i,no(l),s):void 0;if(!Qu(h)){Qu(o)||mP(l)&&(o=yw(u,null,n,i,c,s));let p=Zf(rr(),n);HN(r,s,p,i,o)}}function yw(t,e,n,r,i,o){let s=e===null,c;for(;i>0;){let u=t[i],l=Array.isArray(u),h=l?u[1]:u,p=h===null,m=n[i+1];m===Wt&&(m=p?vt:void 0);let y=p?mu(m,r):h===r?m:void 0;if(l&&!Qu(y)&&(y=mu(u,r)),Qu(y)&&(c=y,s))return c;let C=t[i+1];i=s?Kr(C):no(C)}if(e!==null){let u=o?e.residualClasses:e.residualStyles;u!=null&&(c=mu(u,r))}return c}function Qu(t){return t!==void 0}function zT(t,e){return(t.flags&(e?8:16))!==0}function Kt(t,e=""){let n=_e(),r=sn(),i=t+Fe,o=r.firstCreatePass?al(r,i,1,e,null):r.data[i],s=FP(r,n,o,e,t);n[i]=s,Ru()&&cg(r,n,s,o),Yi(o,!1)}var FP=(t,e,n,r,i)=>(Nu(!0),uN(e[$e],r));function VP(t,e,n,r=""){return Js(t,Tu(),n)?e+Vf(n)+r:Wt}function Xr(t){return sr("",t),Xr}function sr(t,e,n){let r=_e(),i=VP(r,t,e,n);return i!==Wt&&jP(r,rr(),i),sr}function jP(t,e,n){let r=Zf(e,t);lN(t[$e],r,n)}function UP(t,e){let n=t[e];return n===Wt?void 0:n}function BP(t,e,n,r,i,o){let s=e+n;return Js(t,s,i)?xM(t,s+1,o?r.call(o,i):r(i)):UP(t,s+1)}function gl(t,e){let n=sn(),r,i=t+Fe;n.firstCreatePass?(r=$P(e,n.pipeRegistry),n.data[i]=r,r.onDestroy&&(n.destroyHooks??=[]).push(i,r.onDestroy)):r=n.data[i];let o=r.factory||(r.factory=Xn(r.type,!0)),s,c=lt(Zs);try{let u=ju(!1),l=o();return ju(u),Jf(n,_e(),i,l),l}finally{lt(c)}}function $P(t,e){if(e)for(let n=e.length-1;n>=0;n--){let r=e[n];if(t===r.name)return r}}function ml(t,e,n){let r=t+Fe,i=_e(),o=EI(i,r);return HP(i,r)?BP(i,PI(),e,o.transform,n,o):o.transform(n)}function HP(t,e){return t[q].data[e].pure}var Yu=class{ngModuleFactory;componentFactories;constructor(e,n){this.ngModuleFactory=e,this.componentFactories=n}},wg=(()=>{class t{compileModuleSync(n){return new qu(n)}compileModuleAsync(n){return Promise.resolve(this.compileModuleSync(n))}compileModuleAndAllComponentsSync(n){let r=this.compileModuleSync(n),i=Lf(n),o=Jw(i.declarations).reduce((s,c)=>{let u=tr(c);return u&&s.push(new to(u)),s},[]);return new Yu(r,o)}compileModuleAndAllComponentsAsync(n){return Promise.resolve(this.compileModuleAndAllComponentsSync(n))}clearCache(){}clearCacheFor(n){}getModuleId(n){}static \u0275fac=function(r){return new(r||t)};static \u0275prov=j({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var qT=(()=>{class t{applicationErrorHandler=M(Tt);appRef=M(io);taskService=M(Rn);ngZone=M(De);zonelessEnabled=M(Us);tracing=M(Qs,{optional:!0});zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run;schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}];subscriptions=new xe;angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(As):null;scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(M(vp,{optional:!0})??!1);cancelScheduledCallback=null;useMicrotaskScheduler=!1;runningTick=!1;pendingRenderTaskId=null;constructor(){this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()}))}notify(n){if(!this.zonelessEnabled&&n===5)return;switch(n){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 6:{this.appRef.dirtyFlags|=2;break}case 12:{this.appRef.dirtyFlags|=16;break}case 13:{this.appRef.dirtyFlags|=2;break}case 11:break;case 9:case 8:case 7:case 10:default:this.appRef.dirtyFlags|=8}if(this.appRef.tracingSnapshot=this.tracing?.snapshot(this.appRef.tracingSnapshot)??null,!this.shouldScheduleTick())return;let r=this.useMicrotaskScheduler?pp:fp;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>r(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>r(()=>this.tick()))}shouldScheduleTick(){return!(this.appRef.destroyed||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(As+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;if(this.appRef.dirtyFlags===0){this.cleanup();return}!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let n=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){this.taskService.remove(n),this.applicationErrorHandler(r)}finally{this.cleanup()}this.useMicrotaskScheduler=!0,pp(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(n)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let n=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(n)}}static \u0275fac=function(r){return new(r||t)};static \u0275prov=j({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function GT(){return[{provide:Mr,useExisting:qT},{provide:De,useClass:Rs},{provide:Us,useValue:!0}]}function zP(){return typeof $localize<"u"&&$localize.locale||sa}var yl=new U("",{factory:()=>M(yl,{optional:!0,skipSelf:!0})||zP()});var QT=Symbol("InputSignalNode#UNSET"),ux=ve(L({},xc),{transformFn:void 0,applyValueToInputSignal(t,e){_s(t,e)}});function YT(t,e){let n=Object.create(ux);n.value=t,n.transformFn=e?.transform;function r(){if(Nc(n),n.value===QT){let i=null;throw new V(-950,i)}return n.value}return r[At]=n,r}function WT(t,e){return YT(t,e)}function lx(t){return YT(QT,t)}var ZT=(WT.required=lx,WT);var Tg=new U(""),dx=new U("");function aa(t){return!t.moduleRef}function hx(t){let e=aa(t)?t.r3Injector:t.moduleRef.injector,n=e.get(De);return n.run(()=>{aa(t)?t.r3Injector.resolveInjectorInitializers():t.moduleRef.resolveInjectorInitializers();let r=e.get(Tt),i;if(n.runOutsideAngular(()=>{i=n.onError.subscribe({next:r})}),aa(t)){let o=()=>e.destroy(),s=t.platformInjector.get(Tg);s.add(o),e.onDestroy(()=>{i.unsubscribe(),s.delete(o)})}else{let o=()=>t.moduleRef.destroy(),s=t.platformInjector.get(Tg);s.add(o),t.moduleRef.onDestroy(()=>{$s(t.allPlatformModules,t.moduleRef),i.unsubscribe(),s.delete(o)})}return px(r,n,()=>{let o=e.get(Rn),s=o.add(),c=e.get(yg);return c.runInitializers(),c.donePromise.then(()=>{let u=e.get(yl,sa);if(UT(u||sa),!e.get(dx,!0))return aa(t)?e.get(io):(t.allPlatformModules.push(t.moduleRef),t.moduleRef);if(aa(t)){let h=e.get(io);return t.rootComponent!==void 0&&h.bootstrap(t.rootComponent),h}else return fx?.(t.moduleRef,t.allPlatformModules),t.moduleRef}).finally(()=>void o.remove(s))})})}var fx;function px(t,e,n){try{let r=n();return Jr(r)?r.catch(i=>{throw e.runOutsideAngular(()=>t(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>t(r)),r}}var vl=null;function gx(t=[],e){return tt.create({name:e,providers:[{provide:Ps,useValue:"platform"},{provide:Tg,useValue:new Set([()=>vl=null])},...t]})}function mx(t=[]){if(vl)return vl;let e=gx(t);return vl=e,FT(),yx(e),e}function yx(t){let e=t.get(tl,null);Le(t,()=>{e?.forEach(n=>n())})}function Dg(){return!1}var _l=(()=>{class t{static __NG_ELEMENT_ID__=vx}return t})();function vx(t){return _x(an(),_e(),(t&16)===16)}function _x(t,e,n){if(Ur(t)&&!n){let r=rn(t.index,e);return new qr(r,r)}else if(t.type&175){let r=e[It];return new qr(r,e)}return null}function JT(t){let{rootComponent:e,appProviders:n,platformProviders:r,platformRef:i}=t;pe(ae.BootstrapApplicationStart);try{let o=i?.injector??mx(r),s=[GT(),WI,...n||[]],c=new Ws({providers:s,parent:o,debugName:"",runEnvironmentInitializers:!1});return hx({r3Injector:c.injector,platformInjector:o,rootComponent:e})}catch(o){return Promise.reject(o)}finally{pe(ae.BootstrapApplicationEnd)}}var XT=null;function Pn(){return XT}function bg(t){XT??=t}var ca=class{},El=(()=>{class t{historyGo(n){throw new Error("")}static \u0275fac=function(r){return new(r||t)};static \u0275prov=j({token:t,factory:()=>M(eD),providedIn:"platform"})}return t})();var eD=(()=>{class t extends El{_location;_history;_doc=M(Ve);constructor(){super(),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Pn().getBaseHref(this._doc)}onPopState(n){let r=Pn().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",n,!1),()=>r.removeEventListener("popstate",n)}onHashChange(n){let r=Pn().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",n,!1),()=>r.removeEventListener("hashchange",n)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(n){this._location.pathname=n}pushState(n,r,i){this._history.pushState(n,r,i)}replaceState(n,r,i){this._history.replaceState(n,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(n=0){this._history.go(n)}getState(){return this._history.state}static \u0275fac=function(r){return new(r||t)};static \u0275prov=j({token:t,factory:()=>new t,providedIn:"platform"})}return t})();function rD(t,e){return t?e?t.endsWith("/")?e.startsWith("/")?t+e.slice(1):t+e:e.startsWith("/")?t+e:`${t}/${e}`:t:e}function tD(t){let e=t.search(/#|\?|$/);return t[e-1]==="/"?t.slice(0,e-1)+t.slice(e):t}function ar(t){return t&&t[0]!=="?"?`?${t}`:t}var Il=(()=>{class t{historyGo(n){throw new Error("")}static \u0275fac=function(r){return new(r||t)};static \u0275prov=j({token:t,factory:()=>M(Ix),providedIn:"root"})}return t})(),Ex=new U(""),Ix=(()=>{class t extends Il{_platformLocation;_baseHref;_removeListenerFns=[];constructor(n,r){super(),this._platformLocation=n,this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??M(Ve).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(n){this._removeListenerFns.push(this._platformLocation.onPopState(n),this._platformLocation.onHashChange(n))}getBaseHref(){return this._baseHref}prepareExternalUrl(n){return rD(this._baseHref,n)}path(n=!1){let r=this._platformLocation.pathname+ar(this._platformLocation.search),i=this._platformLocation.hash;return i&&n?`${r}${i}`:r}pushState(n,r,i,o){let s=this.prepareExternalUrl(i+ar(o));this._platformLocation.pushState(n,r,s)}replaceState(n,r,i,o){let s=this.prepareExternalUrl(i+ar(o));this._platformLocation.replaceState(n,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(n=0){this._platformLocation.historyGo?.(n)}static \u0275fac=function(r){return new(r||t)(z(El),z(Ex,8))};static \u0275prov=j({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),ao=(()=>{class t{_subject=new et;_basePath;_locationStrategy;_urlChangeListeners=[];_urlChangeSubscription=null;constructor(n){this._locationStrategy=n;let r=this._locationStrategy.getBaseHref();this._basePath=Dx(tD(nD(r))),this._locationStrategy.onPopState(i=>{this._subject.next({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(n=!1){return this.normalize(this._locationStrategy.path(n))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(n,r=""){return this.path()==this.normalize(n+ar(r))}normalize(n){return t.stripTrailingSlash(Tx(this._basePath,nD(n)))}prepareExternalUrl(n){return n&&n[0]!=="/"&&(n="/"+n),this._locationStrategy.prepareExternalUrl(n)}go(n,r="",i=null){this._locationStrategy.pushState(i,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+ar(r)),i)}replaceState(n,r="",i=null){this._locationStrategy.replaceState(i,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+ar(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(n=0){this._locationStrategy.historyGo?.(n)}onUrlChange(n){return this._urlChangeListeners.push(n),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(n);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(n="",r){this._urlChangeListeners.forEach(i=>i(n,r))}subscribe(n,r,i){return this._subject.subscribe({next:n,error:r??void 0,complete:i??void 0})}static normalizeQueryParams=ar;static joinWithSlash=rD;static stripTrailingSlash=tD;static \u0275fac=function(r){return new(r||t)(z(Il))};static \u0275prov=j({token:t,factory:()=>wx(),providedIn:"root"})}return t})();function wx(){return new ao(z(Il))}function Tx(t,e){if(!t||!e.startsWith(t))return e;let n=e.substring(t.length);return n===""||["/",";","?","#"].includes(n[0])?n:e}function nD(t){return t.replace(/\/index.html$/,"")}function Dx(t){if(new RegExp("^(https?:)?//").test(t)){let[,n]=t.split(/\/\/[^\/]+/);return n}return t}function bx(t,e){return new V(2100,!1)}var Cg=class{createSubscription(e,n,r){return Dt(()=>e.subscribe({next:n,error:r}))}dispose(e){Dt(()=>e.unsubscribe())}},Sg=class{createSubscription(e,n,r){return e.then(i=>n?.(i),i=>r?.(i)),{unsubscribe:()=>{n=null,r=null}}}dispose(e){e.unsubscribe()}},Cx=new Sg,Sx=new Cg,Ag=(()=>{class t{_ref;_latestValue=null;markForCheckOnValueUpdate=!0;_subscription=null;_obj=null;_strategy=null;applicationErrorHandler=M(Tt);constructor(n){this._ref=n}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(n){if(!this._obj){if(n)try{this.markForCheckOnValueUpdate=!1,this._subscribe(n)}finally{this.markForCheckOnValueUpdate=!0}return this._latestValue}return n!==this._obj?(this._dispose(),this.transform(n)):this._latestValue}_subscribe(n){this._obj=n,this._strategy=this._selectStrategy(n),this._subscription=this._strategy.createSubscription(n,r=>this._updateLatestValue(n,r),r=>this.applicationErrorHandler(r))}_selectStrategy(n){if(Jr(n))return Cx;if(dl(n))return Sx;throw bx(t,n)}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(n,r){n===this._obj&&(this._latestValue=r,this.markForCheckOnValueUpdate&&this._ref?.markForCheck())}static \u0275fac=function(r){return new(r||t)(Zs(_l,16))};static \u0275pipe=pg({name:"async",type:t,pure:!1})}return t})();var wl=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275mod=ta({type:t});static \u0275inj=$i({})}return t})();function Rg(t,e){e=encodeURIComponent(e);for(let n of t.split(";")){let r=n.indexOf("="),[i,o]=r==-1?[n,""]:[n.slice(0,r),n.slice(r+1)];if(i.trim()===e)return decodeURIComponent(o)}return null}var ua=class{};var iD="browser";var la=class{_doc;constructor(e){this._doc=e}manager},Tl=(()=>{class t extends la{constructor(n){super(n)}supports(n){return!0}addEventListener(n,r,i,o){return n.addEventListener(r,i,o),()=>this.removeEventListener(n,r,i,o)}removeEventListener(n,r,i,o){return n.removeEventListener(r,i,o)}static \u0275fac=function(r){return new(r||t)(z(Ve))};static \u0275prov=j({token:t,factory:t.\u0275fac})}return t})(),Cl=new U(""),xg=(()=>{class t{_zone;_plugins;_eventNameToPlugin=new Map;constructor(n,r){this._zone=r,n.forEach(s=>{s.manager=this});let i=n.filter(s=>!(s instanceof Tl));this._plugins=i.slice().reverse();let o=n.find(s=>s instanceof Tl);o&&this._plugins.push(o)}addEventListener(n,r,i,o){return this._findPluginFor(r).addEventListener(n,r,i,o)}getZone(){return this._zone}_findPluginFor(n){let r=this._eventNameToPlugin.get(n);if(r)return r;if(r=this._plugins.find(o=>o.supports(n)),!r)throw new V(5101,!1);return this._eventNameToPlugin.set(n,r),r}static \u0275fac=function(r){return new(r||t)(z(Cl),z(De))};static \u0275prov=j({token:t,factory:t.\u0275fac})}return t})(),Ng="ng-app-id";function oD(t){for(let e of t)e.remove()}function sD(t,e){let n=e.createElement("style");return n.textContent=t,n}function Nx(t,e,n,r){let i=t.head?.querySelectorAll(`style[${Ng}="${e}"],link[${Ng}="${e}"]`);if(i)for(let o of i)o.removeAttribute(Ng),o instanceof HTMLLinkElement?r.set(o.href.slice(o.href.lastIndexOf("/")+1),{usage:0,elements:[o]}):o.textContent&&n.set(o.textContent,{usage:0,elements:[o]})}function Pg(t,e){let n=e.createElement("link");return n.setAttribute("rel","stylesheet"),n.setAttribute("href",t),n}var kg=(()=>{class t{doc;appId;nonce;inline=new Map;external=new Map;hosts=new Set;constructor(n,r,i,o={}){this.doc=n,this.appId=r,this.nonce=i,Nx(n,r,this.inline,this.external),this.hosts.add(n.head)}addStyles(n,r){for(let i of n)this.addUsage(i,this.inline,sD);r?.forEach(i=>this.addUsage(i,this.external,Pg))}removeStyles(n,r){for(let i of n)this.removeUsage(i,this.inline);r?.forEach(i=>this.removeUsage(i,this.external))}addUsage(n,r,i){let o=r.get(n);o?o.usage++:r.set(n,{usage:1,elements:[...this.hosts].map(s=>this.addElement(s,i(n,this.doc)))})}removeUsage(n,r){let i=r.get(n);i&&(i.usage--,i.usage<=0&&(oD(i.elements),r.delete(n)))}ngOnDestroy(){for(let[,{elements:n}]of[...this.inline,...this.external])oD(n);this.hosts.clear()}addHost(n){this.hosts.add(n);for(let[r,{elements:i}]of this.inline)i.push(this.addElement(n,sD(r,this.doc)));for(let[r,{elements:i}]of this.external)i.push(this.addElement(n,Pg(r,this.doc)))}removeHost(n){this.hosts.delete(n)}addElement(n,r){return this.nonce&&r.setAttribute("nonce",this.nonce),n.appendChild(r)}static \u0275fac=function(r){return new(r||t)(z(Ve),z(el),z(nl,8),z(Qr))};static \u0275prov=j({token:t,factory:t.\u0275fac})}return t})(),Mg={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},Og=/%COMP%/g;var cD="%COMP%",Mx=`_nghost-${cD}`,Px=`_ngcontent-${cD}`,xx=!0,kx=new U("",{factory:()=>xx});function Ox(t){return Px.replace(Og,t)}function Lx(t){return Mx.replace(Og,t)}function uD(t,e){return e.map(n=>n.replace(Og,t))}var Lg=(()=>{class t{eventManager;sharedStylesHost;appId;removeStylesOnCompDestroy;doc;ngZone;nonce;tracingService;rendererByCompId=new Map;defaultRenderer;constructor(n,r,i,o,s,c,u=null,l=null){this.eventManager=n,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=o,this.doc=s,this.ngZone=c,this.nonce=u,this.tracingService=l,this.defaultRenderer=new da(n,s,c,this.tracingService)}createRenderer(n,r){if(!n||!r)return this.defaultRenderer;let i=this.getOrCreateRenderer(n,r);return i instanceof bl?i.applyToHost(n):i instanceof ha&&i.applyStyles(),i}getOrCreateRenderer(n,r){let i=this.rendererByCompId,o=i.get(r.id);if(!o){let s=this.doc,c=this.ngZone,u=this.eventManager,l=this.sharedStylesHost,h=this.removeStylesOnCompDestroy,p=this.tracingService;switch(r.encapsulation){case Gt.Emulated:o=new bl(u,l,r,this.appId,h,s,c,p);break;case Gt.ShadowDom:return new Dl(u,n,r,s,c,this.nonce,p,l);case Gt.ExperimentalIsolatedShadowDom:return new Dl(u,n,r,s,c,this.nonce,p);default:o=new ha(u,l,r,h,s,c,p);break}i.set(r.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}componentReplaced(n){this.rendererByCompId.delete(n)}static \u0275fac=function(r){return new(r||t)(z(xg),z(kg),z(el),z(kx),z(Ve),z(De),z(nl),z(Qs,8))};static \u0275prov=j({token:t,factory:t.\u0275fac})}return t})(),da=class{eventManager;doc;ngZone;tracingService;data=Object.create(null);throwOnSyntheticProps=!0;constructor(e,n,r,i){this.eventManager=e,this.doc=n,this.ngZone=r,this.tracingService=i}destroy(){}destroyNode=null;createElement(e,n){return n?this.doc.createElementNS(Mg[n]||n,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,n){(aD(e)?e.content:e).appendChild(n)}insertBefore(e,n,r){e&&(aD(e)?e.content:e).insertBefore(n,r)}removeChild(e,n){n.remove()}selectRootElement(e,n){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new V(-5104,!1);return n||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,n,r,i){if(i){n=i+":"+n;let o=Mg[i];o?e.setAttributeNS(o,n,r):e.setAttribute(n,r)}else e.setAttribute(n,r)}removeAttribute(e,n,r){if(r){let i=Mg[r];i?e.removeAttributeNS(i,n):e.removeAttribute(`${r}:${n}`)}else e.removeAttribute(n)}addClass(e,n){e.classList.add(n)}removeClass(e,n){e.classList.remove(n)}setStyle(e,n,r,i){i&(un.DashCase|un.Important)?e.style.setProperty(n,r,i&un.Important?"important":""):e.style[n]=r}removeStyle(e,n,r){r&un.DashCase?e.style.removeProperty(n):e.style[n]=""}setProperty(e,n,r){e!=null&&(e[n]=r)}setValue(e,n){e.nodeValue=n}listen(e,n,r,i){if(typeof e=="string"&&(e=Pn().getGlobalEventTarget(this.doc,e),!e))throw new V(5102,!1);let o=this.decoratePreventDefault(r);return this.tracingService?.wrapEventListener&&(o=this.tracingService.wrapEventListener(e,n,o)),this.eventManager.addEventListener(e,n,o,i)}decoratePreventDefault(e){return n=>{if(n==="__ngUnwrap__")return e;e(n)===!1&&n.preventDefault()}}};function aD(t){return t.tagName==="TEMPLATE"&&t.content!==void 0}var Dl=class extends da{hostEl;sharedStylesHost;shadowRoot;constructor(e,n,r,i,o,s,c,u){super(e,i,o,c),this.hostEl=n,this.sharedStylesHost=u,this.shadowRoot=n.attachShadow({mode:"open"}),this.sharedStylesHost&&this.sharedStylesHost.addHost(this.shadowRoot);let l=r.styles;l=uD(r.id,l);for(let p of l){let m=document.createElement("style");s&&m.setAttribute("nonce",s),m.textContent=p,this.shadowRoot.appendChild(m)}let h=r.getExternalStyles?.();if(h)for(let p of h){let m=Pg(p,i);s&&m.setAttribute("nonce",s),this.shadowRoot.appendChild(m)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,n){return super.appendChild(this.nodeOrShadowRoot(e),n)}insertBefore(e,n,r){return super.insertBefore(this.nodeOrShadowRoot(e),n,r)}removeChild(e,n){return super.removeChild(null,n)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost&&this.sharedStylesHost.removeHost(this.shadowRoot)}},ha=class extends da{sharedStylesHost;removeStylesOnCompDestroy;styles;styleUrls;constructor(e,n,r,i,o,s,c,u){super(e,o,s,c),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=i;let l=r.styles;this.styles=u?uD(u,l):l,this.styleUrls=r.getExternalStyles?.(u)}applyStyles(){this.sharedStylesHost.addStyles(this.styles,this.styleUrls)}destroy(){this.removeStylesOnCompDestroy&&zr.size===0&&this.sharedStylesHost.removeStyles(this.styles,this.styleUrls)}},bl=class extends ha{contentAttr;hostAttr;constructor(e,n,r,i,o,s,c,u){let l=i+"-"+r.id;super(e,n,r,o,s,c,u,l),this.contentAttr=Ox(l),this.hostAttr=Lx(l)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,n){let r=super.createElement(e,n);return super.setAttribute(r,this.contentAttr,""),r}};var Sl=class t extends ca{supportsDOMEvents=!0;static makeCurrent(){bg(new t)}onAndCancel(e,n,r,i){return e.addEventListener(n,r,i),()=>{e.removeEventListener(n,r,i)}}dispatchEvent(e,n){e.dispatchEvent(n)}remove(e){e.remove()}createElement(e,n){return n=n||this.getDefaultDocument(),n.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,n){return n==="window"?window:n==="document"?e:n==="body"?e.body:null}getBaseHref(e){let n=Fx();return n==null?null:Vx(n)}resetBaseElement(){fa=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return Rg(document.cookie,e)}},fa=null;function Fx(){return fa=fa||document.head.querySelector("base"),fa?fa.getAttribute("href"):null}function Vx(t){return new URL(t,document.baseURI).pathname}var jx=(()=>{class t{build(){return new XMLHttpRequest}static \u0275fac=function(r){return new(r||t)};static \u0275prov=j({token:t,factory:t.\u0275fac})}return t})(),lD=["alt","control","meta","shift"],Ux={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Bx={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey},dD=(()=>{class t extends la{constructor(n){super(n)}supports(n){return t.parseEventName(n)!=null}addEventListener(n,r,i,o){let s=t.parseEventName(r),c=t.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Pn().onAndCancel(n,s.domEventName,c,o))}static parseEventName(n){let r=n.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let o=t._normalizeKey(r.pop()),s="",c=r.indexOf("code");if(c>-1&&(r.splice(c,1),s="code."),lD.forEach(l=>{let h=r.indexOf(l);h>-1&&(r.splice(h,1),s+=l+".")}),s+=o,r.length!=0||o.length===0)return null;let u={};return u.domEventName=i,u.fullKey=s,u}static matchEventFullKeyCode(n,r){let i=Ux[n.key]||n.key,o="";return r.indexOf("code.")>-1&&(i=n.code,o="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),lD.forEach(s=>{if(s!==i){let c=Bx[s];c(n)&&(o+=s+".")}}),o+=i,o===r)}static eventCallback(n,r,i){return o=>{t.matchEventFullKeyCode(o,n)&&i.runGuarded(()=>r(o))}}static _normalizeKey(n){return n==="esc"?"escape":n}static \u0275fac=function(r){return new(r||t)(z(Ve))};static \u0275prov=j({token:t,factory:t.\u0275fac})}return t})();function Fg(t,e,n){let r=L({rootComponent:t,platformRef:n?.platformRef},$x(e));return JT(r)}function $x(t){return{appProviders:[...Wx,...t?.providers??[]],platformProviders:Gx}}function Hx(){Sl.makeCurrent()}function zx(){return new Dn}function qx(){return Xp(document),document}var Gx=[{provide:Qr,useValue:iD},{provide:tl,useValue:Hx,multi:!0},{provide:Ve,useFactory:qx}];var Wx=[{provide:Ps,useValue:"root"},{provide:Dn,useFactory:zx},{provide:Cl,useClass:Tl,multi:!0},{provide:Cl,useClass:dD,multi:!0},Lg,kg,xg,{provide:Gr,useExisting:Lg},{provide:ua,useClass:jx},[]];var hD=(()=>{class t{_doc;constructor(n){this._doc=n}getTitle(){return this._doc.title}setTitle(n){this._doc.title=n||""}static \u0275fac=function(r){return new(r||t)(z(Ve))};static \u0275prov=j({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var K="primary",Da=Symbol("RouteTitle"),$g=class{params;constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n[0]:n}return null}getAll(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}};function fo(t){return new $g(t)}function Yx(t,e,n){let r=n.path.split("/");if(r.length>t.length||n.pathMatch==="full"&&(e.hasChildren()||r.length<t.length))return null;let i={};for(let o=0;o<r.length;o++){let s=r[o],c=t[o];if(s[0]===":")i[s.substring(1)]=c;else if(s!==c.path)return null}return{consumed:t.slice(0,r.length),posParams:i}}function xl(t){return new Promise((e,n)=>{t.pipe(Rt()).subscribe({next:r=>e(r),error:r=>n(r)})})}function Zx(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!ln(t[n],e[n]))return!1;return!0}function ln(t,e){let n=t?Hg(t):void 0,r=e?Hg(e):void 0;if(!n||!r||n.length!=r.length)return!1;let i;for(let o=0;o<n.length;o++)if(i=n[o],!ID(t[i],e[i]))return!1;return!0}function Hg(t){return[...Object.keys(t),...Object.getOwnPropertySymbols(t)]}function ID(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;let n=[...t].sort(),r=[...e].sort();return n.every((i,o)=>r[o]===i)}else return t===e}function wD(t){return t.length>0?t[t.length-1]:null}function oi(t){return Xc(t)?t:Jr(t)?ke(Promise.resolve(t)):ne(t)}function TD(t){return Xc(t)?xl(t):Promise.resolve(t)}var Jx={exact:bD,subset:CD},DD={exact:Xx,subset:ek,ignored:()=>!0};function fD(t,e,n){return Jx[n.paths](t.root,e.root,n.matrixParams)&&DD[n.queryParams](t.queryParams,e.queryParams)&&!(n.fragment==="exact"&&t.fragment!==e.fragment)}function Xx(t,e){return ln(t,e)}function bD(t,e,n){if(!ni(t.segments,e.segments)||!Nl(t.segments,e.segments,n)||t.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!t.children[r]||!bD(t.children[r],e.children[r],n))return!1;return!0}function ek(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>ID(t[n],e[n]))}function CD(t,e,n){return SD(t,e,e.segments,n)}function SD(t,e,n,r){if(t.segments.length>n.length){let i=t.segments.slice(0,n.length);return!(!ni(i,n)||e.hasChildren()||!Nl(i,n,r))}else if(t.segments.length===n.length){if(!ni(t.segments,n)||!Nl(t.segments,n,r))return!1;for(let i in e.children)if(!t.children[i]||!CD(t.children[i],e.children[i],r))return!1;return!0}else{let i=n.slice(0,t.segments.length),o=n.slice(t.segments.length);return!ni(t.segments,i)||!Nl(t.segments,i,r)||!t.children[K]?!1:SD(t.children[K],e,o,r)}}function Nl(t,e,n){return e.every((r,i)=>DD[n](t[i].parameters,r.parameters))}var dn=class{root;queryParams;fragment;_queryParamMap;constructor(e=new de([],{}),n={},r=null){this.root=e,this.queryParams=n,this.fragment=r}get queryParamMap(){return this._queryParamMap??=fo(this.queryParams),this._queryParamMap}toString(){return rk.serialize(this)}},de=class{segments;children;parent=null;constructor(e,n){this.segments=e,this.children=n,Object.values(n).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Ml(this)}},ti=class{path;parameters;_parameterMap;constructor(e,n){this.path=e,this.parameters=n}get parameterMap(){return this._parameterMap??=fo(this.parameters),this._parameterMap}toString(){return RD(this)}};function tk(t,e){return ni(t,e)&&t.every((n,r)=>ln(n.parameters,e[r].parameters))}function ni(t,e){return t.length!==e.length?!1:t.every((n,r)=>n.path===e[r].path)}function nk(t,e){let n=[];return Object.entries(t.children).forEach(([r,i])=>{r===K&&(n=n.concat(e(i,r)))}),Object.entries(t.children).forEach(([r,i])=>{r!==K&&(n=n.concat(e(i,r)))}),n}var zl=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275prov=j({token:t,factory:()=>new ri,providedIn:"root"})}return t})(),ri=class{parse(e){let n=new qg(e);return new dn(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(e){let n=`/${pa(e.root,!0)}`,r=sk(e.queryParams),i=typeof e.fragment=="string"?`#${ik(e.fragment)}`:"";return`${n}${r}${i}`}},rk=new ri;function Ml(t){return t.segments.map(e=>RD(e)).join("/")}function pa(t,e){if(!t.hasChildren())return Ml(t);if(e){let n=t.children[K]?pa(t.children[K],!1):"",r=[];return Object.entries(t.children).forEach(([i,o])=>{i!==K&&r.push(`${i}:${pa(o,!1)}`)}),r.length>0?`${n}(${r.join("//")})`:n}else{let n=nk(t,(r,i)=>i===K?[pa(t.children[K],!1)]:[`${i}:${pa(r,!1)}`]);return Object.keys(t.children).length===1&&t.children[K]!=null?`${Ml(t)}/${n[0]}`:`${Ml(t)}/(${n.join("//")})`}}function AD(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Al(t){return AD(t).replace(/%3B/gi,";")}function ik(t){return encodeURI(t)}function zg(t){return AD(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Pl(t){return decodeURIComponent(t)}function pD(t){return Pl(t.replace(/\+/g,"%20"))}function RD(t){return`${zg(t.path)}${ok(t.parameters)}`}function ok(t){return Object.entries(t).map(([e,n])=>`;${zg(e)}=${zg(n)}`).join("")}function sk(t){let e=Object.entries(t).map(([n,r])=>Array.isArray(r)?r.map(i=>`${Al(n)}=${Al(i)}`).join("&"):`${Al(n)}=${Al(r)}`).filter(n=>n);return e.length?`?${e.join("&")}`:""}var ak=/^[^\/()?;#]+/;function Vg(t){let e=t.match(ak);return e?e[0]:""}var ck=/^[^\/()?;=#]+/;function uk(t){let e=t.match(ck);return e?e[0]:""}var lk=/^[^=?&#]+/;function dk(t){let e=t.match(lk);return e?e[0]:""}var hk=/^[^&#]+/;function fk(t){let e=t.match(hk);return e?e[0]:""}var qg=class{url;remaining;constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new de([],{}):new de([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(n).length>0)&&(r[K]=new de(e,n)),r}parseSegment(){let e=Vg(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new V(4009,!1);return this.capture(e),new ti(Pl(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let n=uk(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let i=Vg(this.remaining);i&&(r=i,this.capture(r))}e[Pl(n)]=Pl(r)}parseQueryParam(e){let n=dk(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let s=fk(this.remaining);s&&(r=s,this.capture(r))}let i=pD(n),o=pD(r);if(e.hasOwnProperty(i)){let s=e[i];Array.isArray(s)||(s=[s],e[i]=s),s.push(o)}else e[i]=o}parseParens(e){let n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=Vg(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new V(4010,!1);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=K);let s=this.parseChildren();n[o??K]=Object.keys(s).length===1&&s[K]?s[K]:new de([],s),this.consumeOptional("//")}return n}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new V(4011,!1)}};function ND(t){return t.segments.length>0?new de([],{[K]:t}):t}function MD(t){let e={};for(let[r,i]of Object.entries(t.children)){let o=MD(i);if(r===K&&o.segments.length===0&&o.hasChildren())for(let[s,c]of Object.entries(o.children))e[s]=c;else(o.segments.length>0||o.hasChildren())&&(e[r]=o)}let n=new de(t.segments,e);return pk(n)}function pk(t){if(t.numberOfChildren===1&&t.children[K]){let e=t.children[K];return new de(t.segments.concat(e.segments),e.children)}return t}function po(t){return t instanceof dn}function gk(t,e,n=null,r=null,i=new ri){let o=PD(t);return xD(o,e,n,r,i)}function PD(t){let e;function n(o){let s={};for(let u of o.children){let l=n(u);s[u.outlet]=l}let c=new de(o.url,s);return o===t&&(e=c),c}let r=n(t.root),i=ND(r);return e??i}function xD(t,e,n,r,i){let o=t;for(;o.parent;)o=o.parent;if(e.length===0)return jg(o,o,o,n,r,i);let s=mk(e);if(s.toRoot())return jg(o,o,new de([],{}),n,r,i);let c=yk(s,o,t),u=c.processChildren?ma(c.segmentGroup,c.index,s.commands):OD(c.segmentGroup,c.index,s.commands);return jg(o,c.segmentGroup,u,n,r,i)}function kl(t){return typeof t=="object"&&t!=null&&!t.outlets&&!t.segmentPath}function _a(t){return typeof t=="object"&&t!=null&&t.outlets}function gD(t,e,n){t||="\u0275";let r=new dn;return r.queryParams={[t]:e},n.parse(n.serialize(r)).queryParams[t]}function jg(t,e,n,r,i,o){let s={};for(let[l,h]of Object.entries(r??{}))s[l]=Array.isArray(h)?h.map(p=>gD(l,p,o)):gD(l,h,o);let c;t===e?c=n:c=kD(t,e,n);let u=ND(MD(c));return new dn(u,s,i)}function kD(t,e,n){let r={};return Object.entries(t.children).forEach(([i,o])=>{o===e?r[i]=n:r[i]=kD(o,e,n)}),new de(t.segments,r)}var Ol=class{isAbsolute;numberOfDoubleDots;commands;constructor(e,n,r){if(this.isAbsolute=e,this.numberOfDoubleDots=n,this.commands=r,e&&r.length>0&&kl(r[0]))throw new V(4003,!1);let i=r.find(_a);if(i&&i!==wD(r))throw new V(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function mk(t){if(typeof t[0]=="string"&&t.length===1&&t[0]==="/")return new Ol(!0,0,t);let e=0,n=!1,r=t.reduce((i,o,s)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let c={};return Object.entries(o.outlets).forEach(([u,l])=>{c[u]=typeof l=="string"?l.split("/"):l}),[...i,{outlets:c}]}if(o.segmentPath)return[...i,o.segmentPath]}return typeof o!="string"?[...i,o]:s===0?(o.split("/").forEach((c,u)=>{u==0&&c==="."||(u==0&&c===""?n=!0:c===".."?e++:c!=""&&i.push(c))}),i):[...i,o]},[]);return new Ol(n,e,r)}var uo=class{segmentGroup;processChildren;index;constructor(e,n,r){this.segmentGroup=e,this.processChildren=n,this.index=r}};function yk(t,e,n){if(t.isAbsolute)return new uo(e,!0,0);if(!n)return new uo(e,!1,NaN);if(n.parent===null)return new uo(n,!0,0);let r=kl(t.commands[0])?0:1,i=n.segments.length-1+r;return vk(n,i,t.numberOfDoubleDots)}function vk(t,e,n){let r=t,i=e,o=n;for(;o>i;){if(o-=i,r=r.parent,!r)throw new V(4005,!1);i=r.segments.length}return new uo(r,!1,i-o)}function _k(t){return _a(t[0])?t[0].outlets:{[K]:t}}function OD(t,e,n){if(t??=new de([],{}),t.segments.length===0&&t.hasChildren())return ma(t,e,n);let r=Ek(t,e,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){let o=new de(t.segments.slice(0,r.pathIndex),{});return o.children[K]=new de(t.segments.slice(r.pathIndex),t.children),ma(o,0,i)}else return r.match&&i.length===0?new de(t.segments,{}):r.match&&!t.hasChildren()?Gg(t,e,n):r.match?ma(t,0,i):Gg(t,e,n)}function ma(t,e,n){if(n.length===0)return new de(t.segments,{});{let r=_k(n),i={};if(Object.keys(r).some(o=>o!==K)&&t.children[K]&&t.numberOfChildren===1&&t.children[K].segments.length===0){let o=ma(t.children[K],e,n);return new de(t.segments,o.children)}return Object.entries(r).forEach(([o,s])=>{typeof s=="string"&&(s=[s]),s!==null&&(i[o]=OD(t.children[o],e,s))}),Object.entries(t.children).forEach(([o,s])=>{r[o]===void 0&&(i[o]=s)}),new de(t.segments,i)}}function Ek(t,e,n){let r=0,i=e,o={match:!1,pathIndex:0,commandIndex:0};for(;i<t.segments.length;){if(r>=n.length)return o;let s=t.segments[i],c=n[r];if(_a(c))break;let u=`${c}`,l=r<n.length-1?n[r+1]:null;if(i>0&&u===void 0)break;if(u&&l&&typeof l=="object"&&l.outlets===void 0){if(!yD(u,l,s))return o;r+=2}else{if(!yD(u,{},s))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function Gg(t,e,n){let r=t.segments.slice(0,e),i=0;for(;i<n.length;){let o=n[i];if(_a(o)){let u=Ik(o.outlets);return new de(r,u)}if(i===0&&kl(n[0])){let u=t.segments[e];r.push(new ti(u.path,mD(n[0]))),i++;continue}let s=_a(o)?o.outlets[K]:`${o}`,c=i<n.length-1?n[i+1]:null;s&&c&&kl(c)?(r.push(new ti(s,mD(c))),i+=2):(r.push(new ti(s,{})),i++)}return new de(r,{})}function Ik(t){let e={};return Object.entries(t).forEach(([n,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[n]=Gg(new de([],{}),0,r))}),e}function mD(t){let e={};return Object.entries(t).forEach(([n,r])=>e[n]=`${r}`),e}function yD(t,e,n){return t==n.path&&ln(e,n.parameters)}var ya="imperative",Ke=(function(t){return t[t.NavigationStart=0]="NavigationStart",t[t.NavigationEnd=1]="NavigationEnd",t[t.NavigationCancel=2]="NavigationCancel",t[t.NavigationError=3]="NavigationError",t[t.RoutesRecognized=4]="RoutesRecognized",t[t.ResolveStart=5]="ResolveStart",t[t.ResolveEnd=6]="ResolveEnd",t[t.GuardsCheckStart=7]="GuardsCheckStart",t[t.GuardsCheckEnd=8]="GuardsCheckEnd",t[t.RouteConfigLoadStart=9]="RouteConfigLoadStart",t[t.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",t[t.ChildActivationStart=11]="ChildActivationStart",t[t.ChildActivationEnd=12]="ChildActivationEnd",t[t.ActivationStart=13]="ActivationStart",t[t.ActivationEnd=14]="ActivationEnd",t[t.Scroll=15]="Scroll",t[t.NavigationSkipped=16]="NavigationSkipped",t})(Ke||{}),kt=class{id;url;constructor(e,n){this.id=e,this.url=n}},go=class extends kt{type=Ke.NavigationStart;navigationTrigger;restoredState;constructor(e,n,r="imperative",i=null){super(e,n),this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},cr=class extends kt{urlAfterRedirects;type=Ke.NavigationEnd;constructor(e,n,r){super(e,n),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},_t=(function(t){return t[t.Redirect=0]="Redirect",t[t.SupersededByNewNavigation=1]="SupersededByNewNavigation",t[t.NoDataFromResolver=2]="NoDataFromResolver",t[t.GuardRejected=3]="GuardRejected",t[t.Aborted=4]="Aborted",t})(_t||{}),Ll=(function(t){return t[t.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",t[t.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",t})(Ll||{}),xn=class extends kt{reason;code;type=Ke.NavigationCancel;constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},ur=class extends kt{reason;code;type=Ke.NavigationSkipped;constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i}},Ea=class extends kt{error;target;type=Ke.NavigationError;constructor(e,n,r,i){super(e,n),this.error=r,this.target=i}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},Fl=class extends kt{urlAfterRedirects;state;type=Ke.RoutesRecognized;constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Wg=class extends kt{urlAfterRedirects;state;type=Ke.GuardsCheckStart;constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Kg=class extends kt{urlAfterRedirects;state;shouldActivate;type=Ke.GuardsCheckEnd;constructor(e,n,r,i,o){super(e,n),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},Qg=class extends kt{urlAfterRedirects;state;type=Ke.ResolveStart;constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Yg=class extends kt{urlAfterRedirects;state;type=Ke.ResolveEnd;constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Zg=class{route;type=Ke.RouteConfigLoadStart;constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},Jg=class{route;type=Ke.RouteConfigLoadEnd;constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},Xg=class{snapshot;type=Ke.ChildActivationStart;constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},em=class{snapshot;type=Ke.ChildActivationEnd;constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},tm=class{snapshot;type=Ke.ActivationStart;constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},nm=class{snapshot;type=Ke.ActivationEnd;constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}};var Ia=class{},mo=class{url;navigationBehaviorOptions;constructor(e,n){this.url=e,this.navigationBehaviorOptions=n}};function wk(t){return!(t instanceof Ia)&&!(t instanceof mo)}function Tk(t,e){return t.providers&&!t._injector&&(t._injector=ea(t.providers,e,`Route: ${t.path}`)),t._injector??e}function Qt(t){return t.outlet||K}function Dk(t,e){let n=t.filter(r=>Qt(r)===e);return n.push(...t.filter(r=>Qt(r)!==e)),n}function vo(t){if(!t)return null;if(t.routeConfig?._injector)return t.routeConfig._injector;for(let e=t.parent;e;e=e.parent){let n=e.routeConfig;if(n?._loadedInjector)return n._loadedInjector;if(n?._injector)return n._injector}return null}var rm=class{rootInjector;outlet=null;route=null;children;attachRef=null;get injector(){return vo(this.route?.snapshot)??this.rootInjector}constructor(e){this.rootInjector=e,this.children=new ba(this.rootInjector)}},ba=(()=>{class t{rootInjector;contexts=new Map;constructor(n){this.rootInjector=n}onChildOutletCreated(n,r){let i=this.getOrCreateContext(n);i.outlet=r,this.contexts.set(n,i)}onChildOutletDestroyed(n){let r=this.getContext(n);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let n=this.contexts;return this.contexts=new Map,n}onOutletReAttached(n){this.contexts=n}getOrCreateContext(n){let r=this.getContext(n);return r||(r=new rm(this.rootInjector),this.contexts.set(n,r)),r}getContext(n){return this.contexts.get(n)||null}static \u0275fac=function(r){return new(r||t)(z(Oe))};static \u0275prov=j({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),Vl=class{_root;constructor(e){this._root=e}get root(){return this._root.value}parent(e){let n=this.pathFromRoot(e);return n.length>1?n[n.length-2]:null}children(e){let n=im(e,this._root);return n?n.children.map(r=>r.value):[]}firstChild(e){let n=im(e,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(e){let n=om(e,this._root);return n.length<2?[]:n[n.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return om(e,this._root).map(n=>n.value)}};function im(t,e){if(t===e.value)return e;for(let n of e.children){let r=im(t,n);if(r)return r}return null}function om(t,e){if(t===e.value)return[e];for(let n of e.children){let r=om(t,n);if(r.length)return r.unshift(e),r}return[]}var Ct=class{value;children;constructor(e,n){this.value=e,this.children=n}toString(){return`TreeNode(${this.value})`}};function co(t){let e={};return t&&t.children.forEach(n=>e[n.value.outlet]=n),e}var jl=class extends Vl{snapshot;constructor(e,n){super(e),this.snapshot=n,hm(this,e)}toString(){return this.snapshot.toString()}};function LD(t){let e=bk(t),n=new We([new ti("",{})]),r=new We({}),i=new We({}),o=new We({}),s=new We(""),c=new ii(n,r,o,s,i,K,t,e.root);return c.snapshot=e.root,new jl(new Ct(c,[]),e)}function bk(t){let e={},n={},r={},o=new lo([],e,r,"",n,K,t,null,{});return new Bl("",new Ct(o,[]))}var ii=class{urlSubject;paramsSubject;queryParamsSubject;fragmentSubject;dataSubject;outlet;component;snapshot;_futureSnapshot;_routerState;_paramMap;_queryParamMap;title;url;params;queryParams;fragment;data;constructor(e,n,r,i,o,s,c,u){this.urlSubject=e,this.paramsSubject=n,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=o,this.outlet=s,this.component=c,this._futureSnapshot=u,this.title=this.dataSubject?.pipe(ye(l=>l[Da]))??ne(void 0),this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(ye(e=>fo(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(ye(e=>fo(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function Ul(t,e,n="emptyOnly"){let r,{routeConfig:i}=t;return e!==null&&(n==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:L(L({},e.params),t.params),data:L(L({},e.data),t.data),resolve:L(L(L(L({},t.data),e.data),i?.data),t._resolvedData)}:r={params:L({},t.params),data:L({},t.data),resolve:L(L({},t.data),t._resolvedData??{})},i&&VD(i)&&(r.resolve[Da]=i.title),r}var lo=class{url;params;queryParams;fragment;data;outlet;component;routeConfig;_resolve;_resolvedData;_routerState;_paramMap;_queryParamMap;get title(){return this.data?.[Da]}constructor(e,n,r,i,o,s,c,u,l){this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=s,this.component=c,this.routeConfig=u,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=fo(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=fo(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),n=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${n}')`}},Bl=class extends Vl{url;constructor(e,n){super(n),this.url=e,hm(this,n)}toString(){return FD(this._root)}};function hm(t,e){e.value._routerState=t,e.children.forEach(n=>hm(t,n))}function FD(t){let e=t.children.length>0?` { ${t.children.map(FD).join(", ")} } `:"";return`${t.value}${e}`}function Ug(t){if(t.snapshot){let e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,ln(e.queryParams,n.queryParams)||t.queryParamsSubject.next(n.queryParams),e.fragment!==n.fragment&&t.fragmentSubject.next(n.fragment),ln(e.params,n.params)||t.paramsSubject.next(n.params),Zx(e.url,n.url)||t.urlSubject.next(n.url),ln(e.data,n.data)||t.dataSubject.next(n.data)}else t.snapshot=t._futureSnapshot,t.dataSubject.next(t._futureSnapshot.data)}function sm(t,e){let n=ln(t.params,e.params)&&tk(t.url,e.url),r=!t.parent!=!e.parent;return n&&!r&&(!t.parent||sm(t.parent,e.parent))}function VD(t){return typeof t.title=="string"||t.title===null}var Ck=new U(""),jD=(()=>{class t{activated=null;get activatedComponentRef(){return this.activated}_activatedRoute=null;name=K;activateEvents=new dt;deactivateEvents=new dt;attachEvents=new dt;detachEvents=new dt;routerOutletData=ZT();parentContexts=M(ba);location=M(Xs);changeDetector=M(_l);inputBinder=M(ql,{optional:!0});supportsBindingToComponentInputs=!0;ngOnChanges(n){if(n.name){let{firstChange:r,previousValue:i}=n.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(n){return this.parentContexts.getContext(n)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let n=this.parentContexts.getContext(this.name);n?.route&&(n.attachRef?this.attach(n.attachRef,n.route):this.activateWith(n.route,n.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new V(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new V(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new V(4012,!1);this.location.detach();let n=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(n.instance),n}attach(n,r){this.activated=n,this._activatedRoute=r,this.location.insert(n.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(n.instance)}deactivate(){if(this.activated){let n=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(n)}}activateWith(n,r){if(this.isActivated)throw new V(4013,!1);this._activatedRoute=n;let i=this.location,s=n.snapshot.component,c=this.parentContexts.getOrCreateContext(this.name).children,u=new am(n,c,i.injector,this.routerOutletData);this.activated=i.createComponent(s,{index:i.length,injector:u,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static \u0275fac=function(r){return new(r||t)};static \u0275dir=ll({type:t,selectors:[["router-outlet"]],inputs:{name:"name",routerOutletData:[1,"routerOutletData"]},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],features:[Zu]})}return t})(),am=class{route;childContexts;parent;outletData;constructor(e,n,r,i){this.route=e,this.childContexts=n,this.parent=r,this.outletData=i}get(e,n){return e===ii?this.route:e===ba?this.childContexts:e===Ck?this.outletData:this.parent.get(e,n)}},ql=new U("");var UD=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275cmp=Zr({type:t,selectors:[["ng-component"]],exportAs:["emptyRouterOutlet"],decls:1,vars:0,template:function(r,i){r&1&&oo(0,"router-outlet")},dependencies:[jD],encapsulation:2})}return t})();function fm(t){let e=t.children&&t.children.map(fm),n=e?ve(L({},t),{children:e}):L({},t);return!n.component&&!n.loadComponent&&(e||n.loadChildren)&&n.outlet&&n.outlet!==K&&(n.component=UD),n}function Sk(t,e,n){let r=wa(t,e._root,n?n._root:void 0);return new jl(r,e)}function wa(t,e,n){if(n&&t.shouldReuseRoute(e.value,n.value.snapshot)){let r=n.value;r._futureSnapshot=e.value;let i=Ak(t,e,n);return new Ct(r,i)}else{if(t.shouldAttach(e.value)){let o=t.retrieve(e.value);if(o!==null){let s=o.route;return s.value._futureSnapshot=e.value,s.children=e.children.map(c=>wa(t,c)),s}}let r=Rk(e.value),i=e.children.map(o=>wa(t,o));return new Ct(r,i)}}function Ak(t,e,n){return e.children.map(r=>{for(let i of n.children)if(t.shouldReuseRoute(r.value,i.value.snapshot))return wa(t,r,i);return wa(t,r)})}function Rk(t){return new ii(new We(t.url),new We(t.params),new We(t.queryParams),new We(t.fragment),new We(t.data),t.outlet,t.component,t)}var Ta=class{redirectTo;navigationBehaviorOptions;constructor(e,n){this.redirectTo=e,this.navigationBehaviorOptions=n}},BD="ngNavigationCancelingError";function $l(t,e){let{redirectTo:n,navigationBehaviorOptions:r}=po(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=$D(!1,_t.Redirect);return i.url=n,i.navigationBehaviorOptions=r,i}function $D(t,e){let n=new Error(`NavigationCancelingError: ${t||""}`);return n[BD]=!0,n.cancellationCode=e,n}function Nk(t){return HD(t)&&po(t.url)}function HD(t){return!!t&&t[BD]}var Mk=(t,e,n,r)=>ye(i=>(new cm(e,i.targetRouterState,i.currentRouterState,n,r).activate(t),i)),cm=class{routeReuseStrategy;futureState;currState;forwardEvent;inputBindingEnabled;constructor(e,n,r,i,o){this.routeReuseStrategy=e,this.futureState=n,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=o}activate(e){let n=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,r,e),Ug(this.futureState.root),this.activateChildRoutes(n,r,e)}deactivateChildRoutes(e,n,r){let i=co(n);e.children.forEach(o=>{let s=o.value.outlet;this.deactivateRoutes(o,i[s],r),delete i[s]}),Object.values(i).forEach(o=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(e,n,r){let i=e.value,o=n?n.value:null;if(i===o)if(i.component){let s=r.getContext(i.outlet);s&&this.deactivateChildRoutes(e,n,s.children)}else this.deactivateChildRoutes(e,n,r);else o&&this.deactivateRouteAndItsChildren(n,r)}deactivateRouteAndItsChildren(e,n){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,n):this.deactivateRouteAndOutlet(e,n)}detachAndStoreRouteSubtree(e,n){let r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,o=co(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);if(r&&r.outlet){let s=r.outlet.detach(),c=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:s,route:e,contexts:c})}}deactivateRouteAndOutlet(e,n){let r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,o=co(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,n,r){let i=co(n);e.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new nm(o.value.snapshot))}),e.children.length&&this.forwardEvent(new em(e.value.snapshot))}activateRoutes(e,n,r){let i=e.value,o=n?n.value:null;if(Ug(i),i===o)if(i.component){let s=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,n,s.children)}else this.activateChildRoutes(e,n,r);else if(i.component){let s=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let c=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),s.children.onOutletReAttached(c.contexts),s.attachRef=c.componentRef,s.route=c.route.value,s.outlet&&s.outlet.attach(c.componentRef,c.route.value),Ug(c.route.value),this.activateChildRoutes(e,null,s.children)}else s.attachRef=null,s.route=i,s.outlet&&s.outlet.activateWith(i,s.injector),this.activateChildRoutes(e,null,s.children)}else this.activateChildRoutes(e,null,r)}},Hl=class{path;route;constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},ho=class{component;route;constructor(e,n){this.component=e,this.route=n}};function Pk(t,e,n){let r=t._root,i=e?e._root:null;return ga(r,i,n,[r.value])}function xk(t){let e=t.routeConfig?t.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:t,guards:e}}function _o(t,e){let n=Symbol(),r=e.get(t,n);return r===n?typeof t=="function"&&!Nf(t)?t:e.get(t):r}function ga(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=co(e);return t.children.forEach(s=>{kk(s,o[s.value.outlet],n,r.concat([s.value]),i),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,c])=>va(c,n.getContext(s),i)),i}function kk(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=t.value,s=e?e.value:null,c=n?n.getContext(t.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){let u=Ok(s,o,o.routeConfig.runGuardsAndResolvers);u?i.canActivateChecks.push(new Hl(r)):(o.data=s.data,o._resolvedData=s._resolvedData),o.component?ga(t,e,c?c.children:null,r,i):ga(t,e,n,r,i),u&&c&&c.outlet&&c.outlet.isActivated&&i.canDeactivateChecks.push(new ho(c.outlet.component,s))}else s&&va(e,c,i),i.canActivateChecks.push(new Hl(r)),o.component?ga(t,null,c?c.children:null,r,i):ga(t,null,n,r,i);return i}function Ok(t,e,n){if(typeof n=="function")return n(t,e);switch(n){case"pathParamsChange":return!ni(t.url,e.url);case"pathParamsOrQueryParamsChange":return!ni(t.url,e.url)||!ln(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!sm(t,e)||!ln(t.queryParams,e.queryParams);case"paramsChange":default:return!sm(t,e)}}function va(t,e,n){let r=co(t),i=t.value;Object.entries(r).forEach(([o,s])=>{i.component?e?va(s,e.children.getContext(o),n):va(s,null,n):va(s,e,n)}),i.component?e&&e.outlet&&e.outlet.isActivated?n.canDeactivateChecks.push(new ho(e.outlet.component,i)):n.canDeactivateChecks.push(new ho(null,i)):n.canDeactivateChecks.push(new ho(null,i))}function Ca(t){return typeof t=="function"}function Lk(t){return typeof t=="boolean"}function Fk(t){return t&&Ca(t.canLoad)}function Vk(t){return t&&Ca(t.canActivate)}function jk(t){return t&&Ca(t.canActivateChild)}function Uk(t){return t&&Ca(t.canDeactivate)}function Bk(t){return t&&Ca(t.canMatch)}function zD(t){return t instanceof Sr||t?.name==="EmptyError"}var Rl=Symbol("INITIAL_VALUE");function yo(){return tn(t=>cf(t.map(e=>e.pipe(wn(1),nu(Rl)))).pipe(ye(e=>{for(let n of e)if(n!==!0){if(n===Rl)return Rl;if(n===!1||$k(n))return n}return!0}),Ut(e=>e!==Rl),wn(1)))}function $k(t){return po(t)||t instanceof Ta}function qD(t){return t.aborted?ne(void 0).pipe(wn(1)):new J(e=>{let n=()=>{e.next(),e.complete()};return t.addEventListener("abort",n),()=>t.removeEventListener("abort",n)})}function GD(t){return Ds(qD(t))}function Hk(t,e){return ct(n=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=n;return s.length===0&&o.length===0?ne(ve(L({},n),{guardsResult:!0})):zk(s,r,i,t).pipe(ct(c=>c&&Lk(c)?qk(r,o,t,e):ne(c)),ye(c=>ve(L({},n),{guardsResult:c})))})}function zk(t,e,n,r){return ke(t).pipe(ct(i=>Yk(i.component,i.route,n,e,r)),Rt(i=>i!==!0,!0))}function qk(t,e,n,r){return ke(e).pipe(eu(i=>Fi(Wk(i.route.parent,r),Gk(i.route,r),Qk(t,i.path,n),Kk(t,i.route,n))),Rt(i=>i!==!0,!0))}function Gk(t,e){return t!==null&&e&&e(new tm(t)),ne(!0)}function Wk(t,e){return t!==null&&e&&e(new Xg(t)),ne(!0)}function Kk(t,e,n){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return ne(!0);let i=r.map(o=>ws(()=>{let s=vo(e)??n,c=_o(o,s),u=Vk(c)?c.canActivate(e,t):Le(s,()=>c(e,t));return oi(u).pipe(Rt())}));return ne(i).pipe(yo())}function Qk(t,e,n){let r=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(s=>xk(s)).filter(s=>s!==null).map(s=>ws(()=>{let c=s.guards.map(u=>{let l=vo(s.node)??n,h=_o(u,l),p=jk(h)?h.canActivateChild(r,t):Le(l,()=>h(r,t));return oi(p).pipe(Rt())});return ne(c).pipe(yo())}));return ne(o).pipe(yo())}function Yk(t,e,n,r,i){let o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||o.length===0)return ne(!0);let s=o.map(c=>{let u=vo(e)??i,l=_o(c,u),h=Uk(l)?l.canDeactivate(t,e,n,r):Le(u,()=>l(t,e,n,r));return oi(h).pipe(Rt())});return ne(s).pipe(yo())}function Zk(t,e,n,r,i){let o=e.canLoad;if(o===void 0||o.length===0)return ne(!0);let s=o.map(c=>{let u=_o(c,t),l=Fk(u)?u.canLoad(e,n):Le(t,()=>u(e,n)),h=oi(l);return i?h.pipe(GD(i)):h});return ne(s).pipe(yo(),WD(r))}function WD(t){return Vc(ut(e=>{if(typeof e!="boolean")throw $l(t,e)}),ye(e=>e===!0))}function Jk(t,e,n,r,i){let o=e.canMatch;if(!o||o.length===0)return ne(!0);let s=o.map(c=>{let u=_o(c,t),l=Bk(u)?u.canMatch(e,n):Le(t,()=>u(e,n)),h=oi(l);return i?h.pipe(GD(i)):h});return ne(s).pipe(yo(),WD(r))}var ei=class KD extends Error{segmentGroup;constructor(e){super(),this.segmentGroup=e||null,Object.setPrototypeOf(this,KD.prototype)}},um=class QD extends Error{urlTree;constructor(e){super(),this.urlTree=e,Object.setPrototypeOf(this,QD.prototype)}};function Xk(t){throw new V(4e3,!1)}function eO(t){throw $D(!1,_t.GuardRejected)}var tO=class{urlSerializer;urlTree;constructor(e,n){this.urlSerializer=e,this.urlTree=n}async lineralizeSegments(e,n){let r=[],i=n.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return r;if(i.numberOfChildren>1||!i.children[K])throw Xk(`${e.redirectTo}`);i=i.children[K]}}async applyRedirectCommands(e,n,r,i,o){let s=await nO(n,i,o);if(s instanceof dn)throw new um(s);let c=this.applyRedirectCreateUrlTree(s,this.urlSerializer.parse(s),e,r);if(s[0]==="/")throw new um(c);return c}applyRedirectCreateUrlTree(e,n,r,i){let o=this.createSegmentGroup(e,n.root,r,i);return new dn(o,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(e,n){let r={};return Object.entries(e).forEach(([i,o])=>{if(typeof o=="string"&&o[0]===":"){let c=o.substring(1);r[i]=n[c]}else r[i]=o}),r}createSegmentGroup(e,n,r,i){let o=this.createSegments(e,n.segments,r,i),s={};return Object.entries(n.children).forEach(([c,u])=>{s[c]=this.createSegmentGroup(e,u,r,i)}),new de(o,s)}createSegments(e,n,r,i){return n.map(o=>o.path[0]===":"?this.findPosParam(e,o,i):this.findOrReturn(o,r))}findPosParam(e,n,r){let i=r[n.path.substring(1)];if(!i)throw new V(4001,!1);return i}findOrReturn(e,n){let r=0;for(let i of n){if(i.path===e.path)return n.splice(r),i;r++}return e}};function nO(t,e,n){if(typeof t=="string")return Promise.resolve(t);let r=t,{queryParams:i,fragment:o,routeConfig:s,url:c,outlet:u,params:l,data:h,title:p}=e;return xl(oi(Le(n,()=>r({params:l,data:h,queryParams:i,fragment:o,routeConfig:s,url:c,outlet:u,title:p}))))}var lm={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function rO(t,e,n,r,i,o){let s=YD(t,e,n);return s.matched?(r=Tk(e,r),Jk(r,e,n,i,o).pipe(ye(c=>c===!0?s:L({},lm)))):ne(s)}function YD(t,e,n){if(e.path==="**")return iO(n);if(e.path==="")return e.pathMatch==="full"&&(t.hasChildren()||n.length>0)?L({},lm):{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};let i=(e.matcher||Yx)(n,t,e);if(!i)return L({},lm);let o={};Object.entries(i.posParams??{}).forEach(([c,u])=>{o[c]=u.path});let s=i.consumed.length>0?L(L({},o),i.consumed[i.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:n.slice(i.consumed.length),parameters:s,positionalParamSegments:i.posParams??{}}}function iO(t){return{matched:!0,parameters:t.length>0?wD(t).parameters:{},consumedSegments:t,remainingSegments:[],positionalParamSegments:{}}}function vD(t,e,n,r){return n.length>0&&aO(t,n,r)?{segmentGroup:new de(e,sO(r,new de(n,t.children))),slicedSegments:[]}:n.length===0&&cO(t,n,r)?{segmentGroup:new de(t.segments,oO(t,n,r,t.children)),slicedSegments:n}:{segmentGroup:new de(t.segments,t.children),slicedSegments:n}}function oO(t,e,n,r){let i={};for(let o of n)if(Gl(t,e,o)&&!r[Qt(o)]){let s=new de([],{});i[Qt(o)]=s}return L(L({},r),i)}function sO(t,e){let n={};n[K]=e;for(let r of t)if(r.path===""&&Qt(r)!==K){let i=new de([],{});n[Qt(r)]=i}return n}function aO(t,e,n){return n.some(r=>Gl(t,e,r)&&Qt(r)!==K)}function cO(t,e,n){return n.some(r=>Gl(t,e,r))}function Gl(t,e,n){return(t.hasChildren()||e.length>0)&&n.pathMatch==="full"?!1:n.path===""}function uO(t,e,n){return e.length===0&&!t.children[n]}var lO=class{};async function dO(t,e,n,r,i,o,s="emptyOnly",c){return new fO(t,e,n,r,i,s,o,c).recognize()}var hO=31,fO=class{injector;configLoader;rootComponentType;config;urlTree;paramsInheritanceStrategy;urlSerializer;abortSignal;applyRedirects;absoluteRedirectCount=0;allowRedirects=!0;constructor(e,n,r,i,o,s,c,u){this.injector=e,this.configLoader=n,this.rootComponentType=r,this.config=i,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=c,this.abortSignal=u,this.applyRedirects=new tO(this.urlSerializer,this.urlTree)}noMatchError(e){return new V(4002,`'${e.segmentGroup}'`)}async recognize(){let e=vD(this.urlTree.root,[],[],this.config).segmentGroup,{children:n,rootSnapshot:r}=await this.match(e),i=new Ct(r,n),o=new Bl("",i),s=gk(r,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),{state:o,tree:s}}async match(e){let n=new lo([],Object.freeze({}),Object.freeze(L({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),K,this.rootComponentType,null,{});try{return{children:await this.processSegmentGroup(this.injector,this.config,e,K,n),rootSnapshot:n}}catch(r){if(r instanceof um)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof ei?this.noMatchError(r):r}}async processSegmentGroup(e,n,r,i,o){if(r.segments.length===0&&r.hasChildren())return this.processChildren(e,n,r,o);let s=await this.processSegment(e,n,r,r.segments,i,!0,o);return s instanceof Ct?[s]:[]}async processChildren(e,n,r,i){let o=[];for(let u of Object.keys(r.children))u==="primary"?o.unshift(u):o.push(u);let s=[];for(let u of o){let l=r.children[u],h=Dk(n,u),p=await this.processSegmentGroup(e,h,l,u,i);s.push(...p)}let c=ZD(s);return pO(c),c}async processSegment(e,n,r,i,o,s,c){for(let u of n)try{return await this.processSegmentAgainstRoute(u._injector??e,n,u,r,i,o,s,c)}catch(l){if(l instanceof ei||zD(l))continue;throw l}if(uO(r,i,o))return new lO;throw new ei(r)}async processSegmentAgainstRoute(e,n,r,i,o,s,c,u){if(Qt(r)!==s&&(s===K||!Gl(i,o,r)))throw new ei(i);if(r.redirectTo===void 0)return this.matchSegmentAgainstRoute(e,i,r,o,s,u);if(this.allowRedirects&&c)return this.expandSegmentAgainstRouteUsingRedirect(e,i,n,r,o,s,u);throw new ei(i)}async expandSegmentAgainstRouteUsingRedirect(e,n,r,i,o,s,c){let{matched:u,parameters:l,consumedSegments:h,positionalParamSegments:p,remainingSegments:m}=YD(n,i,o);if(!u)throw new ei(n);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>hO&&(this.allowRedirects=!1));let y=new lo(o,l,Object.freeze(L({},this.urlTree.queryParams)),this.urlTree.fragment,_D(i),Qt(i),i.component??i._loadedComponent??null,i,ED(i)),C=Ul(y,c,this.paramsInheritanceStrategy);if(y.params=Object.freeze(C.params),y.data=Object.freeze(C.data),this.abortSignal.aborted)throw new Error(this.abortSignal.reason);let A=await this.applyRedirects.applyRedirectCommands(h,i.redirectTo,p,y,e),R=await this.applyRedirects.lineralizeSegments(i,A);return this.processSegment(e,r,n,R.concat(m),s,!1,c)}async matchSegmentAgainstRoute(e,n,r,i,o,s){if(this.abortSignal.aborted)throw new Error(this.abortSignal.reason);let c=await xl(rO(n,r,i,e,this.urlSerializer,this.abortSignal));if(r.path==="**"&&(n.children={}),!c?.matched)throw new ei(n);e=r._injector??e;let{routes:u}=await this.getChildConfig(e,r,i),l=r._loadedInjector??e,{parameters:h,consumedSegments:p,remainingSegments:m}=c,y=new lo(p,h,Object.freeze(L({},this.urlTree.queryParams)),this.urlTree.fragment,_D(r),Qt(r),r.component??r._loadedComponent??null,r,ED(r)),C=Ul(y,s,this.paramsInheritanceStrategy);y.params=Object.freeze(C.params),y.data=Object.freeze(C.data);let{segmentGroup:A,slicedSegments:R}=vD(n,p,m,u);if(R.length===0&&A.hasChildren()){let Q=await this.processChildren(l,u,A,y);return new Ct(y,Q)}if(u.length===0&&R.length===0)return new Ct(y,[]);let k=Qt(r)===o,$=await this.processSegment(l,u,A,R,k?K:o,!0,y);return new Ct(y,$ instanceof Ct?[$]:[])}async getChildConfig(e,n,r){if(n.children)return{routes:n.children,injector:e};if(n.loadChildren){if(n._loadedRoutes!==void 0)return{routes:n._loadedRoutes,injector:n._loadedInjector};if(this.abortSignal.aborted)throw new Error(this.abortSignal.reason);if(await xl(Zk(e,n,r,this.urlSerializer,this.abortSignal))){let o=await this.configLoader.loadChildren(e,n);return n._loadedRoutes=o.routes,n._loadedInjector=o.injector,o}throw eO(n)}return{routes:[],injector:e}}};function pO(t){t.sort((e,n)=>e.value.outlet===K?-1:n.value.outlet===K?1:e.value.outlet.localeCompare(n.value.outlet))}function gO(t){let e=t.value.routeConfig;return e&&e.path===""}function ZD(t){let e=[],n=new Set;for(let r of t){if(!gO(r)){e.push(r);continue}let i=e.find(o=>r.value.routeConfig===o.value.routeConfig);i!==void 0?(i.children.push(...r.children),n.add(i)):e.push(r)}for(let r of n){let i=ZD(r.children);e.push(new Ct(r.value,i))}return e.filter(r=>!n.has(r))}function _D(t){return t.data||{}}function ED(t){return t.resolve||{}}var mO=new U("",{factory:()=>dO});function yO(t,e,n,r,i,o,s){let c=t.get(mO);return ct(u=>ne(u).pipe(tn(l=>c(t,e,n,r,l.extractedUrl,i,o,s)),ye(({state:l,tree:h})=>ve(L({},u),{targetSnapshot:l,urlAfterRedirects:h}))))}function vO(t,e){return ct(n=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=n;if(!i.length)return ne(n);let o=new Set(i.map(u=>u.route)),s=new Set;for(let u of o)if(!s.has(u))for(let l of JD(u))s.add(l);let c=0;return ke(s).pipe(eu(u=>o.has(u)?_O(u,r,t,e):(u.data=Ul(u,u.parent,t).resolve,ne(void 0))),ut(()=>c++),tu(1),ct(u=>c===s.size?ne(n):gt))})}function JD(t){let e=t.children.map(n=>JD(n)).flat();return[t,...e]}function _O(t,e,n,r){let i=t.routeConfig,o=t._resolve;return i?.title!==void 0&&!VD(i)&&(o[Da]=i.title),ws(()=>(t.data=Ul(t,t.parent,n).resolve,EO(o,t,e,r).pipe(ye(s=>(t._resolvedData=s,t.data=L(L({},t.data),s),null)))))}function EO(t,e,n,r){let i=Hg(t);if(i.length===0)return ne({});let o={};return ke(i).pipe(ct(s=>IO(t[s],e,n,r).pipe(Rt(),ut(c=>{if(c instanceof Ta)throw $l(new ri,c);o[s]=c}))),tu(1),ye(()=>o),Ts(s=>zD(s)?gt:af(s)))}function IO(t,e,n,r){let i=vo(e)??r,o=_o(t,i),s=o.resolve?o.resolve(e,n):Le(i,()=>o(e,n));return oi(s)}function Bg(t){return tn(e=>{let n=t(e);return n?ke(n).pipe(ye(()=>e)):ne(e)})}var XD=(()=>{class t{buildTitle(n){let r,i=n.root;for(;i!==void 0;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(o=>o.outlet===K);return r}getResolvedTitleForRoute(n){return n.data[Da]}static \u0275fac=function(r){return new(r||t)};static \u0275prov=j({token:t,factory:()=>M(wO),providedIn:"root"})}return t})(),wO=(()=>{class t extends XD{title;constructor(n){super(),this.title=n}updateTitle(n){let r=this.buildTitle(n);r!==void 0&&this.title.setTitle(r)}static \u0275fac=function(r){return new(r||t)(z(hD))};static \u0275prov=j({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),Wl=new U("",{factory:()=>({})}),Kl=new U(""),eb=(()=>{class t{componentLoaders=new WeakMap;childrenLoaders=new WeakMap;onLoadStartListener;onLoadEndListener;compiler=M(wg);async loadComponent(n,r){if(this.componentLoaders.get(r))return this.componentLoaders.get(r);if(r._loadedComponent)return Promise.resolve(r._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(r);let i=(async()=>{try{let o=await TD(Le(n,()=>r.loadComponent())),s=await nb(tb(o));return this.onLoadEndListener&&this.onLoadEndListener(r),r._loadedComponent=s,s}finally{this.componentLoaders.delete(r)}})();return this.componentLoaders.set(r,i),i}loadChildren(n,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return Promise.resolve({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let i=(async()=>{try{let o=await TO(r,this.compiler,n,this.onLoadEndListener);return r._loadedRoutes=o.routes,r._loadedInjector=o.injector,o}finally{this.childrenLoaders.delete(r)}})();return this.childrenLoaders.set(r,i),i}static \u0275fac=function(r){return new(r||t)};static \u0275prov=j({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();async function TO(t,e,n,r){let i=await TD(Le(n,()=>t.loadChildren())),o=await nb(tb(i)),s;o instanceof ul||Array.isArray(o)?s=o:s=await e.compileModuleAsync(o),r&&r(t);let c,u,l=!1;return Array.isArray(s)?(u=s,l=!0):(c=s.create(n).injector,u=c.get(Kl,[],{optional:!0,self:!0}).flat()),{routes:u.map(fm),injector:c}}function DO(t){return t&&typeof t=="object"&&"default"in t}function tb(t){return DO(t)?t.default:t}async function nb(t){return t}var pm=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275prov=j({token:t,factory:()=>M(bO),providedIn:"root"})}return t})(),bO=(()=>{class t{shouldProcessUrl(n){return!0}extract(n){return n}merge(n,r){return n}static \u0275fac=function(r){return new(r||t)};static \u0275prov=j({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),rb=new U("");var CO=()=>{},ib=new U(""),ob=(()=>{class t{currentNavigation=ht(null,{equal:()=>!1});currentTransition=null;lastSuccessfulNavigation=ht(null);events=new et;transitionAbortWithErrorSubject=new et;configLoader=M(eb);environmentInjector=M(Oe);destroyRef=M(or);urlSerializer=M(zl);rootContexts=M(ba);location=M(ao);inputBindingEnabled=M(ql,{optional:!0})!==null;titleStrategy=M(XD);options=M(Wl,{optional:!0})||{};paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly";urlHandlingStrategy=M(pm);createViewTransition=M(rb,{optional:!0});navigationErrorHandler=M(ib,{optional:!0});navigationId=0;get hasRequestedNavigation(){return this.navigationId!==0}transitions;afterPreactivation=()=>ne(void 0);rootComponentType=null;destroyed=!1;constructor(){let n=i=>this.events.next(new Zg(i)),r=i=>this.events.next(new Jg(i));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=n,this.destroyRef.onDestroy(()=>{this.destroyed=!0})}complete(){this.transitions?.complete()}handleNavigationRequest(n){let r=++this.navigationId;Dt(()=>{this.transitions?.next(ve(L({},n),{extractedUrl:this.urlHandlingStrategy.extract(n.rawUrl),targetSnapshot:null,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null,id:r}))})}setupNavigations(n){return this.transitions=new We(null),this.transitions.pipe(Ut(r=>r!==null),tn(r=>{let i=!1,o=new AbortController;return ne(r).pipe(tn(s=>{if(this.navigationId>r.id)return this.cancelNavigationTransition(r,"",_t.SupersededByNewNavigation),gt;this.currentTransition=r;let c=this.lastSuccessfulNavigation();this.currentNavigation.set({id:s.id,initialUrl:s.rawUrl,extractedUrl:s.extractedUrl,targetBrowserUrl:typeof s.extras.browserUrl=="string"?this.urlSerializer.parse(s.extras.browserUrl):s.extras.browserUrl,trigger:s.source,extras:s.extras,previousNavigation:c?ve(L({},c),{previousNavigation:null}):null,abort:()=>o.abort()});let u=!n.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),l=s.extras.onSameUrlNavigation??n.onSameUrlNavigation;if(!u&&l!=="reload")return this.events.next(new ur(s.id,this.urlSerializer.serialize(s.rawUrl),"",Ll.IgnoredSameUrlNavigation)),s.resolve(!1),gt;if(this.urlHandlingStrategy.shouldProcessUrl(s.rawUrl))return ne(s).pipe(tn(h=>(this.events.next(new go(h.id,this.urlSerializer.serialize(h.extractedUrl),h.source,h.restoredState)),h.id!==this.navigationId?gt:Promise.resolve(h))),yO(this.environmentInjector,this.configLoader,this.rootComponentType,n.config,this.urlSerializer,this.paramsInheritanceStrategy,o.signal),ut(h=>{r.targetSnapshot=h.targetSnapshot,r.urlAfterRedirects=h.urlAfterRedirects,this.currentNavigation.update(m=>(m.finalUrl=h.urlAfterRedirects,m));let p=new Fl(h.id,this.urlSerializer.serialize(h.extractedUrl),this.urlSerializer.serialize(h.urlAfterRedirects),h.targetSnapshot);this.events.next(p)}));if(u&&this.urlHandlingStrategy.shouldProcessUrl(s.currentRawUrl)){let{id:h,extractedUrl:p,source:m,restoredState:y,extras:C}=s,A=new go(h,this.urlSerializer.serialize(p),m,y);this.events.next(A);let R=LD(this.rootComponentType).snapshot;return this.currentTransition=r=ve(L({},s),{targetSnapshot:R,urlAfterRedirects:p,extras:ve(L({},C),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.update(k=>(k.finalUrl=p,k)),ne(r)}else return this.events.next(new ur(s.id,this.urlSerializer.serialize(s.extractedUrl),"",Ll.IgnoredByUrlHandlingStrategy)),s.resolve(!1),gt}),ut(s=>{let c=new Wg(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot);this.events.next(c)}),ye(s=>(this.currentTransition=r=ve(L({},s),{guards:Pk(s.targetSnapshot,s.currentSnapshot,this.rootContexts)}),r)),Hk(this.environmentInjector,s=>this.events.next(s)),ut(s=>{if(r.guardsResult=s.guardsResult,s.guardsResult&&typeof s.guardsResult!="boolean")throw $l(this.urlSerializer,s.guardsResult);let c=new Kg(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot,!!s.guardsResult);this.events.next(c)}),Ut(s=>s.guardsResult?!0:(this.cancelNavigationTransition(s,"",_t.GuardRejected),!1)),Bg(s=>{if(s.guards.canActivateChecks.length!==0)return ne(s).pipe(ut(c=>{let u=new Qg(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(u)}),tn(c=>{let u=!1;return ne(c).pipe(vO(this.paramsInheritanceStrategy,this.environmentInjector),ut({next:()=>u=!0,complete:()=>{u||this.cancelNavigationTransition(c,"",_t.NoDataFromResolver)}}))}),ut(c=>{let u=new Yg(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(u)}))}),Bg(s=>{let c=l=>{let h=[];if(l.routeConfig?._loadedComponent)l.component=l.routeConfig?._loadedComponent;else if(l.routeConfig?.loadComponent){let p=vo(l)??this.environmentInjector;h.push(this.configLoader.loadComponent(p,l.routeConfig).then(m=>{l.component=m}))}for(let p of l.children)h.push(...c(p));return h},u=c(s.targetSnapshot.root);return u.length===0?ne(s):ke(Promise.all(u).then(()=>s))}),Bg(()=>this.afterPreactivation()),tn(()=>{let{currentSnapshot:s,targetSnapshot:c}=r,u=this.createViewTransition?.(this.environmentInjector,s.root,c.root);return u?ke(u).pipe(ye(()=>r)):ne(r)}),ye(s=>{let c=Sk(n.routeReuseStrategy,s.targetSnapshot,s.currentRouterState);return this.currentTransition=r=ve(L({},s),{targetRouterState:c}),this.currentNavigation.update(u=>(u.targetRouterState=c,u)),r}),ut(()=>{this.events.next(new Ia)}),Mk(this.rootContexts,n.routeReuseStrategy,s=>this.events.next(s),this.inputBindingEnabled),wn(1),Ds(qD(o.signal).pipe(Ut(()=>!i&&!r.targetRouterState),ut(()=>{this.cancelNavigationTransition(r,o.signal.reason+"",_t.Aborted)}))),ut({next:s=>{i=!0,this.currentNavigation.update(c=>(c.abort=CO,c)),this.lastSuccessfulNavigation.set(Dt(this.currentNavigation)),this.events.next(new cr(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects))),this.titleStrategy?.updateTitle(s.targetRouterState.snapshot),s.resolve(!0)},complete:()=>{i=!0}}),Ds(this.transitionAbortWithErrorSubject.pipe(ut(s=>{throw s}))),lf(()=>{o.abort(),i||this.cancelNavigationTransition(r,"",_t.SupersededByNewNavigation),this.currentTransition?.id===r.id&&(this.currentNavigation.set(null),this.currentTransition=null)}),Ts(s=>{if(this.destroyed)return r.resolve(!1),gt;if(i=!0,HD(s))this.events.next(new xn(r.id,this.urlSerializer.serialize(r.extractedUrl),s.message,s.cancellationCode)),Nk(s)?this.events.next(new mo(s.url,s.navigationBehaviorOptions)):r.resolve(!1);else{let c=new Ea(r.id,this.urlSerializer.serialize(r.extractedUrl),s,r.targetSnapshot??void 0);try{let u=Le(this.environmentInjector,()=>this.navigationErrorHandler?.(c));if(u instanceof Ta){let{message:l,cancellationCode:h}=$l(this.urlSerializer,u);this.events.next(new xn(r.id,this.urlSerializer.serialize(r.extractedUrl),l,h)),this.events.next(new mo(u.redirectTo,u.navigationBehaviorOptions))}else throw this.events.next(c),s}catch(u){this.options.resolveNavigationPromiseOnError?r.resolve(!1):r.reject(u)}}return gt}))}))}cancelNavigationTransition(n,r,i){let o=new xn(n.id,this.urlSerializer.serialize(n.extractedUrl),r,i);this.events.next(o),n.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let n=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=Dt(this.currentNavigation),i=r?.targetBrowserUrl??r?.extractedUrl;return n.toString()!==i?.toString()&&!r?.extras.skipLocationChange}static \u0275fac=function(r){return new(r||t)};static \u0275prov=j({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function SO(t){return t!==ya}var AO=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275prov=j({token:t,factory:()=>M(RO),providedIn:"root"})}return t})(),dm=class{shouldDetach(e){return!1}store(e,n){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,n){return e.routeConfig===n.routeConfig}},RO=(()=>{class t extends dm{static \u0275fac=(()=>{let n;return function(i){return(n||(n=Xu(t)))(i||t)}})();static \u0275prov=j({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),gm=(()=>{class t{urlSerializer=M(zl);options=M(Wl,{optional:!0})||{};canceledNavigationResolution=this.options.canceledNavigationResolution||"replace";location=M(ao);urlHandlingStrategy=M(pm);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";currentUrlTree=new dn;getCurrentUrlTree(){return this.currentUrlTree}rawUrlTree=this.currentUrlTree;getRawUrlTree(){return this.rawUrlTree}createBrowserPath({finalUrl:n,initialUrl:r,targetBrowserUrl:i}){let o=n!==void 0?this.urlHandlingStrategy.merge(n,r):r,s=i??o;return s instanceof dn?this.urlSerializer.serialize(s):s}commitTransition({targetRouterState:n,finalUrl:r,initialUrl:i}){r&&n?(this.currentUrlTree=r,this.rawUrlTree=this.urlHandlingStrategy.merge(r,i),this.routerState=n):this.rawUrlTree=i}routerState=LD(null);getRouterState(){return this.routerState}stateMemento=this.createStateMemento();updateStateMemento(){this.stateMemento=this.createStateMemento()}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}resetInternalState({finalUrl:n}){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n??this.rawUrlTree)}static \u0275fac=function(r){return new(r||t)};static \u0275prov=j({token:t,factory:()=>M(sb),providedIn:"root"})}return t})(),sb=(()=>{class t extends gm{currentPageId=0;lastSuccessfulId=-1;restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}registerNonRouterCurrentEntryChangeListener(n){return this.location.subscribe(r=>{r.type==="popstate"&&setTimeout(()=>{n(r.url,r.state,"popstate")})})}handleRouterEvent(n,r){n instanceof go?this.updateStateMemento():n instanceof ur?this.commitTransition(r):n instanceof Fl?this.urlUpdateStrategy==="eager"&&(r.extras.skipLocationChange||this.setBrowserUrl(this.createBrowserPath(r),r)):n instanceof Ia?(this.commitTransition(r),this.urlUpdateStrategy==="deferred"&&!r.extras.skipLocationChange&&this.setBrowserUrl(this.createBrowserPath(r),r)):n instanceof xn&&n.code!==_t.SupersededByNewNavigation&&n.code!==_t.Redirect?this.restoreHistory(r):n instanceof Ea?this.restoreHistory(r,!0):n instanceof cr&&(this.lastSuccessfulId=n.id,this.currentPageId=this.browserPageId)}setBrowserUrl(n,{extras:r,id:i}){let{replaceUrl:o,state:s}=r;if(this.location.isCurrentPathEqualTo(n)||o){let c=this.browserPageId,u=L(L({},s),this.generateNgRouterState(i,c));this.location.replaceState(n,"",u)}else{let c=L(L({},s),this.generateNgRouterState(i,this.browserPageId+1));this.location.go(n,"",c)}}restoreHistory(n,r=!1){if(this.canceledNavigationResolution==="computed"){let i=this.browserPageId,o=this.currentPageId-i;o!==0?this.location.historyGo(o):this.getCurrentUrlTree()===n.finalUrl&&o===0&&(this.resetInternalState(n),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetInternalState(n),this.resetUrlToCurrentUrlTree())}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.getRawUrlTree()),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(n,r){return this.canceledNavigationResolution==="computed"?{navigationId:n,\u0275routerPageId:r}:{navigationId:n}}static \u0275fac=(()=>{let n;return function(i){return(n||(n=Xu(t)))(i||t)}})();static \u0275prov=j({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function ab(t,e){t.events.pipe(Ut(n=>n instanceof cr||n instanceof xn||n instanceof Ea||n instanceof ur),ye(n=>n instanceof cr||n instanceof ur?0:(n instanceof xn?n.code===_t.Redirect||n.code===_t.SupersededByNewNavigation:!1)?2:1),Ut(n=>n!==2),wn(1)).subscribe(()=>{e()})}var NO={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},MO={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},mm=(()=>{class t{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}disposed=!1;nonRouterCurrentEntryChangeSubscription;console=M(gg);stateManager=M(gm);options=M(Wl,{optional:!0})||{};pendingTasks=M(Rn);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";navigationTransitions=M(ob);urlSerializer=M(zl);location=M(ao);urlHandlingStrategy=M(pm);injector=M(Oe);_events=new et;get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}navigated=!1;routeReuseStrategy=M(AO);onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore";config=M(Kl,{optional:!0})?.flat()??[];componentInputBindingEnabled=!!M(ql,{optional:!0});currentNavigation=this.navigationTransitions.currentNavigation.asReadonly();constructor(){this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this).subscribe({error:n=>{this.console.warn(n)}}),this.subscribeToNavigationEvents()}eventsSubscription=new xe;subscribeToNavigationEvents(){let n=this.navigationTransitions.events.subscribe(r=>{try{let i=this.navigationTransitions.currentTransition,o=Dt(this.navigationTransitions.currentNavigation);if(i!==null&&o!==null){if(this.stateManager.handleRouterEvent(r,o),r instanceof xn&&r.code!==_t.Redirect&&r.code!==_t.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof cr)this.navigated=!0;else if(r instanceof mo){let s=r.navigationBehaviorOptions,c=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),u=L({browserUrl:i.extras.browserUrl,info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:i.extras.replaceUrl||this.urlUpdateStrategy==="eager"||SO(i.source)},s);this.scheduleNavigation(c,ya,null,u,{resolve:i.resolve,reject:i.reject,promise:i.promise})}}wk(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortWithErrorSubject.next(i)}});this.eventsSubscription.add(n)}resetRootComponentType(n){this.routerState.root.component=n,this.navigationTransitions.rootComponentType=n}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),ya,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((n,r,i)=>{this.navigateToSyncWithBrowser(n,i,r)})}navigateToSyncWithBrowser(n,r,i){let o={replaceUrl:!0},s=i?.navigationId?i:null;if(i){let u=L({},i);delete u.navigationId,delete u.\u0275routerPageId,Object.keys(u).length!==0&&(o.state=u)}let c=this.parseUrl(n);this.scheduleNavigation(c,r,s,o).catch(u=>{this.disposed||this.injector.get(Tt)(u)})}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return Dt(this.navigationTransitions.currentNavigation)}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(n){this.config=n.map(fm),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this._events.unsubscribe(),this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(n,r={}){let{relativeTo:i,queryParams:o,fragment:s,queryParamsHandling:c,preserveFragment:u}=r,l=u?this.currentUrlTree.fragment:s,h=null;switch(c??this.options.defaultQueryParamsHandling){case"merge":h=L(L({},this.currentUrlTree.queryParams),o);break;case"preserve":h=this.currentUrlTree.queryParams;break;default:h=o||null}h!==null&&(h=this.removeEmptyProps(h));let p;try{let m=i?i.snapshot:this.routerState.snapshot.root;p=PD(m)}catch{(typeof n[0]!="string"||n[0][0]!=="/")&&(n=[]),p=this.currentUrlTree.root}return xD(p,n,h,l??null,this.urlSerializer)}navigateByUrl(n,r={skipLocationChange:!1}){let i=po(n)?n:this.parseUrl(n),o=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(o,ya,null,r)}navigate(n,r={skipLocationChange:!1}){return PO(n),this.navigateByUrl(this.createUrlTree(n,r),r)}serializeUrl(n){return this.urlSerializer.serialize(n)}parseUrl(n){try{return this.urlSerializer.parse(n)}catch{return this.console.warn(Bi(4018,!1)),this.urlSerializer.parse("/")}}isActive(n,r){let i;if(r===!0?i=L({},NO):r===!1?i=L({},MO):i=r,po(n))return fD(this.currentUrlTree,n,i);let o=this.parseUrl(n);return fD(this.currentUrlTree,o,i)}removeEmptyProps(n){return Object.entries(n).reduce((r,[i,o])=>(o!=null&&(r[i]=o),r),{})}scheduleNavigation(n,r,i,o,s){if(this.disposed)return Promise.resolve(!1);let c,u,l;s?(c=s.resolve,u=s.reject,l=s.promise):l=new Promise((p,m)=>{c=p,u=m});let h=this.pendingTasks.add();return ab(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(h))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:n,extras:o,resolve:c,reject:u,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(p=>Promise.reject(p))}static \u0275fac=function(r){return new(r||t)};static \u0275prov=j({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function PO(t){for(let e=0;e<t.length;e++)if(t[e]==null)throw new V(4008,!1)}var xO=new U("");function ym(t,...e){return Bt([{provide:Kl,multi:!0,useValue:t},[],{provide:ii,useFactory:kO},{provide:hl,multi:!0,useFactory:OO},e.map(n=>n.\u0275providers)])}function kO(){return M(mm).routerState.root}function OO(){let t=M(tt);return e=>{let n=t.get(io);if(e!==n.components[0])return;let r=t.get(mm),i=t.get(LO);t.get(FO)===1&&r.initialNavigation(),t.get(VO,null,{optional:!0})?.setUpPreloading(),t.get(xO,null,{optional:!0})?.init(),r.resetRootComponentType(n.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var LO=new U("",{factory:()=>new et}),FO=new U("",{factory:()=>1});var VO=new U("");var cb=()=>{};var db=function(t){let e=[],n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},UO=function(t){let e=[],n=0,r=0;for(;n<t.length;){let i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let o=t[n++];e[r++]=String.fromCharCode((i&31)<<6|o&63)}else if(i>239&&i<365){let o=t[n++],s=t[n++],c=t[n++],u=((i&7)<<18|(o&63)<<12|(s&63)<<6|c&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{let o=t[n++],s=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(o&63)<<6|s&63)}}return e.join("")},Ql={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();let n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){let o=t[i],s=i+1<t.length,c=s?t[i+1]:0,u=i+2<t.length,l=u?t[i+2]:0,h=o>>2,p=(o&3)<<4|c>>4,m=(c&15)<<2|l>>6,y=l&63;u||(y=64,s||(m=64)),r.push(n[h],n[p],n[m],n[y])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(db(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):UO(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();let n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){let o=n[t.charAt(i++)],c=i<t.length?n[t.charAt(i)]:0;++i;let l=i<t.length?n[t.charAt(i)]:64;++i;let p=i<t.length?n[t.charAt(i)]:64;if(++i,o==null||c==null||l==null||p==null)throw new _m;let m=o<<2|c>>4;if(r.push(m),l!==64){let y=c<<4&240|l>>2;if(r.push(y),p!==64){let C=l<<6&192|p;r.push(C)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},_m=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},BO=function(t){let e=db(t);return Ql.encodeByteArray(e,!0)},Aa=function(t){return BO(t).replace(/\./g,"")},Yl=function(t){try{return Ql.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function Im(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var $O=()=>Im().__FIREBASE_DEFAULTS__,HO=()=>{if(typeof process>"u"||typeof process.env>"u")return;let t=process.env.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},zO=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=t&&Yl(t[1]);return e&&JSON.parse(e)},Zl=()=>{try{return cb()||$O()||HO()||zO()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},hb=t=>{var e,n;return(n=(e=Zl())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},fb=t=>{let e=hb(t);if(!e)return;let n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},wm=()=>{var t;return(t=Zl())===null||t===void 0?void 0:t.config},pb=t=>{var e;return(e=Zl())===null||e===void 0?void 0:e[`_${t}`]};var si=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}};function ai(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Tm(t){return(await fetch(t,{credentials:"include"})).ok}function gb(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,o=t.sub||t.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let s=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Aa(JSON.stringify(n)),Aa(JSON.stringify(s)),""].join(".")}var Sa={};function qO(){let t={prod:[],emulator:[]};for(let e of Object.keys(Sa))Sa[e]?t.emulator.push(e):t.prod.push(e);return t}function GO(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}var ub=!1;function Dm(t,e){if(typeof window>"u"||typeof document>"u"||!ai(window.location.host)||Sa[t]===e||Sa[t]||ub)return;Sa[t]=e;function n(m){return`__firebase__banner__${m}`}let r="__firebase__banner",o=qO().prod.length>0;function s(){let m=document.getElementById(r);m&&m.remove()}function c(m){m.style.display="flex",m.style.background="#7faaf0",m.style.position="fixed",m.style.bottom="5px",m.style.left="5px",m.style.padding=".5em",m.style.borderRadius="5px",m.style.alignItems="center"}function u(m,y){m.setAttribute("width","24"),m.setAttribute("id",y),m.setAttribute("height","24"),m.setAttribute("viewBox","0 0 24 24"),m.setAttribute("fill","none"),m.style.marginLeft="-6px"}function l(){let m=document.createElement("span");return m.style.cursor="pointer",m.style.marginLeft="16px",m.style.fontSize="24px",m.innerHTML=" &times;",m.onclick=()=>{ub=!0,s()},m}function h(m,y){m.setAttribute("id",y),m.innerText="Learn more",m.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",m.setAttribute("target","__blank"),m.style.paddingLeft="5px",m.style.textDecoration="underline"}function p(){let m=GO(r),y=n("text"),C=document.getElementById(y)||document.createElement("span"),A=n("learnmore"),R=document.getElementById(A)||document.createElement("a"),k=n("preprendIcon"),$=document.getElementById(k)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(m.created){let Q=m.element;c(Q),h(R,A);let ge=l();u($,k),Q.append($,C,R,ge),document.body.appendChild(Q)}o?(C.innerText="Preview backend disconnected.",$.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):($.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,C.innerText="Preview backend running in this workspace."),C.setAttribute("id",y)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",p):p()}function St(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function mb(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(St())}function WO(){var t;let e=(t=Zl())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function yb(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function vb(){let t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function _b(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Eb(){return!WO()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Ra(){try{return typeof indexedDB=="object"}catch{return!1}}function Ib(){return new Promise((t,e)=>{try{let n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var o;e(((o=i.error)===null||o===void 0?void 0:o.message)||"")}}catch(n){e(n)}})}var KO="FirebaseError",Ot=class t extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=KO,Object.setPrototypeOf(this,t.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Yt.prototype.create)}},Yt=class{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){let r=n[0]||{},i=`${this.service}/${e}`,o=this.errors[e],s=o?QO(o,r):"Error",c=`${this.serviceName}: ${s} (${i}).`;return new Ot(i,c,r)}};function QO(t,e){return t.replace(YO,(n,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var YO=/\{\$([^}]+)}/g;function ci(t,e){if(t===e)return!0;let n=Object.keys(t),r=Object.keys(e);for(let i of n){if(!r.includes(i))return!1;let o=t[i],s=e[i];if(lb(o)&&lb(s)){if(!ci(o,s))return!1}else if(o!==s)return!1}for(let i of r)if(!n.includes(i))return!1;return!0}function lb(t){return t!==null&&typeof t=="object"}function bm(t){let e=[];for(let[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function wb(t,e){let n=new Em(t,e);return n.subscribe.bind(n)}var Em=class{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");ZO(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=vm),i.error===void 0&&(i.error=vm),i.complete===void 0&&(i.complete=vm);let o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function ZO(t,e){if(typeof t!="object"||t===null)return!1;for(let n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function vm(){}var HQ=14400*1e3;function kn(t){return t&&t._delegate?t._delegate:t}var ft=class{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var ui="[DEFAULT]";var Cm=class{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){let r=new si;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;let r=this.normalizeInstanceIdentifier(e?.identifier),i=(n=e?.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(o){if(i)return null;throw o}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(XO(e))try{this.getOrInitializeService({instanceIdentifier:ui})}catch{}for(let[n,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(n);try{let o=this.getOrInitializeService({instanceIdentifier:i});r.resolve(o)}catch{}}}}clearInstance(e=ui){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){let e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ui){return this.instances.has(e)}getOptions(e=ui){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(let[o,s]of this.instancesDeferred.entries()){let c=this.normalizeInstanceIdentifier(o);r===c&&s.resolve(i)}return i}onInit(e,n){var r;let i=this.normalizeInstanceIdentifier(n),o=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;o.add(e),this.onInitCallbacks.set(i,o);let s=this.instances.get(i);return s&&e(s,i),()=>{o.delete(e)}}invokeOnInitCallbacks(e,n){let r=this.onInitCallbacks.get(n);if(r)for(let i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:JO(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=ui){return this.component?this.component.multipleInstances?e:ui:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function JO(t){return t===ui?void 0:t}function XO(t){return t.instantiationMode==="EAGER"}var Jl=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let n=new Cm(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}};var e1=[],te=(function(t){return t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT",t})(te||{}),t1={debug:te.DEBUG,verbose:te.VERBOSE,info:te.INFO,warn:te.WARN,error:te.ERROR,silent:te.SILENT},n1=te.INFO,r1={[te.DEBUG]:"log",[te.VERBOSE]:"log",[te.INFO]:"info",[te.WARN]:"warn",[te.ERROR]:"error"},i1=(t,e,...n)=>{if(e<t.logLevel)return;let r=new Date().toISOString(),i=r1[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},hn=class{constructor(e){this.name=e,this._logLevel=n1,this._logHandler=i1,this._userLogHandler=null,e1.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in te))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?t1[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,te.DEBUG,...e),this._logHandler(this,te.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,te.VERBOSE,...e),this._logHandler(this,te.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,te.INFO,...e),this._logHandler(this,te.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,te.WARN,...e),this._logHandler(this,te.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,te.ERROR,...e),this._logHandler(this,te.ERROR,...e)}};var o1=(t,e)=>e.some(n=>t instanceof n),Tb,Db;function s1(){return Tb||(Tb=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function a1(){return Db||(Db=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var bb=new WeakMap,Am=new WeakMap,Cb=new WeakMap,Sm=new WeakMap,Nm=new WeakMap;function c1(t){let e=new Promise((n,r)=>{let i=()=>{t.removeEventListener("success",o),t.removeEventListener("error",s)},o=()=>{n(fn(t.result)),i()},s=()=>{r(t.error),i()};t.addEventListener("success",o),t.addEventListener("error",s)});return e.then(n=>{n instanceof IDBCursor&&bb.set(n,t)}).catch(()=>{}),Nm.set(e,t),e}function u1(t){if(Am.has(t))return;let e=new Promise((n,r)=>{let i=()=>{t.removeEventListener("complete",o),t.removeEventListener("error",s),t.removeEventListener("abort",s)},o=()=>{n(),i()},s=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",o),t.addEventListener("error",s),t.addEventListener("abort",s)});Am.set(t,e)}var Rm={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Am.get(t);if(e==="objectStoreNames")return t.objectStoreNames||Cb.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return fn(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function Sb(t){Rm=t(Rm)}function l1(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){let r=t.call(Xl(this),e,...n);return Cb.set(r,e.sort?e.sort():[e]),fn(r)}:a1().includes(t)?function(...e){return t.apply(Xl(this),e),fn(bb.get(this))}:function(...e){return fn(t.apply(Xl(this),e))}}function d1(t){return typeof t=="function"?l1(t):(t instanceof IDBTransaction&&u1(t),o1(t,s1())?new Proxy(t,Rm):t)}function fn(t){if(t instanceof IDBRequest)return c1(t);if(Sm.has(t))return Sm.get(t);let e=d1(t);return e!==t&&(Sm.set(t,e),Nm.set(e,t)),e}var Xl=t=>Nm.get(t);function Rb(t,e,{blocked:n,upgrade:r,blocking:i,terminated:o}={}){let s=indexedDB.open(t,e),c=fn(s);return r&&s.addEventListener("upgradeneeded",u=>{r(fn(s.result),u.oldVersion,u.newVersion,fn(s.transaction),u)}),n&&s.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),c.then(u=>{o&&u.addEventListener("close",()=>o()),i&&u.addEventListener("versionchange",l=>i(l.oldVersion,l.newVersion,l))}).catch(()=>{}),c}var h1=["get","getKey","getAll","getAllKeys","count"],f1=["put","add","delete","clear"],Mm=new Map;function Ab(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Mm.get(e))return Mm.get(e);let n=e.replace(/FromIndex$/,""),r=e!==n,i=f1.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||h1.includes(n)))return;let o=async function(s,...c){let u=this.transaction(s,i?"readwrite":"readonly"),l=u.store;return r&&(l=l.index(c.shift())),(await Promise.all([l[n](...c),i&&u.done]))[0]};return Mm.set(e,o),o}Sb(t=>ve(L({},t),{get:(e,n,r)=>Ab(e,n)||t.get(e,n,r),has:(e,n)=>!!Ab(e,n)||t.has(e,n)}));var xm=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(p1(n)){let r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}};function p1(t){let e=t.getComponent();return e?.type==="VERSION"}var km="@firebase/app",Nb="0.13.2";var On=new hn("@firebase/app"),g1="@firebase/app-compat",m1="@firebase/analytics-compat",y1="@firebase/analytics",v1="@firebase/app-check-compat",_1="@firebase/app-check",E1="@firebase/auth",I1="@firebase/auth-compat",w1="@firebase/database",T1="@firebase/data-connect",D1="@firebase/database-compat",b1="@firebase/functions",C1="@firebase/functions-compat",S1="@firebase/installations",A1="@firebase/installations-compat",R1="@firebase/messaging",N1="@firebase/messaging-compat",M1="@firebase/performance",P1="@firebase/performance-compat",x1="@firebase/remote-config",k1="@firebase/remote-config-compat",O1="@firebase/storage",L1="@firebase/storage-compat",F1="@firebase/firestore",V1="@firebase/ai",j1="@firebase/firestore-compat",U1="firebase",B1="11.10.0";var Om="[DEFAULT]",$1={[km]:"fire-core",[g1]:"fire-core-compat",[y1]:"fire-analytics",[m1]:"fire-analytics-compat",[_1]:"fire-app-check",[v1]:"fire-app-check-compat",[E1]:"fire-auth",[I1]:"fire-auth-compat",[w1]:"fire-rtdb",[T1]:"fire-data-connect",[D1]:"fire-rtdb-compat",[b1]:"fire-fn",[C1]:"fire-fn-compat",[S1]:"fire-iid",[A1]:"fire-iid-compat",[R1]:"fire-fcm",[N1]:"fire-fcm-compat",[M1]:"fire-perf",[P1]:"fire-perf-compat",[x1]:"fire-rc",[k1]:"fire-rc-compat",[O1]:"fire-gcs",[L1]:"fire-gcs-compat",[F1]:"fire-fst",[j1]:"fire-fst-compat",[V1]:"fire-vertex","fire-js":"fire-js",[U1]:"fire-js-all"};var Na=new Map,H1=new Map,Lm=new Map;function Mb(t,e){try{t.container.addComponent(e)}catch(n){On.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Zt(t){let e=t.name;if(Lm.has(e))return On.debug(`There were multiple attempts to register component ${e}.`),!1;Lm.set(e,t);for(let n of Na.values())Mb(n,t);for(let n of H1.values())Mb(n,t);return!0}function ed(t,e){let n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Ln(t){return t==null?!1:t.settings!==void 0}var z1={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},lr=new Yt("app","Firebase",z1);var Fm=class{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new ft("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw lr.create("app-deleted",{appName:this._name})}};var Eo=B1;function Um(t,e={}){let n=t;typeof e!="object"&&(e={name:e});let r=Object.assign({name:Om,automaticDataCollectionEnabled:!0},e),i=r.name;if(typeof i!="string"||!i)throw lr.create("bad-app-name",{appName:String(i)});if(n||(n=wm()),!n)throw lr.create("no-options");let o=Na.get(i);if(o){if(ci(n,o.options)&&ci(r,o.config))return o;throw lr.create("duplicate-app",{appName:i})}let s=new Jl(i);for(let u of Lm.values())s.addComponent(u);let c=new Fm(n,r,s);return Na.set(i,c),c}function Io(t=Om){let e=Na.get(t);if(!e&&t===Om&&wm())return Um();if(!e)throw lr.create("no-app",{appName:t});return e}function td(){return Array.from(Na.values())}function Se(t,e,n){var r;let i=(r=$1[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);let o=i.match(/\s|\//),s=e.match(/\s|\//);if(o||s){let c=[`Unable to register library "${i}" with version "${e}":`];o&&c.push(`library name "${i}" contains illegal characters (whitespace or "/")`),o&&s&&c.push("and"),s&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),On.warn(c.join(" "));return}Zt(new ft(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}var q1="firebase-heartbeat-database",G1=1,Ma="firebase-heartbeat-store",Pm=null;function Ob(){return Pm||(Pm=Rb(q1,G1,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Ma)}catch(n){console.warn(n)}}}}).catch(t=>{throw lr.create("idb-open",{originalErrorMessage:t.message})})),Pm}async function W1(t){try{let n=(await Ob()).transaction(Ma),r=await n.objectStore(Ma).get(Lb(t));return await n.done,r}catch(e){if(e instanceof Ot)On.warn(e.message);else{let n=lr.create("idb-get",{originalErrorMessage:e?.message});On.warn(n.message)}}}async function Pb(t,e){try{let r=(await Ob()).transaction(Ma,"readwrite");await r.objectStore(Ma).put(e,Lb(t)),await r.done}catch(n){if(n instanceof Ot)On.warn(n.message);else{let r=lr.create("idb-set",{originalErrorMessage:n?.message});On.warn(r.message)}}}function Lb(t){return`${t.name}!${t.options.appId}`}var K1=1024,Q1=30,Vm=class{constructor(e){this.container=e,this._heartbeatsCache=null;let n=this.container.getProvider("app").getImmediate();this._storage=new jm(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{let i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=xb();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(s=>s.date===o))return;if(this._heartbeatsCache.heartbeats.push({date:o,agent:i}),this._heartbeatsCache.heartbeats.length>Q1){let s=Z1(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(s,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){On.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let n=xb(),{heartbeatsToSend:r,unsentEntries:i}=Y1(this._heartbeatsCache.heartbeats),o=Aa(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(n){return On.warn(n),""}}};function xb(){return new Date().toISOString().substring(0,10)}function Y1(t,e=K1){let n=[],r=t.slice();for(let i of t){let o=n.find(s=>s.agent===i.agent);if(o){if(o.dates.push(i.date),kb(n)>e){o.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),kb(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}var jm=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Ra()?Ib().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){let n=await W1(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){let i=await this.read();return Pb(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){let i=await this.read();return Pb(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}};function kb(t){return Aa(JSON.stringify({version:2,heartbeats:t})).length}function Z1(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}function J1(t){Zt(new ft("platform-logger",e=>new xm(e),"PRIVATE")),Zt(new ft("heartbeat",e=>new Vm(e),"PRIVATE")),Se(km,Nb,t),Se(km,Nb,"esm2017"),Se("fire-js","")}J1("");var X1="firebase",eL="11.10.0";Se(X1,eL,"app");function Fb(t){t===void 0&&(t=M(tt));let e=t.get(Zi);return n=>new J(r=>{let i=e.add(),o=!1;function s(){o||(i(),o=!0)}let c=n.subscribe({next:u=>{r.next(u),s()},complete:()=>{r.complete(),s()},error:u=>{r.error(u),s()}});return c.add(()=>{r.unsubscribe(),s()}),c})}var di=new Ui("ANGULARFIRE2_VERSION");function rd(t,e,n){if(e){if(e.length===1)return e[0];let o=e.filter(s=>s.app===n);if(o.length===1)return o[0]}return n.container.getProvider(t).getImmediate({optional:!0})}var To=(t,e)=>{let n=e?[e]:td(),r=[];return n.forEach(i=>{i.container.getProvider(t).instances.forEach(s=>{r.includes(s)||r.push(s)})}),r},wo=(function(t){return t[t.SILENT=0]="SILENT",t[t.WARN=1]="WARN",t[t.VERBOSE=2]="VERBOSE",t})(wo||{}),Vb=Dg()&&typeof Zone<"u"?wo.WARN:wo.SILENT;var nd=class{zone;delegate;constructor(e,n=of){this.zone=e,this.delegate=n}now(){return this.delegate.now()}schedule(e,n,r){let i=this.zone,o=function(s){i?i.runGuarded(()=>{e.apply(this,[s])}):e.apply(this,[s])};return this.delegate.schedule(o,n,r)}},hi=(()=>{class t{outsideAngular;insideAngular;constructor(){let n=M(De);this.outsideAngular=n.runOutsideAngular(()=>new nd(typeof Zone>"u"?void 0:Zone.current)),this.insideAngular=n.run(()=>new nd(typeof Zone>"u"?void 0:Zone.current,rf))}static \u0275fac=function(r){return new(r||t)};static \u0275prov=j({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),jb=!1;function tL(t,e){!jb&&(Vb>wo.SILENT||Dg())&&(jb=!0,console.warn("Calling Firebase APIs outside of an Injection context may destabilize your application leading to subtle change-detection and hydration bugs. Find more at https://github.com/angular/angularfire/blob/main/docs/zones.md")),Vb>=e&&console.warn(`Firebase API called outside injection context: ${t.name}`)}function nL(t){let e=M(De,{optional:!0});return e?e.runOutsideAngular(()=>t()):t()}function li(t){let e=M(De,{optional:!0});return e?e.run(()=>t()):t()}var rL=(t,e,n)=>(...r)=>(e&&setTimeout(e,0),Le(n,()=>li(()=>t.apply(void 0,r)))),dr=(t,e,n)=>(n||=e?wo.WARN:wo.VERBOSE,function(){let r,i=arguments,o,s,c;try{o=M(hi),s=M(Zi),c=M(Oe)}catch{return tL(t,n),t.apply(this,i)}for(let l=0;l<arguments.length;l++)typeof i[l]=="function"&&(e&&(r||=li(()=>s.add())),i[l]=rL(i[l],r,c));let u=nL(()=>t.apply(this,i));return e?u instanceof J?u.pipe(Zn(o.outsideAngular),Yn(o.insideAngular),Fb(c)):u instanceof Promise?li(()=>{let l=s.add();return new Promise((h,p)=>{u.then(m=>Le(c,()=>li(()=>h(m))),m=>Le(c,()=>li(()=>p(m)))).finally(l)})}):typeof u=="function"&&r?function(){return setTimeout(r,0),u.apply(this,arguments)}:li(()=>u):u instanceof J?u.pipe(Zn(o.outsideAngular),Yn(o.insideAngular)):li(()=>u)});var fi=class{constructor(e){return e}},Pa=class{constructor(){return td()}};function iL(t){return t&&t.length===1?t[0]:new fi(Io())}var Bm=new U("angularfire2._apps"),oL={provide:fi,useFactory:iL,deps:[[new Nn,Bm]]},sL={provide:Pa,deps:[[new Nn,Bm]]};function aL(t){return(e,n)=>{let r=n.get(Qr);Se("angularfire",di.full,"core"),Se("angularfire",di.full,"app"),Se("angular",Sf.full,r.toString());let i=e.runOutsideAngular(()=>t(n));return new fi(i)}}function Ub(t,...e){return Bt([oL,sL,{provide:Bm,useFactory:aL(t),multi:!0,deps:[De,tt,hi,...e]}])}var Bb=dr(Um,!0);var cL=new Map,uL={activated:!1,tokenObservers:[]},lL={initialized:!1,enabled:!1};function Jt(t){return cL.get(t)||Object.assign({},uL)}function qb(){return lL}var dL="https://content-firebaseappcheck.googleapis.com/v1";var hL="exchangeDebugToken",$b={OFFSET_DURATION:300*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:960*1e3},HY=1440*60*1e3;var zm=class{constructor(e,n,r,i,o){if(this.operation=e,this.retryPolicy=n,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=o,this.pending=null,this.nextErrorWaitInterval=i,i>o)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}async process(e){this.stop();try{this.pending=new si,this.pending.promise.catch(n=>{}),await fL(this.getNextRun(e)),this.pending.resolve(),await this.pending.promise,this.pending=new si,this.pending.promise.catch(n=>{}),await this.operation(),this.pending.resolve(),await this.pending.promise,this.process(!0).catch(()=>{})}catch(n){this.retryPolicy(n)?this.process(!1).catch(()=>{}):this.stop()}}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{let n=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),n}}};function fL(t){return new Promise(e=>{setTimeout(e,t)})}var pL={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.","initial-throttle":"{$httpStatus} error. Attempts allowed again after {$time}",throttled:"Requests throttled due to previous {$httpStatus} error. Attempts allowed again after {$time}"},hr=new Yt("appCheck","AppCheck",pL);function Gb(t){if(!Jt(t).activated)throw hr.create("use-before-activation",{appName:t.name})}async function Wb({url:t,body:e},n){let r={"Content-Type":"application/json"},i=n.getImmediate({optional:!0});if(i){let p=await i.getHeartbeatsHeader();p&&(r["X-Firebase-Client"]=p)}let o={method:"POST",body:JSON.stringify(e),headers:r},s;try{s=await fetch(t,o)}catch(p){throw hr.create("fetch-network-error",{originalErrorMessage:p?.message})}if(s.status!==200)throw hr.create("fetch-status-error",{httpStatus:s.status});let c;try{c=await s.json()}catch(p){throw hr.create("fetch-parse-error",{originalErrorMessage:p?.message})}let u=c.ttl.match(/^([\d.]+)(s)$/);if(!u||!u[2]||isNaN(Number(u[1])))throw hr.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${c.ttl}`});let l=Number(u[1])*1e3,h=Date.now();return{token:c.token,expireTimeMillis:h+l,issuedAtTimeMillis:h}}function Kb(t,e){let{projectId:n,appId:r,apiKey:i}=t.options;return{url:`${dL}/projects/${n}/apps/${r}:${hL}?key=${i}`,body:{debug_token:e}}}var gL="firebase-app-check-database",mL=1,qm="firebase-app-check-store";var id=null;function yL(){return id||(id=new Promise((t,e)=>{try{let n=indexedDB.open(gL,mL);n.onsuccess=r=>{t(r.target.result)},n.onerror=r=>{var i;e(hr.create("storage-open",{originalErrorMessage:(i=r.target.error)===null||i===void 0?void 0:i.message}))},n.onupgradeneeded=r=>{let i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore(qm,{keyPath:"compositeKey"})}}}catch(n){e(hr.create("storage-open",{originalErrorMessage:n?.message}))}}),id)}function vL(t,e){return _L(EL(t),e)}async function _L(t,e){let r=(await yL()).transaction(qm,"readwrite"),o=r.objectStore(qm).put({compositeKey:t,value:e});return new Promise((s,c)=>{o.onsuccess=u=>{s()},r.onerror=u=>{var l;c(hr.create("storage-set",{originalErrorMessage:(l=u.target.error)===null||l===void 0?void 0:l.message}))}})}function EL(t){return`${t.options.appId}-${t.name}`}var xa=new hn("@firebase/app-check");function $m(t,e){return Ra()?vL(t,e).catch(n=>{xa.warn(`Failed to write token to IndexedDB. Error: ${n}`)}):Promise.resolve()}function Qb(){return qb().enabled}async function Yb(){let t=qb();if(t.enabled&&t.token)return t.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)}var IL={error:"UNKNOWN_ERROR"};function wL(t){return Ql.encodeString(JSON.stringify(t),!1)}async function Gm(t,e=!1,n=!1){let r=t.app;Gb(r);let i=Jt(r),o=i.token,s;if(o&&!ka(o)&&(i.token=void 0,o=void 0),!o){let l=await i.cachedTokenPromise;l&&(ka(l)?o=l:await $m(r,void 0))}if(!e&&o&&ka(o))return{token:o.token};let c=!1;if(Qb())try{i.exchangeTokenPromise||(i.exchangeTokenPromise=Wb(Kb(r,await Yb()),t.heartbeatServiceProvider).finally(()=>{i.exchangeTokenPromise=void 0}),c=!0);let l=await i.exchangeTokenPromise;return await $m(r,l),i.token=l,{token:l.token}}catch(l){return l.code==="appCheck/throttled"||l.code==="appCheck/initial-throttle"?xa.warn(l.message):n&&xa.error(l),Hm(l)}try{i.exchangeTokenPromise||(i.exchangeTokenPromise=i.provider.getToken().finally(()=>{i.exchangeTokenPromise=void 0}),c=!0),o=await Jt(r).exchangeTokenPromise}catch(l){l.code==="appCheck/throttled"||l.code==="appCheck/initial-throttle"?xa.warn(l.message):n&&xa.error(l),s=l}let u;return o?s?ka(o)?u={token:o.token,internalError:s}:u=Hm(s):(u={token:o.token},i.token=o,await $m(r,o)):u=Hm(s),c&&CL(r,u),u}async function TL(t){let e=t.app;Gb(e);let{provider:n}=Jt(e);if(Qb()){let r=await Yb(),{token:i}=await Wb(Kb(e,r),t.heartbeatServiceProvider);return{token:i}}else{let{token:r}=await n.getToken();return{token:r}}}function DL(t,e,n,r){let{app:i}=t,o=Jt(i),s={next:n,error:r,type:e};if(o.tokenObservers=[...o.tokenObservers,s],o.token&&ka(o.token)){let c=o.token;Promise.resolve().then(()=>{n({token:c.token}),Hb(t)}).catch(()=>{})}o.cachedTokenPromise.then(()=>Hb(t))}function Zb(t,e){let n=Jt(t),r=n.tokenObservers.filter(i=>i.next!==e);r.length===0&&n.tokenRefresher&&n.tokenRefresher.isRunning()&&n.tokenRefresher.stop(),n.tokenObservers=r}function Hb(t){let{app:e}=t,n=Jt(e),r=n.tokenRefresher;r||(r=bL(t),n.tokenRefresher=r),!r.isRunning()&&n.isTokenAutoRefreshEnabled&&r.start()}function bL(t){let{app:e}=t;return new zm(async()=>{let n=Jt(e),r;if(n.token?r=await Gm(t,!0):r=await Gm(t),r.error)throw r.error;if(r.internalError)throw r.internalError},()=>!0,()=>{let n=Jt(e);if(n.token){let r=n.token.issuedAtTimeMillis+(n.token.expireTimeMillis-n.token.issuedAtTimeMillis)*.5+3e5,i=n.token.expireTimeMillis-300*1e3;return r=Math.min(r,i),Math.max(0,r-Date.now())}else return 0},$b.RETRIAL_MIN_WAIT,$b.RETRIAL_MAX_WAIT)}function CL(t,e){let n=Jt(t).tokenObservers;for(let r of n)try{r.type==="EXTERNAL"&&e.error!=null?r.error(e.error):r.next(e)}catch{}}function ka(t){return t.expireTimeMillis-Date.now()>0}function Hm(t){return{token:wL(IL),error:t}}var Wm=class{constructor(e,n){this.app=e,this.heartbeatServiceProvider=n}_delete(){let{tokenObservers:e}=Jt(this.app);for(let n of e)Zb(this.app,n.next);return Promise.resolve()}};function SL(t,e){return new Wm(t,e)}function AL(t){return{getToken:e=>Gm(t,e),getLimitedUseToken:()=>TL(t),addTokenListener:e=>DL(t,"INTERNAL",e),removeTokenListener:e=>Zb(t.app,e)}}var RL="@firebase/app-check",NL="0.10.1";var ML="app-check",zb="app-check-internal";function PL(){Zt(new ft(ML,t=>{let e=t.getProvider("app").getImmediate(),n=t.getProvider("heartbeat");return SL(e,n)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,e,n)=>{t.getProvider(zb).initialize()})),Zt(new ft(zb,t=>{let e=t.getProvider("app-check").getImmediate();return AL(e)},"PUBLIC").setInstantiationMode("EXPLICIT")),Se(RL,NL)}PL();var xL="app-check";var od=class{constructor(){return To(xL)}};var kL=["localhost","0.0.0.0","127.0.0.1"],tZ=typeof window<"u"&&kL.includes(window.location.hostname);function oC(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var sC=oC,aC=new Yt("auth","Firebase",oC());var ud=new hn("@firebase/auth");function OL(t,...e){ud.logLevel<=te.WARN&&ud.warn(`Auth (${Eo}): ${t}`,...e)}function ad(t,...e){ud.logLevel<=te.ERROR&&ud.error(`Auth (${Eo}): ${t}`,...e)}function Jb(t,...e){throw oy(t,...e)}function iy(t,...e){return oy(t,...e)}function cC(t,e,n){let r=Object.assign(Object.assign({},sC()),{[e]:n});return new Yt("auth","Firebase",r).create(e,{appName:t.name})}function cd(t){return cC(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function oy(t,...e){if(typeof t!="string"){let n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return aC.create(t,...e)}function ce(t,e,...n){if(!t)throw oy(e,...n)}function Oa(t){let e="INTERNAL ASSERTION FAILED: "+t;throw ad(e),new Error(e)}function ld(t,e){t||Oa(e)}function LL(){return Xb()==="http:"||Xb()==="https:"}function Xb(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}function FL(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(LL()||vb()||"connection"in navigator)?navigator.onLine:!0}function VL(){if(typeof navigator>"u")return null;let t=navigator;return t.languages&&t.languages[0]||t.language||null}var mi=class{constructor(e,n){this.shortDelay=e,this.longDelay=n,ld(n>e,"Short delay should be less than long delay!"),this.isMobile=mb()||_b()}get(){return FL()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function jL(t,e){ld(t.emulator,"Emulator should always be set here");let{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}var dd=class{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Oa("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Oa("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Oa("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var UL={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var BL=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],$L=new mi(3e4,6e4);function uC(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function md(t,e,n,r,i={}){return lC(t,i,async()=>{let o={},s={};r&&(e==="GET"?s=r:o={body:JSON.stringify(r)});let c=bm(Object.assign({key:t.config.apiKey},s)).slice(1),u=await t._getAdditionalHeaders();u["Content-Type"]="application/json",t.languageCode&&(u["X-Firebase-Locale"]=t.languageCode);let l=Object.assign({method:e,headers:u},o);return yb()||(l.referrerPolicy="no-referrer"),t.emulatorConfig&&ai(t.emulatorConfig.host)&&(l.credentials="include"),dd.fetch()(await dC(t,t.config.apiHost,n,c),l)})}async function lC(t,e,n){t._canInitEmulator=!1;let r=Object.assign(Object.assign({},UL),e);try{let i=new Ym(t),o=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();let s=await o.json();if("needConfirmation"in s)throw sd(t,"account-exists-with-different-credential",s);if(o.ok&&!("errorMessage"in s))return s;{let c=o.ok?s.errorMessage:s.error.message,[u,l]=c.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw sd(t,"credential-already-in-use",s);if(u==="EMAIL_EXISTS")throw sd(t,"email-already-in-use",s);if(u==="USER_DISABLED")throw sd(t,"user-disabled",s);let h=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(l)throw cC(t,h,l);Jb(t,h)}}catch(i){if(i instanceof Ot)throw i;Jb(t,"network-request-failed",{message:String(i)})}}async function dC(t,e,n,r){let i=`${e}${n}?${r}`,o=t,s=o.config.emulator?jL(t.config,i):`${t.config.apiScheme}://${i}`;return BL.includes(n)&&(await o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(s).toString():s}var Ym=class{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(iy(this.auth,"network-request-failed")),$L.get())})}};function sd(t,e,n){let r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);let i=iy(t,e,r);return i.customData._tokenResponse=n,i}async function HL(t,e){return md(t,"POST","/v1/accounts:delete",e)}async function hd(t,e){return md(t,"POST","/v1/accounts:lookup",e)}function La(t){if(t)try{let e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function sy(t,e=!1){let n=kn(t),r=await n.getIdToken(e),i=hC(r);ce(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");let o=typeof i.firebase=="object"?i.firebase:void 0,s=o?.sign_in_provider;return{claims:i,token:r,authTime:La(Km(i.auth_time)),issuedAtTime:La(Km(i.iat)),expirationTime:La(Km(i.exp)),signInProvider:s||null,signInSecondFactor:o?.sign_in_second_factor||null}}function Km(t){return Number(t)*1e3}function hC(t){let[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return ad("JWT malformed, contained fewer than 3 sections"),null;try{let i=Yl(n);return i?JSON.parse(i):(ad("Failed to decode base64 JWT payload"),null)}catch(i){return ad("Caught error parsing JWT payload as JSON",i?.toString()),null}}function eC(t){let e=hC(t);return ce(e,"internal-error"),ce(typeof e.exp<"u","internal-error"),ce(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function Zm(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Ot&&zL(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function zL({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}var Jm=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){let r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;let i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;let n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}};var Va=class{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=La(this.lastLoginAt),this.creationTime=La(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};async function fd(t){var e;let n=t.auth,r=await t.getIdToken(),i=await Zm(t,hd(n,{idToken:r}));ce(i?.users.length,n,"internal-error");let o=i.users[0];t._notifyReloadListener(o);let s=!((e=o.providerUserInfo)===null||e===void 0)&&e.length?fC(o.providerUserInfo):[],c=qL(t.providerData,s),u=t.isAnonymous,l=!(t.email&&o.passwordHash)&&!c?.length,h=u?l:!1,p={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:c,metadata:new Va(o.createdAt,o.lastLoginAt),isAnonymous:h};Object.assign(t,p)}async function ay(t){let e=kn(t);await fd(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function qL(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function fC(t){return t.map(e=>{var{providerId:n}=e,r=sf(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}async function GL(t,e){let n=await lC(t,{},async()=>{let r=bm({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:o}=t.config,s=await dC(t,i,"/v1/token",`key=${o}`),c=await t._getAdditionalHeaders();c["Content-Type"]="application/x-www-form-urlencoded";let u={method:"POST",headers:c,body:r};return t.emulatorConfig&&ai(t.emulatorConfig.host)&&(u.credentials="include"),dd.fetch()(s,u)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function WL(t,e){return md(t,"POST","/v2/accounts:revokeToken",uC(t,e))}var Fa=class t{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ce(e.idToken,"internal-error"),ce(typeof e.idToken<"u","internal-error"),ce(typeof e.refreshToken<"u","internal-error");let n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):eC(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){ce(e.length!==0,"internal-error");let n=eC(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(ce(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){let{accessToken:r,refreshToken:i,expiresIn:o}=await GL(e,n);this.updateTokensAndExpiration(r,i,Number(o))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){let{refreshToken:r,accessToken:i,expirationTime:o}=n,s=new t;return r&&(ce(typeof r=="string","internal-error",{appName:e}),s.refreshToken=r),i&&(ce(typeof i=="string","internal-error",{appName:e}),s.accessToken=i),o&&(ce(typeof o=="number","internal-error",{appName:e}),s.expirationTime=o),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new t,this.toJSON())}_performRefresh(){return Oa("not implemented")}};function fr(t,e){ce(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}var pi=class t{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,o=sf(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Jm(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new Va(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){let n=await Zm(this,this.stsTokenManager.getToken(this.auth,e));return ce(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return sy(this,e)}reload(){return ay(this)}_assign(e){this!==e&&(ce(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let n=new t(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){ce(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await fd(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Ln(this.auth.app))return Promise.reject(cd(this.auth));let e=await this.getIdToken();return await Zm(this,HL(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,o,s,c,u,l,h;let p=(r=n.displayName)!==null&&r!==void 0?r:void 0,m=(i=n.email)!==null&&i!==void 0?i:void 0,y=(o=n.phoneNumber)!==null&&o!==void 0?o:void 0,C=(s=n.photoURL)!==null&&s!==void 0?s:void 0,A=(c=n.tenantId)!==null&&c!==void 0?c:void 0,R=(u=n._redirectEventId)!==null&&u!==void 0?u:void 0,k=(l=n.createdAt)!==null&&l!==void 0?l:void 0,$=(h=n.lastLoginAt)!==null&&h!==void 0?h:void 0,{uid:Q,emailVerified:ge,isAnonymous:ot,providerData:he,stsTokenManager:w}=n;ce(Q&&w,e,"internal-error");let v=Fa.fromJSON(this.name,w);ce(typeof Q=="string",e,"internal-error"),fr(p,e.name),fr(m,e.name),ce(typeof ge=="boolean",e,"internal-error"),ce(typeof ot=="boolean",e,"internal-error"),fr(y,e.name),fr(C,e.name),fr(A,e.name),fr(R,e.name),fr(k,e.name),fr($,e.name);let E=new t({uid:Q,auth:e,email:m,emailVerified:ge,displayName:p,isAnonymous:ot,photoURL:C,phoneNumber:y,tenantId:A,stsTokenManager:v,createdAt:k,lastLoginAt:$});return he&&Array.isArray(he)&&(E.providerData=he.map(I=>Object.assign({},I))),R&&(E._redirectEventId=R),E}static async _fromIdTokenResponse(e,n,r=!1){let i=new Fa;i.updateFromServerResponse(n);let o=new t({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await fd(o),o}static async _fromGetAccountInfoResponse(e,n,r){let i=n.users[0];ce(i.localId!==void 0,"internal-error");let o=i.providerUserInfo!==void 0?fC(i.providerUserInfo):[],s=!(i.email&&i.passwordHash)&&!o?.length,c=new Fa;c.updateFromIdToken(r);let u=new t({uid:i.localId,auth:e,stsTokenManager:c,isAnonymous:s}),l={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new Va(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!o?.length};return Object.assign(u,l),u}};var tC=new Map;function gi(t){ld(t instanceof Function,"Expected a class definition");let e=tC.get(t);return e?(ld(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,tC.set(t,e),e)}var KL=(()=>{class t{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(n,r){this.storage[n]=r}async _get(n){let r=this.storage[n];return r===void 0?null:r}async _remove(n){delete this.storage[n]}_addListener(n,r){}_removeListener(n,r){}}return t.type="NONE",t})(),Xm=KL;function Qm(t,e,n){return`firebase:${t}:${e}:${n}`}var pd=class t{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;let{config:i,name:o}=this.auth;this.fullUserKey=Qm(this.userKey,i.apiKey,o),this.fullPersistenceKey=Qm("persistence",i.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){let e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){let n=await hd(this.auth,{idToken:e}).catch(()=>{});return n?pi._fromGetAccountInfoResponse(this.auth,n,e):null}return pi._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;let n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new t(gi(Xm),e,r);let i=(await Promise.all(n.map(async l=>{if(await l._isAvailable())return l}))).filter(l=>l),o=i[0]||gi(Xm),s=Qm(r,e.config.apiKey,e.name),c=null;for(let l of n)try{let h=await l._get(s);if(h){let p;if(typeof h=="string"){let m=await hd(e,{idToken:h}).catch(()=>{});if(!m)break;p=await pi._fromGetAccountInfoResponse(e,m,h)}else p=pi._fromJSON(e,h);l!==o&&(c=p),o=l;break}}catch{}let u=i.filter(l=>l._shouldAllowMigration);return!o._shouldAllowMigration||!u.length?new t(o,e,r):(o=u[0],c&&await o._set(s,c.toJSON()),await Promise.all(n.map(async l=>{if(l!==o)try{await l._remove(s)}catch{}})),new t(o,e,r))}};function nC(t){let e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(JL(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(QL(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(eF(e))return"Blackberry";if(tF(e))return"Webos";if(YL(e))return"Safari";if((e.includes("chrome/")||ZL(e))&&!e.includes("edge/"))return"Chrome";if(XL(e))return"Android";{let n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if(r?.length===2)return r[1]}return"Other"}function QL(t=St()){return/firefox\//i.test(t)}function YL(t=St()){let e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function ZL(t=St()){return/crios\//i.test(t)}function JL(t=St()){return/iemobile/i.test(t)}function XL(t=St()){return/android/i.test(t)}function eF(t=St()){return/blackberry/i.test(t)}function tF(t=St()){return/webos/i.test(t)}function pC(t,e=[]){let n;switch(t){case"Browser":n=nC(St());break;case"Worker":n=`${nC(St())}-${t}`;break;default:n=t}let r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Eo}/${r}`}var ey=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){let r=o=>new Promise((s,c)=>{try{let u=e(o);s(u)}catch(u){c(u)}});r.onAbort=n,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;let n=[];try{for(let r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(let i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}};async function nF(t,e={}){return md(t,"GET","/v2/passwordPolicy",uC(t,e))}var rF=6,ty=class{constructor(e){var n,r,i,o;let s=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=s.minPasswordLength)!==null&&n!==void 0?n:rF,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),s.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),s.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),s.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),s.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(o=e.forceUpgradeOnSignin)!==null&&o!==void 0?o:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,o,s,c;let u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,u),this.validatePasswordCharacterOptions(e,u),u.isValid&&(u.isValid=(n=u.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),u.isValid&&(u.isValid=(r=u.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),u.isValid&&(u.isValid=(i=u.containsLowercaseLetter)!==null&&i!==void 0?i:!0),u.isValid&&(u.isValid=(o=u.containsUppercaseLetter)!==null&&o!==void 0?o:!0),u.isValid&&(u.isValid=(s=u.containsNumericCharacter)!==null&&s!==void 0?s:!0),u.isValid&&(u.isValid=(c=u.containsNonAlphanumericCharacter)!==null&&c!==void 0?c:!0),u}validatePasswordLengthOptions(e,n){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}};var ny=class{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new gd(this),this.idTokenSubscription=new gd(this),this.beforeStateQueue=new ey(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=aC,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=gi(n)),this._initializationPromise=this.queue(async()=>{var r,i,o;if(!this._deleted&&(this.persistenceManager=await pd.create(this,e),(r=this._resolvePersistenceManagerAvailable)===null||r===void 0||r.call(this),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((o=this.currentUser)===null||o===void 0?void 0:o.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;let e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{let n=await hd(this,{idToken:e}),r=await pi._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(Ln(this.app)){let s=this.app.settings.authIdToken;return s?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(s).then(c,c))}):this.directlySetCurrentUser(null)}let r=await this.assertedPersistence.getCurrentUser(),i=r,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();let s=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,c=i?._redirectEventId,u=await this.tryRedirectSignIn(e);(!s||s===c)&&u?.user&&(i=u.user,o=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(i)}catch(s){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(s))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return ce(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await fd(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=VL()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Ln(this.app))return Promise.reject(cd(this));let n=e?kn(e):null;return n&&ce(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&ce(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Ln(this.app)?Promise.reject(cd(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Ln(this.app)?Promise.reject(cd(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(gi(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();let n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){let e=await nF(this),n=new ty(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Yt("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){let n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await WL(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){let r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){let n=e&&gi(e)||this._popupRedirectResolver;ce(n,this,"argument-error"),this.redirectPersistenceManager=await pd.create(this,[gi(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};let o=typeof n=="function"?n:n.next.bind(n),s=!1,c=this._isInitialized?Promise.resolve():this._initializationPromise;if(ce(c,this,"internal-error"),c.then(()=>{s||o(this.currentUser)}),typeof n=="function"){let u=e.addObserver(n,r,i);return()=>{s=!0,u()}}else{let u=e.addObserver(n);return()=>{s=!0,u()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ce(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=pC(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;let n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);let r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);let i=await this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n}async _getAppCheckToken(){var e;if(Ln(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;let n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n?.error&&OL(`Error while retrieving App Check token: ${n.error}`),n?.token}};function iF(t){return kn(t)}var gd=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=wb(n=>this.observer=n)}get next(){return ce(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var oF={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function sF(t){oF=t}function aF(t){return`__${t}${Math.floor(Math.random()*1e6)}`}function cF(t,e){let n=e?.persistence||[],r=(Array.isArray(n)?n:[n]).map(gi);e?.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e?.popupRedirectResolver)}var fZ=aF("rcb"),pZ=new mi(3e4,6e4);var gZ=new mi(2e3,1e4);var mZ=600*1e3;var yZ=new mi(3e4,6e4);var vZ=new mi(5e3,15e3);var _Z=encodeURIComponent("fac");var rC="@firebase/auth",iC="1.10.8";var ry=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let n=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){ce(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function uF(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function lF(t){Zt(new ft("auth",(e,{options:n})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:s,authDomain:c}=r.options;ce(s&&!s.includes(":"),"invalid-api-key",{appName:r.name});let u={apiKey:s,authDomain:c,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:pC(t)},l=new ny(r,i,o,u);return cF(l,n),l},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Zt(new ft("auth-internal",e=>{let n=iF(e.getProvider("auth").getImmediate());return(r=>new ry(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Se(rC,iC,uF(t)),Se(rC,iC,"esm2017")}var dF=300,EZ=pb("authIdTokenMaxAge")||dF;function hF(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}sF({loadJS(t){return new Promise((e,n)=>{let r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{let o=iy("internal-error");o.customData=i,n(o)},r.type="text/javascript",r.charset="UTF-8",hF().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});lF("Browser");var lV="auth";var yd=class{constructor(){return To(lV)}};var gC=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},mC={};var Fn,cy;(function(){var t;function e(w,v){function E(){}E.prototype=v.prototype,w.D=v.prototype,w.prototype=new E,w.prototype.constructor=w,w.C=function(I,T,b){for(var _=Array(arguments.length-2),_n=2;_n<arguments.length;_n++)_[_n-2]=arguments[_n];return v.prototype[T].apply(I,_)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(w,v,E){E||(E=0);var I=Array(16);if(typeof v=="string")for(var T=0;16>T;++T)I[T]=v.charCodeAt(E++)|v.charCodeAt(E++)<<8|v.charCodeAt(E++)<<16|v.charCodeAt(E++)<<24;else for(T=0;16>T;++T)I[T]=v[E++]|v[E++]<<8|v[E++]<<16|v[E++]<<24;v=w.g[0],E=w.g[1],T=w.g[2];var b=w.g[3],_=v+(b^E&(T^b))+I[0]+3614090360&4294967295;v=E+(_<<7&4294967295|_>>>25),_=b+(T^v&(E^T))+I[1]+3905402710&4294967295,b=v+(_<<12&4294967295|_>>>20),_=T+(E^b&(v^E))+I[2]+606105819&4294967295,T=b+(_<<17&4294967295|_>>>15),_=E+(v^T&(b^v))+I[3]+3250441966&4294967295,E=T+(_<<22&4294967295|_>>>10),_=v+(b^E&(T^b))+I[4]+4118548399&4294967295,v=E+(_<<7&4294967295|_>>>25),_=b+(T^v&(E^T))+I[5]+1200080426&4294967295,b=v+(_<<12&4294967295|_>>>20),_=T+(E^b&(v^E))+I[6]+2821735955&4294967295,T=b+(_<<17&4294967295|_>>>15),_=E+(v^T&(b^v))+I[7]+4249261313&4294967295,E=T+(_<<22&4294967295|_>>>10),_=v+(b^E&(T^b))+I[8]+1770035416&4294967295,v=E+(_<<7&4294967295|_>>>25),_=b+(T^v&(E^T))+I[9]+2336552879&4294967295,b=v+(_<<12&4294967295|_>>>20),_=T+(E^b&(v^E))+I[10]+4294925233&4294967295,T=b+(_<<17&4294967295|_>>>15),_=E+(v^T&(b^v))+I[11]+2304563134&4294967295,E=T+(_<<22&4294967295|_>>>10),_=v+(b^E&(T^b))+I[12]+1804603682&4294967295,v=E+(_<<7&4294967295|_>>>25),_=b+(T^v&(E^T))+I[13]+4254626195&4294967295,b=v+(_<<12&4294967295|_>>>20),_=T+(E^b&(v^E))+I[14]+2792965006&4294967295,T=b+(_<<17&4294967295|_>>>15),_=E+(v^T&(b^v))+I[15]+1236535329&4294967295,E=T+(_<<22&4294967295|_>>>10),_=v+(T^b&(E^T))+I[1]+4129170786&4294967295,v=E+(_<<5&4294967295|_>>>27),_=b+(E^T&(v^E))+I[6]+3225465664&4294967295,b=v+(_<<9&4294967295|_>>>23),_=T+(v^E&(b^v))+I[11]+643717713&4294967295,T=b+(_<<14&4294967295|_>>>18),_=E+(b^v&(T^b))+I[0]+3921069994&4294967295,E=T+(_<<20&4294967295|_>>>12),_=v+(T^b&(E^T))+I[5]+3593408605&4294967295,v=E+(_<<5&4294967295|_>>>27),_=b+(E^T&(v^E))+I[10]+38016083&4294967295,b=v+(_<<9&4294967295|_>>>23),_=T+(v^E&(b^v))+I[15]+3634488961&4294967295,T=b+(_<<14&4294967295|_>>>18),_=E+(b^v&(T^b))+I[4]+3889429448&4294967295,E=T+(_<<20&4294967295|_>>>12),_=v+(T^b&(E^T))+I[9]+568446438&4294967295,v=E+(_<<5&4294967295|_>>>27),_=b+(E^T&(v^E))+I[14]+3275163606&4294967295,b=v+(_<<9&4294967295|_>>>23),_=T+(v^E&(b^v))+I[3]+4107603335&4294967295,T=b+(_<<14&4294967295|_>>>18),_=E+(b^v&(T^b))+I[8]+1163531501&4294967295,E=T+(_<<20&4294967295|_>>>12),_=v+(T^b&(E^T))+I[13]+2850285829&4294967295,v=E+(_<<5&4294967295|_>>>27),_=b+(E^T&(v^E))+I[2]+4243563512&4294967295,b=v+(_<<9&4294967295|_>>>23),_=T+(v^E&(b^v))+I[7]+1735328473&4294967295,T=b+(_<<14&4294967295|_>>>18),_=E+(b^v&(T^b))+I[12]+2368359562&4294967295,E=T+(_<<20&4294967295|_>>>12),_=v+(E^T^b)+I[5]+4294588738&4294967295,v=E+(_<<4&4294967295|_>>>28),_=b+(v^E^T)+I[8]+2272392833&4294967295,b=v+(_<<11&4294967295|_>>>21),_=T+(b^v^E)+I[11]+1839030562&4294967295,T=b+(_<<16&4294967295|_>>>16),_=E+(T^b^v)+I[14]+4259657740&4294967295,E=T+(_<<23&4294967295|_>>>9),_=v+(E^T^b)+I[1]+2763975236&4294967295,v=E+(_<<4&4294967295|_>>>28),_=b+(v^E^T)+I[4]+1272893353&4294967295,b=v+(_<<11&4294967295|_>>>21),_=T+(b^v^E)+I[7]+4139469664&4294967295,T=b+(_<<16&4294967295|_>>>16),_=E+(T^b^v)+I[10]+3200236656&4294967295,E=T+(_<<23&4294967295|_>>>9),_=v+(E^T^b)+I[13]+681279174&4294967295,v=E+(_<<4&4294967295|_>>>28),_=b+(v^E^T)+I[0]+3936430074&4294967295,b=v+(_<<11&4294967295|_>>>21),_=T+(b^v^E)+I[3]+3572445317&4294967295,T=b+(_<<16&4294967295|_>>>16),_=E+(T^b^v)+I[6]+76029189&4294967295,E=T+(_<<23&4294967295|_>>>9),_=v+(E^T^b)+I[9]+3654602809&4294967295,v=E+(_<<4&4294967295|_>>>28),_=b+(v^E^T)+I[12]+3873151461&4294967295,b=v+(_<<11&4294967295|_>>>21),_=T+(b^v^E)+I[15]+530742520&4294967295,T=b+(_<<16&4294967295|_>>>16),_=E+(T^b^v)+I[2]+3299628645&4294967295,E=T+(_<<23&4294967295|_>>>9),_=v+(T^(E|~b))+I[0]+4096336452&4294967295,v=E+(_<<6&4294967295|_>>>26),_=b+(E^(v|~T))+I[7]+1126891415&4294967295,b=v+(_<<10&4294967295|_>>>22),_=T+(v^(b|~E))+I[14]+2878612391&4294967295,T=b+(_<<15&4294967295|_>>>17),_=E+(b^(T|~v))+I[5]+4237533241&4294967295,E=T+(_<<21&4294967295|_>>>11),_=v+(T^(E|~b))+I[12]+1700485571&4294967295,v=E+(_<<6&4294967295|_>>>26),_=b+(E^(v|~T))+I[3]+2399980690&4294967295,b=v+(_<<10&4294967295|_>>>22),_=T+(v^(b|~E))+I[10]+4293915773&4294967295,T=b+(_<<15&4294967295|_>>>17),_=E+(b^(T|~v))+I[1]+2240044497&4294967295,E=T+(_<<21&4294967295|_>>>11),_=v+(T^(E|~b))+I[8]+1873313359&4294967295,v=E+(_<<6&4294967295|_>>>26),_=b+(E^(v|~T))+I[15]+4264355552&4294967295,b=v+(_<<10&4294967295|_>>>22),_=T+(v^(b|~E))+I[6]+2734768916&4294967295,T=b+(_<<15&4294967295|_>>>17),_=E+(b^(T|~v))+I[13]+1309151649&4294967295,E=T+(_<<21&4294967295|_>>>11),_=v+(T^(E|~b))+I[4]+4149444226&4294967295,v=E+(_<<6&4294967295|_>>>26),_=b+(E^(v|~T))+I[11]+3174756917&4294967295,b=v+(_<<10&4294967295|_>>>22),_=T+(v^(b|~E))+I[2]+718787259&4294967295,T=b+(_<<15&4294967295|_>>>17),_=E+(b^(T|~v))+I[9]+3951481745&4294967295,w.g[0]=w.g[0]+v&4294967295,w.g[1]=w.g[1]+(T+(_<<21&4294967295|_>>>11))&4294967295,w.g[2]=w.g[2]+T&4294967295,w.g[3]=w.g[3]+b&4294967295}r.prototype.u=function(w,v){v===void 0&&(v=w.length);for(var E=v-this.blockSize,I=this.B,T=this.h,b=0;b<v;){if(T==0)for(;b<=E;)i(this,w,b),b+=this.blockSize;if(typeof w=="string"){for(;b<v;)if(I[T++]=w.charCodeAt(b++),T==this.blockSize){i(this,I),T=0;break}}else for(;b<v;)if(I[T++]=w[b++],T==this.blockSize){i(this,I),T=0;break}}this.h=T,this.o+=v},r.prototype.v=function(){var w=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);w[0]=128;for(var v=1;v<w.length-8;++v)w[v]=0;var E=8*this.o;for(v=w.length-8;v<w.length;++v)w[v]=E&255,E/=256;for(this.u(w),w=Array(16),v=E=0;4>v;++v)for(var I=0;32>I;I+=8)w[E++]=this.g[v]>>>I&255;return w};function o(w,v){var E=c;return Object.prototype.hasOwnProperty.call(E,w)?E[w]:E[w]=v(w)}function s(w,v){this.h=v;for(var E=[],I=!0,T=w.length-1;0<=T;T--){var b=w[T]|0;I&&b==v||(E[T]=b,I=!1)}this.g=E}var c={};function u(w){return-128<=w&&128>w?o(w,function(v){return new s([v|0],0>v?-1:0)}):new s([w|0],0>w?-1:0)}function l(w){if(isNaN(w)||!isFinite(w))return p;if(0>w)return R(l(-w));for(var v=[],E=1,I=0;w>=E;I++)v[I]=w/E|0,E*=4294967296;return new s(v,0)}function h(w,v){if(w.length==0)throw Error("number format error: empty string");if(v=v||10,2>v||36<v)throw Error("radix out of range: "+v);if(w.charAt(0)=="-")return R(h(w.substring(1),v));if(0<=w.indexOf("-"))throw Error('number format error: interior "-" character');for(var E=l(Math.pow(v,8)),I=p,T=0;T<w.length;T+=8){var b=Math.min(8,w.length-T),_=parseInt(w.substring(T,T+b),v);8>b?(b=l(Math.pow(v,b)),I=I.j(b).add(l(_))):(I=I.j(E),I=I.add(l(_)))}return I}var p=u(0),m=u(1),y=u(16777216);t=s.prototype,t.m=function(){if(A(this))return-R(this).m();for(var w=0,v=1,E=0;E<this.g.length;E++){var I=this.i(E);w+=(0<=I?I:4294967296+I)*v,v*=4294967296}return w},t.toString=function(w){if(w=w||10,2>w||36<w)throw Error("radix out of range: "+w);if(C(this))return"0";if(A(this))return"-"+R(this).toString(w);for(var v=l(Math.pow(w,6)),E=this,I="";;){var T=ge(E,v).g;E=k(E,T.j(v));var b=((0<E.g.length?E.g[0]:E.h)>>>0).toString(w);if(E=T,C(E))return b+I;for(;6>b.length;)b="0"+b;I=b+I}},t.i=function(w){return 0>w?0:w<this.g.length?this.g[w]:this.h};function C(w){if(w.h!=0)return!1;for(var v=0;v<w.g.length;v++)if(w.g[v]!=0)return!1;return!0}function A(w){return w.h==-1}t.l=function(w){return w=k(this,w),A(w)?-1:C(w)?0:1};function R(w){for(var v=w.g.length,E=[],I=0;I<v;I++)E[I]=~w.g[I];return new s(E,~w.h).add(m)}t.abs=function(){return A(this)?R(this):this},t.add=function(w){for(var v=Math.max(this.g.length,w.g.length),E=[],I=0,T=0;T<=v;T++){var b=I+(this.i(T)&65535)+(w.i(T)&65535),_=(b>>>16)+(this.i(T)>>>16)+(w.i(T)>>>16);I=_>>>16,b&=65535,_&=65535,E[T]=_<<16|b}return new s(E,E[E.length-1]&-2147483648?-1:0)};function k(w,v){return w.add(R(v))}t.j=function(w){if(C(this)||C(w))return p;if(A(this))return A(w)?R(this).j(R(w)):R(R(this).j(w));if(A(w))return R(this.j(R(w)));if(0>this.l(y)&&0>w.l(y))return l(this.m()*w.m());for(var v=this.g.length+w.g.length,E=[],I=0;I<2*v;I++)E[I]=0;for(I=0;I<this.g.length;I++)for(var T=0;T<w.g.length;T++){var b=this.i(I)>>>16,_=this.i(I)&65535,_n=w.i(T)>>>16,Xo=w.i(T)&65535;E[2*I+2*T]+=_*Xo,$(E,2*I+2*T),E[2*I+2*T+1]+=b*Xo,$(E,2*I+2*T+1),E[2*I+2*T+1]+=_*_n,$(E,2*I+2*T+1),E[2*I+2*T+2]+=b*_n,$(E,2*I+2*T+2)}for(I=0;I<v;I++)E[I]=E[2*I+1]<<16|E[2*I];for(I=v;I<2*v;I++)E[I]=0;return new s(E,0)};function $(w,v){for(;(w[v]&65535)!=w[v];)w[v+1]+=w[v]>>>16,w[v]&=65535,v++}function Q(w,v){this.g=w,this.h=v}function ge(w,v){if(C(v))throw Error("division by zero");if(C(w))return new Q(p,p);if(A(w))return v=ge(R(w),v),new Q(R(v.g),R(v.h));if(A(v))return v=ge(w,R(v)),new Q(R(v.g),v.h);if(30<w.g.length){if(A(w)||A(v))throw Error("slowDivide_ only works with positive integers.");for(var E=m,I=v;0>=I.l(w);)E=ot(E),I=ot(I);var T=he(E,1),b=he(I,1);for(I=he(I,2),E=he(E,2);!C(I);){var _=b.add(I);0>=_.l(w)&&(T=T.add(E),b=_),I=he(I,1),E=he(E,1)}return v=k(w,T.j(v)),new Q(T,v)}for(T=p;0<=w.l(v);){for(E=Math.max(1,Math.floor(w.m()/v.m())),I=Math.ceil(Math.log(E)/Math.LN2),I=48>=I?1:Math.pow(2,I-48),b=l(E),_=b.j(v);A(_)||0<_.l(w);)E-=I,b=l(E),_=b.j(v);C(b)&&(b=m),T=T.add(b),w=k(w,_)}return new Q(T,w)}t.A=function(w){return ge(this,w).h},t.and=function(w){for(var v=Math.max(this.g.length,w.g.length),E=[],I=0;I<v;I++)E[I]=this.i(I)&w.i(I);return new s(E,this.h&w.h)},t.or=function(w){for(var v=Math.max(this.g.length,w.g.length),E=[],I=0;I<v;I++)E[I]=this.i(I)|w.i(I);return new s(E,this.h|w.h)},t.xor=function(w){for(var v=Math.max(this.g.length,w.g.length),E=[],I=0;I<v;I++)E[I]=this.i(I)^w.i(I);return new s(E,this.h^w.h)};function ot(w){for(var v=w.g.length+1,E=[],I=0;I<v;I++)E[I]=w.i(I)<<1|w.i(I-1)>>>31;return new s(E,w.h)}function he(w,v){var E=v>>5;v%=32;for(var I=w.g.length-E,T=[],b=0;b<I;b++)T[b]=0<v?w.i(b+E)>>>v|w.i(b+E+1)<<32-v:w.i(b+E);return new s(T,w.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,cy=mC.Md5=r,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.A,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=l,s.fromString=h,Fn=mC.Integer=s}).apply(typeof gC<"u"?gC:typeof self<"u"?self:typeof window<"u"?window:{});var vd=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Vn={};var uy,dV,Do,ly,ja,_d,dy,hy,fy;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(a,d,f){return a==Array.prototype||a==Object.prototype||(a[d]=f.value),a};function n(a){a=[typeof globalThis=="object"&&globalThis,a,typeof window=="object"&&window,typeof self=="object"&&self,typeof vd=="object"&&vd];for(var d=0;d<a.length;++d){var f=a[d];if(f&&f.Math==Math)return f}throw Error("Cannot find global object")}var r=n(this);function i(a,d){if(d)e:{var f=r;a=a.split(".");for(var g=0;g<a.length-1;g++){var D=a[g];if(!(D in f))break e;f=f[D]}a=a[a.length-1],g=f[a],d=d(g),d!=g&&d!=null&&e(f,a,{configurable:!0,writable:!0,value:d})}}function o(a,d){a instanceof String&&(a+="");var f=0,g=!1,D={next:function(){if(!g&&f<a.length){var S=f++;return{value:d(S,a[S]),done:!1}}return g=!0,{done:!0,value:void 0}}};return D[Symbol.iterator]=function(){return D},D}i("Array.prototype.values",function(a){return a||function(){return o(this,function(d,f){return f})}});var s=s||{},c=this||self;function u(a){var d=typeof a;return d=d!="object"?d:a?Array.isArray(a)?"array":d:"null",d=="array"||d=="object"&&typeof a.length=="number"}function l(a){var d=typeof a;return d=="object"&&a!=null||d=="function"}function h(a,d,f){return a.call.apply(a.bind,arguments)}function p(a,d,f){if(!a)throw Error();if(2<arguments.length){var g=Array.prototype.slice.call(arguments,2);return function(){var D=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(D,g),a.apply(d,D)}}return function(){return a.apply(d,arguments)}}function m(a,d,f){return m=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:p,m.apply(null,arguments)}function y(a,d){var f=Array.prototype.slice.call(arguments,1);return function(){var g=f.slice();return g.push.apply(g,arguments),a.apply(this,g)}}function C(a,d){function f(){}f.prototype=d.prototype,a.aa=d.prototype,a.prototype=new f,a.prototype.constructor=a,a.Qb=function(g,D,S){for(var P=Array(arguments.length-2),me=2;me<arguments.length;me++)P[me-2]=arguments[me];return d.prototype[D].apply(g,P)}}function A(a){let d=a.length;if(0<d){let f=Array(d);for(let g=0;g<d;g++)f[g]=a[g];return f}return[]}function R(a,d){for(let f=1;f<arguments.length;f++){let g=arguments[f];if(u(g)){let D=a.length||0,S=g.length||0;a.length=D+S;for(let P=0;P<S;P++)a[D+P]=g[P]}else a.push(g)}}class k{constructor(d,f){this.i=d,this.j=f,this.h=0,this.g=null}get(){let d;return 0<this.h?(this.h--,d=this.g,this.g=d.next,d.next=null):d=this.i(),d}}function $(a){return/^[\s\xa0]*$/.test(a)}function Q(){var a=c.navigator;return a&&(a=a.userAgent)?a:""}function ge(a){return ge[" "](a),a}ge[" "]=function(){};var ot=Q().indexOf("Gecko")!=-1&&!(Q().toLowerCase().indexOf("webkit")!=-1&&Q().indexOf("Edge")==-1)&&!(Q().indexOf("Trident")!=-1||Q().indexOf("MSIE")!=-1)&&Q().indexOf("Edge")==-1;function he(a,d,f){for(let g in a)d.call(f,a[g],g,a)}function w(a,d){for(let f in a)d.call(void 0,a[f],f,a)}function v(a){let d={};for(let f in a)d[f]=a[f];return d}let E="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function I(a,d){let f,g;for(let D=1;D<arguments.length;D++){g=arguments[D];for(f in g)a[f]=g[f];for(let S=0;S<E.length;S++)f=E[S],Object.prototype.hasOwnProperty.call(g,f)&&(a[f]=g[f])}}function T(a){var d=1;a=a.split(":");let f=[];for(;0<d&&a.length;)f.push(a.shift()),d--;return a.length&&f.push(a.join(":")),f}function b(a){c.setTimeout(()=>{throw a},0)}function _(){var a=gh;let d=null;return a.g&&(d=a.g,a.g=a.g.next,a.g||(a.h=null),d.next=null),d}class _n{constructor(){this.h=this.g=null}add(d,f){let g=Xo.get();g.set(d,f),this.h?this.h.next=g:this.g=g,this.h=g}}var Xo=new k(()=>new PA,a=>a.reset());class PA{constructor(){this.next=this.g=this.h=null}set(d,f){this.h=d,this.g=f,this.next=null}reset(){this.next=this.g=this.h=null}}let es,ts=!1,gh=new _n,d_=()=>{let a=c.Promise.resolve(void 0);es=()=>{a.then(xA)}};var xA=()=>{for(var a;a=_();){try{a.h.call(a.g)}catch(f){b(f)}var d=Xo;d.j(a),100>d.h&&(d.h++,a.next=d.g,d.g=a)}ts=!1};function qn(){this.s=this.s,this.C=this.C}qn.prototype.s=!1,qn.prototype.ma=function(){this.s||(this.s=!0,this.N())},qn.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Qe(a,d){this.type=a,this.g=this.target=d,this.defaultPrevented=!1}Qe.prototype.h=function(){this.defaultPrevented=!0};var kA=(function(){if(!c.addEventListener||!Object.defineProperty)return!1;var a=!1,d=Object.defineProperty({},"passive",{get:function(){a=!0}});try{let f=()=>{};c.addEventListener("test",f,d),c.removeEventListener("test",f,d)}catch{}return a})();function ns(a,d){if(Qe.call(this,a?a.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,a){var f=this.type=a.type,g=a.changedTouches&&a.changedTouches.length?a.changedTouches[0]:null;if(this.target=a.target||a.srcElement,this.g=d,d=a.relatedTarget){if(ot){e:{try{ge(d.nodeName);var D=!0;break e}catch{}D=!1}D||(d=null)}}else f=="mouseover"?d=a.fromElement:f=="mouseout"&&(d=a.toElement);this.relatedTarget=d,g?(this.clientX=g.clientX!==void 0?g.clientX:g.pageX,this.clientY=g.clientY!==void 0?g.clientY:g.pageY,this.screenX=g.screenX||0,this.screenY=g.screenY||0):(this.clientX=a.clientX!==void 0?a.clientX:a.pageX,this.clientY=a.clientY!==void 0?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0),this.button=a.button,this.key=a.key||"",this.ctrlKey=a.ctrlKey,this.altKey=a.altKey,this.shiftKey=a.shiftKey,this.metaKey=a.metaKey,this.pointerId=a.pointerId||0,this.pointerType=typeof a.pointerType=="string"?a.pointerType:OA[a.pointerType]||"",this.state=a.state,this.i=a,a.defaultPrevented&&ns.aa.h.call(this)}}C(ns,Qe);var OA={2:"touch",3:"pen",4:"mouse"};ns.prototype.h=function(){ns.aa.h.call(this);var a=this.i;a.preventDefault?a.preventDefault():a.returnValue=!1};var rs="closure_listenable_"+(1e6*Math.random()|0),LA=0;function FA(a,d,f,g,D){this.listener=a,this.proxy=null,this.src=d,this.type=f,this.capture=!!g,this.ha=D,this.key=++LA,this.da=this.fa=!1}function lc(a){a.da=!0,a.listener=null,a.proxy=null,a.src=null,a.ha=null}function dc(a){this.src=a,this.g={},this.h=0}dc.prototype.add=function(a,d,f,g,D){var S=a.toString();a=this.g[S],a||(a=this.g[S]=[],this.h++);var P=yh(a,d,g,D);return-1<P?(d=a[P],f||(d.fa=!1)):(d=new FA(d,this.src,S,!!g,D),d.fa=f,a.push(d)),d};function mh(a,d){var f=d.type;if(f in a.g){var g=a.g[f],D=Array.prototype.indexOf.call(g,d,void 0),S;(S=0<=D)&&Array.prototype.splice.call(g,D,1),S&&(lc(d),a.g[f].length==0&&(delete a.g[f],a.h--))}}function yh(a,d,f,g){for(var D=0;D<a.length;++D){var S=a[D];if(!S.da&&S.listener==d&&S.capture==!!f&&S.ha==g)return D}return-1}var vh="closure_lm_"+(1e6*Math.random()|0),_h={};function h_(a,d,f,g,D){if(g&&g.once)return p_(a,d,f,g,D);if(Array.isArray(d)){for(var S=0;S<d.length;S++)h_(a,d[S],f,g,D);return null}return f=Th(f),a&&a[rs]?a.K(d,f,l(g)?!!g.capture:!!g,D):f_(a,d,f,!1,g,D)}function f_(a,d,f,g,D,S){if(!d)throw Error("Invalid event type");var P=l(D)?!!D.capture:!!D,me=Ih(a);if(me||(a[vh]=me=new dc(a)),f=me.add(d,f,g,P,S),f.proxy)return f;if(g=VA(),f.proxy=g,g.src=a,g.listener=f,a.addEventListener)kA||(D=P),D===void 0&&(D=!1),a.addEventListener(d.toString(),g,D);else if(a.attachEvent)a.attachEvent(m_(d.toString()),g);else if(a.addListener&&a.removeListener)a.addListener(g);else throw Error("addEventListener and attachEvent are unavailable.");return f}function VA(){function a(f){return d.call(a.src,a.listener,f)}let d=jA;return a}function p_(a,d,f,g,D){if(Array.isArray(d)){for(var S=0;S<d.length;S++)p_(a,d[S],f,g,D);return null}return f=Th(f),a&&a[rs]?a.L(d,f,l(g)?!!g.capture:!!g,D):f_(a,d,f,!0,g,D)}function g_(a,d,f,g,D){if(Array.isArray(d))for(var S=0;S<d.length;S++)g_(a,d[S],f,g,D);else g=l(g)?!!g.capture:!!g,f=Th(f),a&&a[rs]?(a=a.i,d=String(d).toString(),d in a.g&&(S=a.g[d],f=yh(S,f,g,D),-1<f&&(lc(S[f]),Array.prototype.splice.call(S,f,1),S.length==0&&(delete a.g[d],a.h--)))):a&&(a=Ih(a))&&(d=a.g[d.toString()],a=-1,d&&(a=yh(d,f,g,D)),(f=-1<a?d[a]:null)&&Eh(f))}function Eh(a){if(typeof a!="number"&&a&&!a.da){var d=a.src;if(d&&d[rs])mh(d.i,a);else{var f=a.type,g=a.proxy;d.removeEventListener?d.removeEventListener(f,g,a.capture):d.detachEvent?d.detachEvent(m_(f),g):d.addListener&&d.removeListener&&d.removeListener(g),(f=Ih(d))?(mh(f,a),f.h==0&&(f.src=null,d[vh]=null)):lc(a)}}}function m_(a){return a in _h?_h[a]:_h[a]="on"+a}function jA(a,d){if(a.da)a=!0;else{d=new ns(d,this);var f=a.listener,g=a.ha||a.src;a.fa&&Eh(a),a=f.call(g,d)}return a}function Ih(a){return a=a[vh],a instanceof dc?a:null}var wh="__closure_events_fn_"+(1e9*Math.random()>>>0);function Th(a){return typeof a=="function"?a:(a[wh]||(a[wh]=function(d){return a.handleEvent(d)}),a[wh])}function Ye(){qn.call(this),this.i=new dc(this),this.M=this,this.F=null}C(Ye,qn),Ye.prototype[rs]=!0,Ye.prototype.removeEventListener=function(a,d,f,g){g_(this,a,d,f,g)};function st(a,d){var f,g=a.F;if(g)for(f=[];g;g=g.F)f.push(g);if(a=a.M,g=d.type||d,typeof d=="string")d=new Qe(d,a);else if(d instanceof Qe)d.target=d.target||a;else{var D=d;d=new Qe(g,a),I(d,D)}if(D=!0,f)for(var S=f.length-1;0<=S;S--){var P=d.g=f[S];D=hc(P,g,!0,d)&&D}if(P=d.g=a,D=hc(P,g,!0,d)&&D,D=hc(P,g,!1,d)&&D,f)for(S=0;S<f.length;S++)P=d.g=f[S],D=hc(P,g,!1,d)&&D}Ye.prototype.N=function(){if(Ye.aa.N.call(this),this.i){var a=this.i,d;for(d in a.g){for(var f=a.g[d],g=0;g<f.length;g++)lc(f[g]);delete a.g[d],a.h--}}this.F=null},Ye.prototype.K=function(a,d,f,g){return this.i.add(String(a),d,!1,f,g)},Ye.prototype.L=function(a,d,f,g){return this.i.add(String(a),d,!0,f,g)};function hc(a,d,f,g){if(d=a.i.g[String(d)],!d)return!0;d=d.concat();for(var D=!0,S=0;S<d.length;++S){var P=d[S];if(P&&!P.da&&P.capture==f){var me=P.listener,Ge=P.ha||P.src;P.fa&&mh(a.i,P),D=me.call(Ge,g)!==!1&&D}}return D&&!g.defaultPrevented}function y_(a,d,f){if(typeof a=="function")f&&(a=m(a,f));else if(a&&typeof a.handleEvent=="function")a=m(a.handleEvent,a);else throw Error("Invalid listener argument");return 2147483647<Number(d)?-1:c.setTimeout(a,d||0)}function v_(a){a.g=y_(()=>{a.g=null,a.i&&(a.i=!1,v_(a))},a.l);let d=a.h;a.h=null,a.m.apply(null,d)}class UA extends qn{constructor(d,f){super(),this.m=d,this.l=f,this.h=null,this.i=!1,this.g=null}j(d){this.h=arguments,this.g?this.i=!0:v_(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function is(a){qn.call(this),this.h=a,this.g={}}C(is,qn);var __=[];function E_(a){he(a.g,function(d,f){this.g.hasOwnProperty(f)&&Eh(d)},a),a.g={}}is.prototype.N=function(){is.aa.N.call(this),E_(this)},is.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Dh=c.JSON.stringify,BA=c.JSON.parse,$A=class{stringify(a){return c.JSON.stringify(a,void 0)}parse(a){return c.JSON.parse(a,void 0)}};function bh(){}bh.prototype.h=null;function I_(a){return a.h||(a.h=a.i())}function w_(){}var os={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Ch(){Qe.call(this,"d")}C(Ch,Qe);function Sh(){Qe.call(this,"c")}C(Sh,Qe);var _r={},T_=null;function fc(){return T_=T_||new Ye}_r.La="serverreachability";function D_(a){Qe.call(this,_r.La,a)}C(D_,Qe);function ss(a){let d=fc();st(d,new D_(d))}_r.STAT_EVENT="statevent";function b_(a,d){Qe.call(this,_r.STAT_EVENT,a),this.stat=d}C(b_,Qe);function at(a){let d=fc();st(d,new b_(d,a))}_r.Ma="timingevent";function C_(a,d){Qe.call(this,_r.Ma,a),this.size=d}C(C_,Qe);function as(a,d){if(typeof a!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){a()},d)}function cs(){this.g=!0}cs.prototype.xa=function(){this.g=!1};function HA(a,d,f,g,D,S){a.info(function(){if(a.g)if(S)for(var P="",me=S.split("&"),Ge=0;Ge<me.length;Ge++){var se=me[Ge].split("=");if(1<se.length){var Ze=se[0];se=se[1];var Je=Ze.split("_");P=2<=Je.length&&Je[1]=="type"?P+(Ze+"="+se+"&"):P+(Ze+"=redacted&")}}else P=null;else P=S;return"XMLHTTP REQ ("+g+") [attempt "+D+"]: "+d+`
`+f+`
`+P})}function zA(a,d,f,g,D,S,P){a.info(function(){return"XMLHTTP RESP ("+g+") [ attempt "+D+"]: "+d+`
`+f+`
`+S+" "+P})}function Di(a,d,f,g){a.info(function(){return"XMLHTTP TEXT ("+d+"): "+GA(a,f)+(g?" "+g:"")})}function qA(a,d){a.info(function(){return"TIMEOUT: "+d})}cs.prototype.info=function(){};function GA(a,d){if(!a.g)return d;if(!d)return null;try{var f=JSON.parse(d);if(f){for(a=0;a<f.length;a++)if(Array.isArray(f[a])){var g=f[a];if(!(2>g.length)){var D=g[1];if(Array.isArray(D)&&!(1>D.length)){var S=D[0];if(S!="noop"&&S!="stop"&&S!="close")for(var P=1;P<D.length;P++)D[P]=""}}}}return Dh(f)}catch{return d}}var pc={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},S_={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Ah;function gc(){}C(gc,bh),gc.prototype.g=function(){return new XMLHttpRequest},gc.prototype.i=function(){return{}},Ah=new gc;function Gn(a,d,f,g){this.j=a,this.i=d,this.l=f,this.R=g||1,this.U=new is(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new A_}function A_(){this.i=null,this.g="",this.h=!1}var R_={},Rh={};function Nh(a,d,f){a.L=1,a.v=_c(En(d)),a.m=f,a.P=!0,N_(a,null)}function N_(a,d){a.F=Date.now(),mc(a),a.A=En(a.v);var f=a.A,g=a.R;Array.isArray(g)||(g=[String(g)]),z_(f.i,"t",g),a.C=0,f=a.j.J,a.h=new A_,a.g=cE(a.j,f?d:null,!a.m),0<a.O&&(a.M=new UA(m(a.Y,a,a.g),a.O)),d=a.U,f=a.g,g=a.ca;var D="readystatechange";Array.isArray(D)||(D&&(__[0]=D.toString()),D=__);for(var S=0;S<D.length;S++){var P=h_(f,D[S],g||d.handleEvent,!1,d.h||d);if(!P)break;d.g[P.key]=P}d=a.H?v(a.H):{},a.m?(a.u||(a.u="POST"),d["Content-Type"]="application/x-www-form-urlencoded",a.g.ea(a.A,a.u,a.m,d)):(a.u="GET",a.g.ea(a.A,a.u,null,d)),ss(),HA(a.i,a.u,a.A,a.l,a.R,a.m)}Gn.prototype.ca=function(a){a=a.target;let d=this.M;d&&In(a)==3?d.j():this.Y(a)},Gn.prototype.Y=function(a){try{if(a==this.g)e:{let Je=In(this.g);var d=this.g.Ba();let Si=this.g.Z();if(!(3>Je)&&(Je!=3||this.g&&(this.h.h||this.g.oa()||Z_(this.g)))){this.J||Je!=4||d==7||(d==8||0>=Si?ss(3):ss(2)),Mh(this);var f=this.g.Z();this.X=f;t:if(M_(this)){var g=Z_(this.g);a="";var D=g.length,S=In(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Er(this),us(this);var P="";break t}this.h.i=new c.TextDecoder}for(d=0;d<D;d++)this.h.h=!0,a+=this.h.i.decode(g[d],{stream:!(S&&d==D-1)});g.length=0,this.h.g+=a,this.C=0,P=this.h.g}else P=this.g.oa();if(this.o=f==200,zA(this.i,this.u,this.A,this.l,this.R,Je,f),this.o){if(this.T&&!this.K){t:{if(this.g){var me,Ge=this.g;if((me=Ge.g?Ge.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!$(me)){var se=me;break t}}se=null}if(f=se)Di(this.i,this.l,f,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Ph(this,f);else{this.o=!1,this.s=3,at(12),Er(this),us(this);break e}}if(this.P){f=!0;let Ft;for(;!this.J&&this.C<P.length;)if(Ft=WA(this,P),Ft==Rh){Je==4&&(this.s=4,at(14),f=!1),Di(this.i,this.l,null,"[Incomplete Response]");break}else if(Ft==R_){this.s=4,at(15),Di(this.i,this.l,P,"[Invalid Chunk]"),f=!1;break}else Di(this.i,this.l,Ft,null),Ph(this,Ft);if(M_(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Je!=4||P.length!=0||this.h.h||(this.s=1,at(16),f=!1),this.o=this.o&&f,!f)Di(this.i,this.l,P,"[Invalid Chunked Response]"),Er(this),us(this);else if(0<P.length&&!this.W){this.W=!0;var Ze=this.j;Ze.g==this&&Ze.ba&&!Ze.M&&(Ze.j.info("Great, no buffering proxy detected. Bytes received: "+P.length),Vh(Ze),Ze.M=!0,at(11))}}else Di(this.i,this.l,P,null),Ph(this,P);Je==4&&Er(this),this.o&&!this.J&&(Je==4?iE(this.j,this):(this.o=!1,mc(this)))}else l0(this.g),f==400&&0<P.indexOf("Unknown SID")?(this.s=3,at(12)):(this.s=0,at(13)),Er(this),us(this)}}}catch{}finally{}};function M_(a){return a.g?a.u=="GET"&&a.L!=2&&a.j.Ca:!1}function WA(a,d){var f=a.C,g=d.indexOf(`
`,f);return g==-1?Rh:(f=Number(d.substring(f,g)),isNaN(f)?R_:(g+=1,g+f>d.length?Rh:(d=d.slice(g,g+f),a.C=g+f,d)))}Gn.prototype.cancel=function(){this.J=!0,Er(this)};function mc(a){a.S=Date.now()+a.I,P_(a,a.I)}function P_(a,d){if(a.B!=null)throw Error("WatchDog timer not null");a.B=as(m(a.ba,a),d)}function Mh(a){a.B&&(c.clearTimeout(a.B),a.B=null)}Gn.prototype.ba=function(){this.B=null;let a=Date.now();0<=a-this.S?(qA(this.i,this.A),this.L!=2&&(ss(),at(17)),Er(this),this.s=2,us(this)):P_(this,this.S-a)};function us(a){a.j.G==0||a.J||iE(a.j,a)}function Er(a){Mh(a);var d=a.M;d&&typeof d.ma=="function"&&d.ma(),a.M=null,E_(a.U),a.g&&(d=a.g,a.g=null,d.abort(),d.ma())}function Ph(a,d){try{var f=a.j;if(f.G!=0&&(f.g==a||xh(f.h,a))){if(!a.K&&xh(f.h,a)&&f.G==3){try{var g=f.Da.g.parse(d)}catch{g=null}if(Array.isArray(g)&&g.length==3){var D=g;if(D[0]==0){e:if(!f.u){if(f.g)if(f.g.F+3e3<a.F)Dc(f),wc(f);else break e;Fh(f),at(18)}}else f.za=D[1],0<f.za-f.T&&37500>D[2]&&f.F&&f.v==0&&!f.C&&(f.C=as(m(f.Za,f),6e3));if(1>=O_(f.h)&&f.ca){try{f.ca()}catch{}f.ca=void 0}}else wr(f,11)}else if((a.K||f.g==a)&&Dc(f),!$(d))for(D=f.Da.g.parse(d),d=0;d<D.length;d++){let se=D[d];if(f.T=se[0],se=se[1],f.G==2)if(se[0]=="c"){f.K=se[1],f.ia=se[2];let Ze=se[3];Ze!=null&&(f.la=Ze,f.j.info("VER="+f.la));let Je=se[4];Je!=null&&(f.Aa=Je,f.j.info("SVER="+f.Aa));let Si=se[5];Si!=null&&typeof Si=="number"&&0<Si&&(g=1.5*Si,f.L=g,f.j.info("backChannelRequestTimeoutMs_="+g)),g=f;let Ft=a.g;if(Ft){let Cc=Ft.g?Ft.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Cc){var S=g.h;S.g||Cc.indexOf("spdy")==-1&&Cc.indexOf("quic")==-1&&Cc.indexOf("h2")==-1||(S.j=S.l,S.g=new Set,S.h&&(kh(S,S.h),S.h=null))}if(g.D){let jh=Ft.g?Ft.g.getResponseHeader("X-HTTP-Session-Id"):null;jh&&(g.ya=jh,Ee(g.I,g.D,jh))}}f.G=3,f.l&&f.l.ua(),f.ba&&(f.R=Date.now()-a.F,f.j.info("Handshake RTT: "+f.R+"ms")),g=f;var P=a;if(g.qa=aE(g,g.J?g.ia:null,g.W),P.K){L_(g.h,P);var me=P,Ge=g.L;Ge&&(me.I=Ge),me.B&&(Mh(me),mc(me)),g.g=P}else nE(g);0<f.i.length&&Tc(f)}else se[0]!="stop"&&se[0]!="close"||wr(f,7);else f.G==3&&(se[0]=="stop"||se[0]=="close"?se[0]=="stop"?wr(f,7):Lh(f):se[0]!="noop"&&f.l&&f.l.ta(se),f.v=0)}}ss(4)}catch{}}var KA=class{constructor(a,d){this.g=a,this.map=d}};function x_(a){this.l=a||10,c.PerformanceNavigationTiming?(a=c.performance.getEntriesByType("navigation"),a=0<a.length&&(a[0].nextHopProtocol=="hq"||a[0].nextHopProtocol=="h2")):a=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=a?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function k_(a){return a.h?!0:a.g?a.g.size>=a.j:!1}function O_(a){return a.h?1:a.g?a.g.size:0}function xh(a,d){return a.h?a.h==d:a.g?a.g.has(d):!1}function kh(a,d){a.g?a.g.add(d):a.h=d}function L_(a,d){a.h&&a.h==d?a.h=null:a.g&&a.g.has(d)&&a.g.delete(d)}x_.prototype.cancel=function(){if(this.i=F_(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let a of this.g.values())a.cancel();this.g.clear()}};function F_(a){if(a.h!=null)return a.i.concat(a.h.D);if(a.g!=null&&a.g.size!==0){let d=a.i;for(let f of a.g.values())d=d.concat(f.D);return d}return A(a.i)}function QA(a){if(a.V&&typeof a.V=="function")return a.V();if(typeof Map<"u"&&a instanceof Map||typeof Set<"u"&&a instanceof Set)return Array.from(a.values());if(typeof a=="string")return a.split("");if(u(a)){for(var d=[],f=a.length,g=0;g<f;g++)d.push(a[g]);return d}d=[],f=0;for(g in a)d[f++]=a[g];return d}function YA(a){if(a.na&&typeof a.na=="function")return a.na();if(!a.V||typeof a.V!="function"){if(typeof Map<"u"&&a instanceof Map)return Array.from(a.keys());if(!(typeof Set<"u"&&a instanceof Set)){if(u(a)||typeof a=="string"){var d=[];a=a.length;for(var f=0;f<a;f++)d.push(f);return d}d=[],f=0;for(let g in a)d[f++]=g;return d}}}function V_(a,d){if(a.forEach&&typeof a.forEach=="function")a.forEach(d,void 0);else if(u(a)||typeof a=="string")Array.prototype.forEach.call(a,d,void 0);else for(var f=YA(a),g=QA(a),D=g.length,S=0;S<D;S++)d.call(void 0,g[S],f&&f[S],a)}var j_=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function ZA(a,d){if(a){a=a.split("&");for(var f=0;f<a.length;f++){var g=a[f].indexOf("="),D=null;if(0<=g){var S=a[f].substring(0,g);D=a[f].substring(g+1)}else S=a[f];d(S,D?decodeURIComponent(D.replace(/\+/g," ")):"")}}}function Ir(a){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,a instanceof Ir){this.h=a.h,yc(this,a.j),this.o=a.o,this.g=a.g,vc(this,a.s),this.l=a.l;var d=a.i,f=new hs;f.i=d.i,d.g&&(f.g=new Map(d.g),f.h=d.h),U_(this,f),this.m=a.m}else a&&(d=String(a).match(j_))?(this.h=!1,yc(this,d[1]||"",!0),this.o=ls(d[2]||""),this.g=ls(d[3]||"",!0),vc(this,d[4]),this.l=ls(d[5]||"",!0),U_(this,d[6]||"",!0),this.m=ls(d[7]||"")):(this.h=!1,this.i=new hs(null,this.h))}Ir.prototype.toString=function(){var a=[],d=this.j;d&&a.push(ds(d,B_,!0),":");var f=this.g;return(f||d=="file")&&(a.push("//"),(d=this.o)&&a.push(ds(d,B_,!0),"@"),a.push(encodeURIComponent(String(f)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f=this.s,f!=null&&a.push(":",String(f))),(f=this.l)&&(this.g&&f.charAt(0)!="/"&&a.push("/"),a.push(ds(f,f.charAt(0)=="/"?e0:XA,!0))),(f=this.i.toString())&&a.push("?",f),(f=this.m)&&a.push("#",ds(f,n0)),a.join("")};function En(a){return new Ir(a)}function yc(a,d,f){a.j=f?ls(d,!0):d,a.j&&(a.j=a.j.replace(/:$/,""))}function vc(a,d){if(d){if(d=Number(d),isNaN(d)||0>d)throw Error("Bad port number "+d);a.s=d}else a.s=null}function U_(a,d,f){d instanceof hs?(a.i=d,r0(a.i,a.h)):(f||(d=ds(d,t0)),a.i=new hs(d,a.h))}function Ee(a,d,f){a.i.set(d,f)}function _c(a){return Ee(a,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),a}function ls(a,d){return a?d?decodeURI(a.replace(/%25/g,"%2525")):decodeURIComponent(a):""}function ds(a,d,f){return typeof a=="string"?(a=encodeURI(a).replace(d,JA),f&&(a=a.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a):null}function JA(a){return a=a.charCodeAt(0),"%"+(a>>4&15).toString(16)+(a&15).toString(16)}var B_=/[#\/\?@]/g,XA=/[#\?:]/g,e0=/[#\?]/g,t0=/[#\?@]/g,n0=/#/g;function hs(a,d){this.h=this.g=null,this.i=a||null,this.j=!!d}function Wn(a){a.g||(a.g=new Map,a.h=0,a.i&&ZA(a.i,function(d,f){a.add(decodeURIComponent(d.replace(/\+/g," ")),f)}))}t=hs.prototype,t.add=function(a,d){Wn(this),this.i=null,a=bi(this,a);var f=this.g.get(a);return f||this.g.set(a,f=[]),f.push(d),this.h+=1,this};function $_(a,d){Wn(a),d=bi(a,d),a.g.has(d)&&(a.i=null,a.h-=a.g.get(d).length,a.g.delete(d))}function H_(a,d){return Wn(a),d=bi(a,d),a.g.has(d)}t.forEach=function(a,d){Wn(this),this.g.forEach(function(f,g){f.forEach(function(D){a.call(d,D,g,this)},this)},this)},t.na=function(){Wn(this);let a=Array.from(this.g.values()),d=Array.from(this.g.keys()),f=[];for(let g=0;g<d.length;g++){let D=a[g];for(let S=0;S<D.length;S++)f.push(d[g])}return f},t.V=function(a){Wn(this);let d=[];if(typeof a=="string")H_(this,a)&&(d=d.concat(this.g.get(bi(this,a))));else{a=Array.from(this.g.values());for(let f=0;f<a.length;f++)d=d.concat(a[f])}return d},t.set=function(a,d){return Wn(this),this.i=null,a=bi(this,a),H_(this,a)&&(this.h-=this.g.get(a).length),this.g.set(a,[d]),this.h+=1,this},t.get=function(a,d){return a?(a=this.V(a),0<a.length?String(a[0]):d):d};function z_(a,d,f){$_(a,d),0<f.length&&(a.i=null,a.g.set(bi(a,d),A(f)),a.h+=f.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";let a=[],d=Array.from(this.g.keys());for(var f=0;f<d.length;f++){var g=d[f];let S=encodeURIComponent(String(g)),P=this.V(g);for(g=0;g<P.length;g++){var D=S;P[g]!==""&&(D+="="+encodeURIComponent(String(P[g]))),a.push(D)}}return this.i=a.join("&")};function bi(a,d){return d=String(d),a.j&&(d=d.toLowerCase()),d}function r0(a,d){d&&!a.j&&(Wn(a),a.i=null,a.g.forEach(function(f,g){var D=g.toLowerCase();g!=D&&($_(this,g),z_(this,D,f))},a)),a.j=d}function i0(a,d){let f=new cs;if(c.Image){let g=new Image;g.onload=y(Kn,f,"TestLoadImage: loaded",!0,d,g),g.onerror=y(Kn,f,"TestLoadImage: error",!1,d,g),g.onabort=y(Kn,f,"TestLoadImage: abort",!1,d,g),g.ontimeout=y(Kn,f,"TestLoadImage: timeout",!1,d,g),c.setTimeout(function(){g.ontimeout&&g.ontimeout()},1e4),g.src=a}else d(!1)}function o0(a,d){let f=new cs,g=new AbortController,D=setTimeout(()=>{g.abort(),Kn(f,"TestPingServer: timeout",!1,d)},1e4);fetch(a,{signal:g.signal}).then(S=>{clearTimeout(D),S.ok?Kn(f,"TestPingServer: ok",!0,d):Kn(f,"TestPingServer: server error",!1,d)}).catch(()=>{clearTimeout(D),Kn(f,"TestPingServer: error",!1,d)})}function Kn(a,d,f,g,D){try{D&&(D.onload=null,D.onerror=null,D.onabort=null,D.ontimeout=null),g(f)}catch{}}function s0(){this.g=new $A}function a0(a,d,f){let g=f||"";try{V_(a,function(D,S){let P=D;l(D)&&(P=Dh(D)),d.push(g+S+"="+encodeURIComponent(P))})}catch(D){throw d.push(g+"type="+encodeURIComponent("_badmap")),D}}function fs(a){this.l=a.Ub||null,this.j=a.eb||!1}C(fs,bh),fs.prototype.g=function(){return new Ec(this.l,this.j)},fs.prototype.i=(function(a){return function(){return a}})({});function Ec(a,d){Ye.call(this),this.D=a,this.o=d,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}C(Ec,Ye),t=Ec.prototype,t.open=function(a,d){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=a,this.A=d,this.readyState=1,gs(this)},t.send=function(a){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let d={headers:this.u,method:this.B,credentials:this.m,cache:void 0};a&&(d.body=a),(this.D||c).fetch(new Request(this.A,d)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,ps(this)),this.readyState=0},t.Sa=function(a){if(this.g&&(this.l=a,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=a.headers,this.readyState=2,gs(this)),this.g&&(this.readyState=3,gs(this),this.g)))if(this.responseType==="arraybuffer")a.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in a){if(this.j=a.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;q_(this)}else a.text().then(this.Ra.bind(this),this.ga.bind(this))};function q_(a){a.j.read().then(a.Pa.bind(a)).catch(a.ga.bind(a))}t.Pa=function(a){if(this.g){if(this.o&&a.value)this.response.push(a.value);else if(!this.o){var d=a.value?a.value:new Uint8Array(0);(d=this.v.decode(d,{stream:!a.done}))&&(this.response=this.responseText+=d)}a.done?ps(this):gs(this),this.readyState==3&&q_(this)}},t.Ra=function(a){this.g&&(this.response=this.responseText=a,ps(this))},t.Qa=function(a){this.g&&(this.response=a,ps(this))},t.ga=function(){this.g&&ps(this)};function ps(a){a.readyState=4,a.l=null,a.j=null,a.v=null,gs(a)}t.setRequestHeader=function(a,d){this.u.append(a,d)},t.getResponseHeader=function(a){return this.h&&this.h.get(a.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";let a=[],d=this.h.entries();for(var f=d.next();!f.done;)f=f.value,a.push(f[0]+": "+f[1]),f=d.next();return a.join(`\r
`)};function gs(a){a.onreadystatechange&&a.onreadystatechange.call(a)}Object.defineProperty(Ec.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(a){this.m=a?"include":"same-origin"}});function G_(a){let d="";return he(a,function(f,g){d+=g,d+=":",d+=f,d+=`\r
`}),d}function Oh(a,d,f){e:{for(g in f){var g=!1;break e}g=!0}g||(f=G_(f),typeof a=="string"?f!=null&&encodeURIComponent(String(f)):Ee(a,d,f))}function Te(a){Ye.call(this),this.headers=new Map,this.o=a||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}C(Te,Ye);var c0=/^https?$/i,u0=["POST","PUT"];t=Te.prototype,t.Ha=function(a){this.J=a},t.ea=function(a,d,f,g){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+a);d=d?d.toUpperCase():"GET",this.D=a,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Ah.g(),this.v=this.o?I_(this.o):I_(Ah),this.g.onreadystatechange=m(this.Ea,this);try{this.B=!0,this.g.open(d,String(a),!0),this.B=!1}catch(S){W_(this,S);return}if(a=f||"",f=new Map(this.headers),g)if(Object.getPrototypeOf(g)===Object.prototype)for(var D in g)f.set(D,g[D]);else if(typeof g.keys=="function"&&typeof g.get=="function")for(let S of g.keys())f.set(S,g.get(S));else throw Error("Unknown input type for opt_headers: "+String(g));g=Array.from(f.keys()).find(S=>S.toLowerCase()=="content-type"),D=c.FormData&&a instanceof c.FormData,!(0<=Array.prototype.indexOf.call(u0,d,void 0))||g||D||f.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[S,P]of f)this.g.setRequestHeader(S,P);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Y_(this),this.u=!0,this.g.send(a),this.u=!1}catch(S){W_(this,S)}};function W_(a,d){a.h=!1,a.g&&(a.j=!0,a.g.abort(),a.j=!1),a.l=d,a.m=5,K_(a),Ic(a)}function K_(a){a.A||(a.A=!0,st(a,"complete"),st(a,"error"))}t.abort=function(a){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=a||7,st(this,"complete"),st(this,"abort"),Ic(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ic(this,!0)),Te.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?Q_(this):this.bb())},t.bb=function(){Q_(this)};function Q_(a){if(a.h&&typeof s<"u"&&(!a.v[1]||In(a)!=4||a.Z()!=2)){if(a.u&&In(a)==4)y_(a.Ea,0,a);else if(st(a,"readystatechange"),In(a)==4){a.h=!1;try{let P=a.Z();e:switch(P){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var d=!0;break e;default:d=!1}var f;if(!(f=d)){var g;if(g=P===0){var D=String(a.D).match(j_)[1]||null;!D&&c.self&&c.self.location&&(D=c.self.location.protocol.slice(0,-1)),g=!c0.test(D?D.toLowerCase():"")}f=g}if(f)st(a,"complete"),st(a,"success");else{a.m=6;try{var S=2<In(a)?a.g.statusText:""}catch{S=""}a.l=S+" ["+a.Z()+"]",K_(a)}}finally{Ic(a)}}}}function Ic(a,d){if(a.g){Y_(a);let f=a.g,g=a.v[0]?()=>{}:null;a.g=null,a.v=null,d||st(a,"ready");try{f.onreadystatechange=g}catch{}}}function Y_(a){a.I&&(c.clearTimeout(a.I),a.I=null)}t.isActive=function(){return!!this.g};function In(a){return a.g?a.g.readyState:0}t.Z=function(){try{return 2<In(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(a){if(this.g){var d=this.g.responseText;return a&&d.indexOf(a)==0&&(d=d.substring(a.length)),BA(d)}};function Z_(a){try{if(!a.g)return null;if("response"in a.g)return a.g.response;switch(a.H){case"":case"text":return a.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in a.g)return a.g.mozResponseArrayBuffer}return null}catch{return null}}function l0(a){let d={};a=(a.g&&2<=In(a)&&a.g.getAllResponseHeaders()||"").split(`\r
`);for(let g=0;g<a.length;g++){if($(a[g]))continue;var f=T(a[g]);let D=f[0];if(f=f[1],typeof f!="string")continue;f=f.trim();let S=d[D]||[];d[D]=S,S.push(f)}w(d,function(g){return g.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function ms(a,d,f){return f&&f.internalChannelParams&&f.internalChannelParams[a]||d}function J_(a){this.Aa=0,this.i=[],this.j=new cs,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=ms("failFast",!1,a),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=ms("baseRetryDelayMs",5e3,a),this.cb=ms("retryDelaySeedMs",1e4,a),this.Wa=ms("forwardChannelMaxRetries",2,a),this.wa=ms("forwardChannelRequestTimeoutMs",2e4,a),this.pa=a&&a.xmlHttpFactory||void 0,this.Xa=a&&a.Tb||void 0,this.Ca=a&&a.useFetchStreams||!1,this.L=void 0,this.J=a&&a.supportsCrossDomainXhr||!1,this.K="",this.h=new x_(a&&a.concurrentRequestLimit),this.Da=new s0,this.P=a&&a.fastHandshake||!1,this.O=a&&a.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=a&&a.Rb||!1,a&&a.xa&&this.j.xa(),a&&a.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&a&&a.detectBufferingProxy||!1,this.ja=void 0,a&&a.longPollingTimeout&&0<a.longPollingTimeout&&(this.ja=a.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=J_.prototype,t.la=8,t.G=1,t.connect=function(a,d,f,g){at(0),this.W=a,this.H=d||{},f&&g!==void 0&&(this.H.OSID=f,this.H.OAID=g),this.F=this.X,this.I=aE(this,null,this.W),Tc(this)};function Lh(a){if(X_(a),a.G==3){var d=a.U++,f=En(a.I);if(Ee(f,"SID",a.K),Ee(f,"RID",d),Ee(f,"TYPE","terminate"),ys(a,f),d=new Gn(a,a.j,d),d.L=2,d.v=_c(En(f)),f=!1,c.navigator&&c.navigator.sendBeacon)try{f=c.navigator.sendBeacon(d.v.toString(),"")}catch{}!f&&c.Image&&(new Image().src=d.v,f=!0),f||(d.g=cE(d.j,null),d.g.ea(d.v)),d.F=Date.now(),mc(d)}sE(a)}function wc(a){a.g&&(Vh(a),a.g.cancel(),a.g=null)}function X_(a){wc(a),a.u&&(c.clearTimeout(a.u),a.u=null),Dc(a),a.h.cancel(),a.s&&(typeof a.s=="number"&&c.clearTimeout(a.s),a.s=null)}function Tc(a){if(!k_(a.h)&&!a.s){a.s=!0;var d=a.Ga;es||d_(),ts||(es(),ts=!0),gh.add(d,a),a.B=0}}function d0(a,d){return O_(a.h)>=a.h.j-(a.s?1:0)?!1:a.s?(a.i=d.D.concat(a.i),!0):a.G==1||a.G==2||a.B>=(a.Va?0:a.Wa)?!1:(a.s=as(m(a.Ga,a,d),oE(a,a.B)),a.B++,!0)}t.Ga=function(a){if(this.s)if(this.s=null,this.G==1){if(!a){this.U=Math.floor(1e5*Math.random()),a=this.U++;let D=new Gn(this,this.j,a),S=this.o;if(this.S&&(S?(S=v(S),I(S,this.S)):S=this.S),this.m!==null||this.O||(D.H=S,S=null),this.P)e:{for(var d=0,f=0;f<this.i.length;f++){t:{var g=this.i[f];if("__data__"in g.map&&(g=g.map.__data__,typeof g=="string")){g=g.length;break t}g=void 0}if(g===void 0)break;if(d+=g,4096<d){d=f;break e}if(d===4096||f===this.i.length-1){d=f+1;break e}}d=1e3}else d=1e3;d=tE(this,D,d),f=En(this.I),Ee(f,"RID",a),Ee(f,"CVER",22),this.D&&Ee(f,"X-HTTP-Session-Id",this.D),ys(this,f),S&&(this.O?d="headers="+encodeURIComponent(String(G_(S)))+"&"+d:this.m&&Oh(f,this.m,S)),kh(this.h,D),this.Ua&&Ee(f,"TYPE","init"),this.P?(Ee(f,"$req",d),Ee(f,"SID","null"),D.T=!0,Nh(D,f,null)):Nh(D,f,d),this.G=2}}else this.G==3&&(a?eE(this,a):this.i.length==0||k_(this.h)||eE(this))};function eE(a,d){var f;d?f=d.l:f=a.U++;let g=En(a.I);Ee(g,"SID",a.K),Ee(g,"RID",f),Ee(g,"AID",a.T),ys(a,g),a.m&&a.o&&Oh(g,a.m,a.o),f=new Gn(a,a.j,f,a.B+1),a.m===null&&(f.H=a.o),d&&(a.i=d.D.concat(a.i)),d=tE(a,f,1e3),f.I=Math.round(.5*a.wa)+Math.round(.5*a.wa*Math.random()),kh(a.h,f),Nh(f,g,d)}function ys(a,d){a.H&&he(a.H,function(f,g){Ee(d,g,f)}),a.l&&V_({},function(f,g){Ee(d,g,f)})}function tE(a,d,f){f=Math.min(a.i.length,f);var g=a.l?m(a.l.Na,a.l,a):null;e:{var D=a.i;let S=-1;for(;;){let P=["count="+f];S==-1?0<f?(S=D[0].g,P.push("ofs="+S)):S=0:P.push("ofs="+S);let me=!0;for(let Ge=0;Ge<f;Ge++){let se=D[Ge].g,Ze=D[Ge].map;if(se-=S,0>se)S=Math.max(0,D[Ge].g-100),me=!1;else try{a0(Ze,P,"req"+se+"_")}catch{g&&g(Ze)}}if(me){g=P.join("&");break e}}}return a=a.i.splice(0,f),d.D=a,g}function nE(a){if(!a.g&&!a.u){a.Y=1;var d=a.Fa;es||d_(),ts||(es(),ts=!0),gh.add(d,a),a.v=0}}function Fh(a){return a.g||a.u||3<=a.v?!1:(a.Y++,a.u=as(m(a.Fa,a),oE(a,a.v)),a.v++,!0)}t.Fa=function(){if(this.u=null,rE(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var a=2*this.R;this.j.info("BP detection timer enabled: "+a),this.A=as(m(this.ab,this),a)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,at(10),wc(this),rE(this))};function Vh(a){a.A!=null&&(c.clearTimeout(a.A),a.A=null)}function rE(a){a.g=new Gn(a,a.j,"rpc",a.Y),a.m===null&&(a.g.H=a.o),a.g.O=0;var d=En(a.qa);Ee(d,"RID","rpc"),Ee(d,"SID",a.K),Ee(d,"AID",a.T),Ee(d,"CI",a.F?"0":"1"),!a.F&&a.ja&&Ee(d,"TO",a.ja),Ee(d,"TYPE","xmlhttp"),ys(a,d),a.m&&a.o&&Oh(d,a.m,a.o),a.L&&(a.g.I=a.L);var f=a.g;a=a.ia,f.L=1,f.v=_c(En(d)),f.m=null,f.P=!0,N_(f,a)}t.Za=function(){this.C!=null&&(this.C=null,wc(this),Fh(this),at(19))};function Dc(a){a.C!=null&&(c.clearTimeout(a.C),a.C=null)}function iE(a,d){var f=null;if(a.g==d){Dc(a),Vh(a),a.g=null;var g=2}else if(xh(a.h,d))f=d.D,L_(a.h,d),g=1;else return;if(a.G!=0){if(d.o)if(g==1){f=d.m?d.m.length:0,d=Date.now()-d.F;var D=a.B;g=fc(),st(g,new C_(g,f)),Tc(a)}else nE(a);else if(D=d.s,D==3||D==0&&0<d.X||!(g==1&&d0(a,d)||g==2&&Fh(a)))switch(f&&0<f.length&&(d=a.h,d.i=d.i.concat(f)),D){case 1:wr(a,5);break;case 4:wr(a,10);break;case 3:wr(a,6);break;default:wr(a,2)}}}function oE(a,d){let f=a.Ta+Math.floor(Math.random()*a.cb);return a.isActive()||(f*=2),f*d}function wr(a,d){if(a.j.info("Error code "+d),d==2){var f=m(a.fb,a),g=a.Xa;let D=!g;g=new Ir(g||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||yc(g,"https"),_c(g),D?i0(g.toString(),f):o0(g.toString(),f)}else at(2);a.G=0,a.l&&a.l.sa(d),sE(a),X_(a)}t.fb=function(a){a?(this.j.info("Successfully pinged google.com"),at(2)):(this.j.info("Failed to ping google.com"),at(1))};function sE(a){if(a.G=0,a.ka=[],a.l){let d=F_(a.h);(d.length!=0||a.i.length!=0)&&(R(a.ka,d),R(a.ka,a.i),a.h.i.length=0,A(a.i),a.i.length=0),a.l.ra()}}function aE(a,d,f){var g=f instanceof Ir?En(f):new Ir(f);if(g.g!="")d&&(g.g=d+"."+g.g),vc(g,g.s);else{var D=c.location;g=D.protocol,d=d?d+"."+D.hostname:D.hostname,D=+D.port;var S=new Ir(null);g&&yc(S,g),d&&(S.g=d),D&&vc(S,D),f&&(S.l=f),g=S}return f=a.D,d=a.ya,f&&d&&Ee(g,f,d),Ee(g,"VER",a.la),ys(a,g),g}function cE(a,d,f){if(d&&!a.J)throw Error("Can't create secondary domain capable XhrIo object.");return d=a.Ca&&!a.pa?new Te(new fs({eb:f})):new Te(a.pa),d.Ha(a.J),d}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function uE(){}t=uE.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function bc(){}bc.prototype.g=function(a,d){return new Et(a,d)};function Et(a,d){Ye.call(this),this.g=new J_(d),this.l=a,this.h=d&&d.messageUrlParams||null,a=d&&d.messageHeaders||null,d&&d.clientProtocolHeaderRequired&&(a?a["X-Client-Protocol"]="webchannel":a={"X-Client-Protocol":"webchannel"}),this.g.o=a,a=d&&d.initMessageHeaders||null,d&&d.messageContentType&&(a?a["X-WebChannel-Content-Type"]=d.messageContentType:a={"X-WebChannel-Content-Type":d.messageContentType}),d&&d.va&&(a?a["X-WebChannel-Client-Profile"]=d.va:a={"X-WebChannel-Client-Profile":d.va}),this.g.S=a,(a=d&&d.Sb)&&!$(a)&&(this.g.m=a),this.v=d&&d.supportsCrossDomainXhr||!1,this.u=d&&d.sendRawJson||!1,(d=d&&d.httpSessionIdParam)&&!$(d)&&(this.g.D=d,a=this.h,a!==null&&d in a&&(a=this.h,d in a&&delete a[d])),this.j=new Ci(this)}C(Et,Ye),Et.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Et.prototype.close=function(){Lh(this.g)},Et.prototype.o=function(a){var d=this.g;if(typeof a=="string"){var f={};f.__data__=a,a=f}else this.u&&(f={},f.__data__=Dh(a),a=f);d.i.push(new KA(d.Ya++,a)),d.G==3&&Tc(d)},Et.prototype.N=function(){this.g.l=null,delete this.j,Lh(this.g),delete this.g,Et.aa.N.call(this)};function lE(a){Ch.call(this),a.__headers__&&(this.headers=a.__headers__,this.statusCode=a.__status__,delete a.__headers__,delete a.__status__);var d=a.__sm__;if(d){e:{for(let f in d){a=f;break e}a=void 0}(this.i=a)&&(a=this.i,d=d!==null&&a in d?d[a]:void 0),this.data=d}else this.data=a}C(lE,Ch);function dE(){Sh.call(this),this.status=1}C(dE,Sh);function Ci(a){this.g=a}C(Ci,uE),Ci.prototype.ua=function(){st(this.g,"a")},Ci.prototype.ta=function(a){st(this.g,new lE(a))},Ci.prototype.sa=function(a){st(this.g,new dE)},Ci.prototype.ra=function(){st(this.g,"b")},bc.prototype.createWebChannel=bc.prototype.g,Et.prototype.send=Et.prototype.o,Et.prototype.open=Et.prototype.m,Et.prototype.close=Et.prototype.close,fy=Vn.createWebChannelTransport=function(){return new bc},hy=Vn.getStatEventTarget=function(){return fc()},dy=Vn.Event=_r,_d=Vn.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},pc.NO_ERROR=0,pc.TIMEOUT=8,pc.HTTP_ERROR=6,ja=Vn.ErrorCode=pc,S_.COMPLETE="complete",ly=Vn.EventType=S_,w_.EventType=os,os.OPEN="a",os.CLOSE="b",os.ERROR="c",os.MESSAGE="d",Ye.prototype.listen=Ye.prototype.K,Do=Vn.WebChannel=w_,dV=Vn.FetchXmlHttpFactory=fs,Te.prototype.listenOnce=Te.prototype.L,Te.prototype.getLastError=Te.prototype.Ka,Te.prototype.getLastErrorCode=Te.prototype.Ba,Te.prototype.getStatus=Te.prototype.Z,Te.prototype.getResponseJson=Te.prototype.Oa,Te.prototype.getResponseText=Te.prototype.oa,Te.prototype.send=Te.prototype.ea,Te.prototype.setWithCredentials=Te.prototype.Ha,uy=Vn.XhrIo=Te}).apply(typeof vd<"u"?vd:typeof self<"u"?self:typeof window<"u"?window:{});var yC="@firebase/firestore",vC="4.8.0";var ze=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};ze.UNAUTHENTICATED=new ze(null),ze.GOOGLE_CREDENTIALS=new ze("google-credentials-uid"),ze.FIRST_PARTY=new ze("first-party-uid"),ze.MOCK_USER=new ze("mock-user");var Yo="11.10.0";var wi=new hn("@firebase/firestore");function bo(){return wi.logLevel}function O(t,...e){if(wi.logLevel<=te.DEBUG){let n=e.map(Wv);wi.debug(`Firestore (${Yo}): ${t}`,...n)}}function Un(t,...e){if(wi.logLevel<=te.ERROR){let n=e.map(Wv);wi.error(`Firestore (${Yo}): ${t}`,...n)}}function gr(t,...e){if(wi.logLevel<=te.WARN){let n=e.map(Wv);wi.warn(`Firestore (${Yo}): ${t}`,...n)}}function Wv(t){if(typeof t=="string")return t;try{return(function(n){return JSON.stringify(n)})(t)}catch{return t}}function G(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,uS(t,r,n)}function uS(t,e,n){let r=`FIRESTORE (${Yo}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw Un(r),new Error(r)}function we(t,e,n,r){let i="Unexpected state";typeof n=="string"?i=n:r=n,t||uS(e,i,r)}function ie(t,e){return t}var x={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},F=class extends Ot{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var pr=class{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}};var Cd=class{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},_y=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(ze.UNAUTHENTICATED))}shutdown(){}},Ey=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}},Iy=class{constructor(e){this.t=e,this.currentUser=ze.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){we(this.o===void 0,42304);let r=this.i,i=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve(),o=new pr;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new pr,e.enqueueRetryable(()=>i(this.currentUser))};let s=()=>{let u=o;e.enqueueRetryable(async()=>{await u.promise,await i(this.currentUser)})},c=u=>{O("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit(u=>c(u)),setTimeout(()=>{if(!this.auth){let u=this.t.getImmediate({optional:!0});u?c(u):(O("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new pr)}},0),s()}getToken(){let e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(O("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(we(typeof r.accessToken=="string",31837,{l:r}),new Cd(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return we(e===null||typeof e=="string",2055,{h:e}),new ze(e)}},wy=class{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=ze.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);let e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}},Ty=class{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new wy(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(ze.FIRST_PARTY))}shutdown(){}invalidateToken(){}},Sd=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},Dy=class{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Ln(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){we(this.o===void 0,3512);let r=o=>{o.error!=null&&O("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);let s=o.token!==this.m;return this.m=o.token,O("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?n(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};let i=o=>{O("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){let o=this.V.getImmediate({optional:!0});o?i(o):O("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new Sd(this.p));let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(we(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new Sd(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function hV(t){let e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}function lS(){return new TextEncoder}var Ad=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516),r="";for(;r.length<20;){let i=hV(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<n&&(r+=e.charAt(i[o]%62))}return r}};function ee(t,e){return t<e?-1:t>e?1:0}function by(t,e){let n=0;for(;n<t.length&&n<e.length;){let r=t.codePointAt(n),i=e.codePointAt(n);if(r!==i){if(r<128&&i<128)return ee(r,i);{let o=lS(),s=fV(o.encode(_C(t,n)),o.encode(_C(e,n)));return s!==0?s:ee(r,i)}}n+=r>65535?2:1}return ee(t.length,e.length)}function _C(t,e){return t.codePointAt(e)>65535?t.substring(e,e+2):t.substring(e,e+1)}function fV(t,e){for(let n=0;n<t.length&&n<e.length;++n)if(t[n]!==e[n])return ee(t[n],e[n]);return ee(t.length,e.length)}function Vo(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}var EC="__name__",Rd=class t{constructor(e,n,r){n===void 0?n=0:n>e.length&&G(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&G(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return t.comparator(this,e)===0}child(e){let n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){let r=Math.min(e.length,n.length);for(let i=0;i<r;i++){let o=t.compareSegments(e.get(i),n.get(i));if(o!==0)return o}return ee(e.length,n.length)}static compareSegments(e,n){let r=t.isNumericId(e),i=t.isNumericId(n);return r&&!i?-1:!r&&i?1:r&&i?t.extractNumericId(e).compare(t.extractNumericId(n)):by(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Fn.fromString(e.substring(4,e.length-2))}},Ae=class t extends Rd{construct(e,n,r){return new t(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let n=[];for(let r of e){if(r.indexOf("//")>=0)throw new F(x.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new t(n)}static emptyPath(){return new t([])}},pV=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Xt=class t extends Rd{construct(e,n,r){return new t(e,n,r)}static isValidIdentifier(e){return pV.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),t.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===EC}static keyField(){return new t([EC])}static fromServerFormat(e){let n=[],r="",i=0,o=()=>{if(r.length===0)throw new F(x.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""},s=!1;for(;i<e.length;){let c=e[i];if(c==="\\"){if(i+1===e.length)throw new F(x.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let u=e[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new F(x.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else c==="`"?(s=!s,i++):c!=="."||s?(r+=c,i++):(o(),i++)}if(o(),s)throw new F(x.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new t(n)}static emptyPath(){return new t([])}};var B=class t{constructor(e){this.path=e}static fromPath(e){return new t(Ae.fromString(e))}static fromName(e){return new t(Ae.fromString(e).popFirst(5))}static empty(){return new t(Ae.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ae.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Ae.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new t(new Ae(e.slice()))}};function gV(t,e,n){if(!n)throw new F(x.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function mV(t,e,n,r){if(e===!0&&r===!0)throw new F(x.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function IC(t){if(B.isDocumentKey(t))throw new F(x.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function yV(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function vV(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{let e=(function(r){return r.constructor?r.constructor.name:null})(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":G(12329,{type:typeof t})}function Td(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new F(x.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let n=vV(t);throw new F(x.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function Pe(t,e){let n={typeString:t};return e&&(n.value=e),n}function sc(t,e){if(!yV(t))throw new F(x.INVALID_ARGUMENT,"JSON must be an object");let n;for(let r in e)if(e[r]){let i=e[r].typeString,o="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}let s=t[r];if(i&&typeof s!==i){n=`JSON field '${r}' must be a ${i}.`;break}if(o!==void 0&&s!==o.value){n=`Expected '${r}' field to equal '${o.value}'`;break}}if(n)throw new F(x.INVALID_ARGUMENT,n);return!0}var wC=-62135596800,TC=1e6,pt=class t{static now(){return t.fromMillis(Date.now())}static fromDate(e){return t.fromMillis(e.getTime())}static fromMillis(e){let n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*TC);return new t(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new F(x.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new F(x.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<wC)throw new F(x.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new F(x.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/TC}_compareTo(e){return this.seconds===e.seconds?ee(this.nanoseconds,e.nanoseconds):ee(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:t._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(sc(e,t._jsonSchema))return new t(e.seconds,e.nanoseconds)}valueOf(){let e=this.seconds-wC;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};pt._jsonSchemaVersion="firestore/timestamp/1.0",pt._jsonSchema={type:Pe("string",pt._jsonSchemaVersion),seconds:Pe("number"),nanoseconds:Pe("number")};var Y=class t{static fromTimestamp(e){return new t(e)}static min(){return new t(new pt(0,0))}static max(){return new t(new pt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var Ga=-1,Cy=class{constructor(e,n,r,i){this.indexId=e,this.collectionGroup=n,this.fields=r,this.indexState=i}};Cy.UNKNOWN_ID=-1;function _V(t,e){let n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=Y.fromTimestamp(r===1e9?new pt(n+1,0):new pt(n,r));return new Ti(i,B.empty(),e)}function EV(t){return new Ti(t.readTime,t.key,Ga)}var Ti=class t{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new t(Y.min(),B.empty(),Ga)}static max(){return new t(Y.max(),B.empty(),Ga)}};function IV(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=B.comparator(t.documentKey,e.documentKey),n!==0?n:ee(t.largestBatchId,e.largestBatchId))}var wV="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Sy=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};async function nh(t){if(t.code!==x.FAILED_PRECONDITION||t.message!==wV)throw t;O("LocalStore","Unexpectedly lost primary lease")}var N=class t{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&G(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new t((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(n,o).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{let n=e();return n instanceof t?n:t.resolve(n)}catch(n){return t.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):t.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):t.reject(n)}static resolve(e){return new t((n,r)=>{n(e)})}static reject(e){return new t((n,r)=>{r(e)})}static waitFor(e){return new t((n,r)=>{let i=0,o=0,s=!1;e.forEach(c=>{++i,c.next(()=>{++o,s&&o===i&&n()},u=>r(u))}),s=!0,o===i&&n()})}static or(e){let n=t.resolve(!1);for(let r of e)n=n.next(i=>i?t.resolve(i):r());return n}static forEach(e,n){let r=[];return e.forEach((i,o)=>{r.push(n.call(this,i,o))}),this.waitFor(r)}static mapArray(e,n){return new t((r,i)=>{let o=e.length,s=new Array(o),c=0;for(let u=0;u<o;u++){let l=u;n(e[l]).next(h=>{s[l]=h,++c,c===o&&r(s)},h=>i(h))}})}static doWhile(e,n){return new t((r,i)=>{let o=()=>{e()===!0?n().next(()=>{o()},i):r()};o()})}};function TV(t){let e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Zo(t){return t.name==="IndexedDbTransactionError"}var Kv=(()=>{class t{constructor(n,r){this.previousValue=n,r&&(r.sequenceNumberHandler=i=>this._e(i),this.ae=i=>r.writeSequenceNumber(i))}_e(n){return this.previousValue=Math.max(n,this.previousValue),this.previousValue}next(){let n=++this.previousValue;return this.ae&&this.ae(n),n}}t.ue=-1;return t})(),DV=-1;function rh(t){return t==null}function Nd(t){return t===0&&1/t==-1/0}var dS="";function bV(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=DC(e)),e=CV(t.get(n),e);return DC(e)}function CV(t,e){let n=e,r=t.length;for(let i=0;i<r;i++){let o=t.charAt(i);switch(o){case"\0":n+="";break;case dS:n+="";break;default:n+=o}}return n}function DC(t){return t+dS+""}var SV="remoteDocuments",hS="owner";var fS="mutationQueues";var pS="mutations";var gS="documentMutations",AV="remoteDocumentsV14";var mS="remoteDocumentGlobal";var yS="targets";var vS="targetDocuments";var _S="targetGlobal",ES="collectionParents";var IS="clientMetadata";var wS="bundles";var TS="namedQueries";var RV="indexConfiguration";var NV="indexState";var MV="indexEntries";var DS="documentOverlays";var PV="globals";var xV=[fS,pS,gS,SV,yS,hS,_S,vS,IS,mS,ES,wS,TS],TJ=[...xV,DS],kV=[fS,pS,gS,AV,yS,hS,_S,vS,IS,mS,ES,wS,TS,DS],OV=kV,LV=[...OV,RV,NV,MV];var DJ=[...LV,PV];function bC(t){let e=0;for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function ac(t,e){for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function FV(t){for(let e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}var Re=class t{constructor(e,n){this.comparator=e,this.root=n||pn.EMPTY}insert(e,n){return new t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,pn.BLACK,null,null))}remove(e){return new t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,pn.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){let r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){let e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Ro(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Ro(this.root,e,this.comparator,!1)}getReverseIterator(){return new Ro(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Ro(this.root,e,this.comparator,!0)}},Ro=class{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=n?r(e.key,n):1,n&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},pn=class t{constructor(e,n,r,i,o){this.key=e,this.value=n,this.color=r??t.RED,this.left=i??t.EMPTY,this.right=o??t.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,o){return new t(e??this.key,n??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this,o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,n,r),null):o===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return t.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw G(43730,{key:this.key,value:this.value});if(this.right.isRed())throw G(14113,{key:this.key,value:this.value});let e=this.left.check();if(e!==this.right.check())throw G(27949);return e+(this.isRed()?0:1)}};pn.EMPTY=null,pn.RED=!0,pn.BLACK=!1;pn.EMPTY=new class{constructor(){this.size=0}get key(){throw G(57766)}get value(){throw G(16141)}get color(){throw G(16727)}get left(){throw G(29726)}get right(){throw G(36894)}copy(e,n,r,i,o){return this}insert(e,n,r){return new pn(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var qe=class t{constructor(e){this.comparator=e,this.data=new Re(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Md(this.data.getIterator())}getIteratorFrom(e){return new Md(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){let i=n.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(n=>{e.push(n)}),e}toString(){let e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){let n=new t(this.comparator);return n.data=e,n}},Md=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var yi=class t{constructor(e){this.fields=e,e.sort(Xt.comparator)}static empty(){return new t([])}unionWith(e){let n=new qe(Xt.comparator);for(let r of this.fields)n=n.add(r);for(let r of e)n=n.add(r);return new t(n.toArray())}covers(e){for(let n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Vo(this.fields,e.fields,(n,r)=>n.isEqual(r))}};var Pd=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var it=class t{constructor(e){this.binaryString=e}static fromBase64String(e){let n=(function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new Pd("Invalid base64 string: "+o):o}})(e);return new t(n)}static fromUint8Array(e){let n=(function(i){let o="";for(let s=0;s<i.length;++s)o+=String.fromCharCode(i[s]);return o})(e);return new t(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){let r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ee(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};it.EMPTY_BYTE_STRING=new it("");var VV=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Bn(t){if(we(!!t,39018),typeof t=="string"){let e=0,n=VV.exec(t);if(we(!!n,46558,{timestamp:t}),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Ie(t.seconds),nanos:Ie(t.nanos)}}function Ie(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function $n(t){return typeof t=="string"?it.fromBase64String(t):it.fromUint8Array(t)}var bS="server_timestamp",CS="__type__",SS="__previous_value__",AS="__local_write_time__";function Qv(t){var e,n;return((n=(((e=t?.mapValue)===null||e===void 0?void 0:e.fields)||{})[CS])===null||n===void 0?void 0:n.stringValue)===bS}function ih(t){let e=t.mapValue.fields[SS];return Qv(e)?ih(e):e}function Wa(t){let e=Bn(t.mapValue.fields[AS].timestampValue);return new pt(e.seconds,e.nanos)}var Ay=class{constructor(e,n,r,i,o,s,c,u,l,h){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=c,this.longPollingOptions=u,this.useFetchStreams=l,this.isUsingEmulator=h}},xd="(default)",kd=class t{constructor(e,n){this.projectId=e,this.database=n||xd}static empty(){return new t("","")}get isDefaultDatabase(){return this.database===xd}isEqual(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database}};var RS="__type__",NS="__max__",Ed={mapValue:{fields:{__type__:{stringValue:NS}}}},MS="__vector__",Ka="value";function mr(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Qv(t)?4:xS(t)?9007199254740991:PS(t)?10:11:G(28295,{value:t})}function yn(t,e){if(t===e)return!0;let n=mr(t);if(n!==mr(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Wa(t).isEqual(Wa(e));case 3:return(function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;let s=Bn(i.timestampValue),c=Bn(o.timestampValue);return s.seconds===c.seconds&&s.nanos===c.nanos})(t,e);case 5:return t.stringValue===e.stringValue;case 6:return(function(i,o){return $n(i.bytesValue).isEqual($n(o.bytesValue))})(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return(function(i,o){return Ie(i.geoPointValue.latitude)===Ie(o.geoPointValue.latitude)&&Ie(i.geoPointValue.longitude)===Ie(o.geoPointValue.longitude)})(t,e);case 2:return(function(i,o){if("integerValue"in i&&"integerValue"in o)return Ie(i.integerValue)===Ie(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){let s=Ie(i.doubleValue),c=Ie(o.doubleValue);return s===c?Nd(s)===Nd(c):isNaN(s)&&isNaN(c)}return!1})(t,e);case 9:return Vo(t.arrayValue.values||[],e.arrayValue.values||[],yn);case 10:case 11:return(function(i,o){let s=i.mapValue.fields||{},c=o.mapValue.fields||{};if(bC(s)!==bC(c))return!1;for(let u in s)if(s.hasOwnProperty(u)&&(c[u]===void 0||!yn(s[u],c[u])))return!1;return!0})(t,e);default:return G(52216,{left:t})}}function Qa(t,e){return(t.values||[]).find(n=>yn(n,e))!==void 0}function jo(t,e){if(t===e)return 0;let n=mr(t),r=mr(e);if(n!==r)return ee(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return ee(t.booleanValue,e.booleanValue);case 2:return(function(o,s){let c=Ie(o.integerValue||o.doubleValue),u=Ie(s.integerValue||s.doubleValue);return c<u?-1:c>u?1:c===u?0:isNaN(c)?isNaN(u)?0:-1:1})(t,e);case 3:return CC(t.timestampValue,e.timestampValue);case 4:return CC(Wa(t),Wa(e));case 5:return by(t.stringValue,e.stringValue);case 6:return(function(o,s){let c=$n(o),u=$n(s);return c.compareTo(u)})(t.bytesValue,e.bytesValue);case 7:return(function(o,s){let c=o.split("/"),u=s.split("/");for(let l=0;l<c.length&&l<u.length;l++){let h=ee(c[l],u[l]);if(h!==0)return h}return ee(c.length,u.length)})(t.referenceValue,e.referenceValue);case 8:return(function(o,s){let c=ee(Ie(o.latitude),Ie(s.latitude));return c!==0?c:ee(Ie(o.longitude),Ie(s.longitude))})(t.geoPointValue,e.geoPointValue);case 9:return SC(t.arrayValue,e.arrayValue);case 10:return(function(o,s){var c,u,l,h;let p=o.fields||{},m=s.fields||{},y=(c=p[Ka])===null||c===void 0?void 0:c.arrayValue,C=(u=m[Ka])===null||u===void 0?void 0:u.arrayValue,A=ee(((l=y?.values)===null||l===void 0?void 0:l.length)||0,((h=C?.values)===null||h===void 0?void 0:h.length)||0);return A!==0?A:SC(y,C)})(t.mapValue,e.mapValue);case 11:return(function(o,s){if(o===Ed.mapValue&&s===Ed.mapValue)return 0;if(o===Ed.mapValue)return 1;if(s===Ed.mapValue)return-1;let c=o.fields||{},u=Object.keys(c),l=s.fields||{},h=Object.keys(l);u.sort(),h.sort();for(let p=0;p<u.length&&p<h.length;++p){let m=by(u[p],h[p]);if(m!==0)return m;let y=jo(c[u[p]],l[h[p]]);if(y!==0)return y}return ee(u.length,h.length)})(t.mapValue,e.mapValue);default:throw G(23264,{le:n})}}function CC(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return ee(t,e);let n=Bn(t),r=Bn(e),i=ee(n.seconds,r.seconds);return i!==0?i:ee(n.nanos,r.nanos)}function SC(t,e){let n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){let o=jo(n[i],r[i]);if(o)return o}return ee(n.length,r.length)}function Uo(t){return Ry(t)}function Ry(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?(function(n){let r=Bn(n);return`time(${r.seconds},${r.nanos})`})(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?(function(n){return $n(n).toBase64()})(t.bytesValue):"referenceValue"in t?(function(n){return B.fromName(n).toString()})(t.referenceValue):"geoPointValue"in t?(function(n){return`geo(${n.latitude},${n.longitude})`})(t.geoPointValue):"arrayValue"in t?(function(n){let r="[",i=!0;for(let o of n.values||[])i?i=!1:r+=",",r+=Ry(o);return r+"]"})(t.arrayValue):"mapValue"in t?(function(n){let r=Object.keys(n.fields||{}).sort(),i="{",o=!0;for(let s of r)o?o=!1:i+=",",i+=`${s}:${Ry(n.fields[s])}`;return i+"}"})(t.mapValue):G(61005,{value:t})}function Dd(t){switch(mr(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:let e=ih(t);return e?16+Dd(e):16;case 5:return 2*t.stringValue.length;case 6:return $n(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce((i,o)=>i+Dd(o),0)})(t.arrayValue);case 10:case 11:return(function(r){let i=0;return ac(r.fields,(o,s)=>{i+=o.length+Dd(s)}),i})(t.mapValue);default:throw G(13486,{value:t})}}function Ny(t){return!!t&&"integerValue"in t}function Yv(t){return!!t&&"arrayValue"in t}function AC(t){return!!t&&"nullValue"in t}function RC(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function py(t){return!!t&&"mapValue"in t}function PS(t){var e,n;return((n=(((e=t?.mapValue)===null||e===void 0?void 0:e.fields)||{})[RS])===null||n===void 0?void 0:n.stringValue)===MS}function Ba(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){let e={mapValue:{fields:{}}};return ac(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Ba(r)),e}if(t.arrayValue){let e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Ba(t.arrayValue.values[n]);return e}return Object.assign({},t)}function xS(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===NS}var CJ={mapValue:{fields:{[RS]:{stringValue:MS},[Ka]:{arrayValue:{}}}}};var jn=class t{constructor(e){this.value=e}static empty(){return new t({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!py(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ba(n)}setAll(e){let n=Xt.emptyPath(),r={},i=[];e.forEach((s,c)=>{if(!n.isImmediateParentOf(c)){let u=this.getFieldsMap(n);this.applyChanges(u,r,i),r={},i=[],n=c.popLast()}s?r[c.lastSegment()]=Ba(s):i.push(c.lastSegment())});let o=this.getFieldsMap(n);this.applyChanges(o,r,i)}delete(e){let n=this.field(e.popLast());py(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return yn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];py(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){ac(n,(i,o)=>e[i]=o);for(let i of r)delete e[i]}clone(){return new t(Ba(this.value))}};var en=class t{constructor(e,n,r,i,o,s,c){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=o,this.data=s,this.documentState=c}static newInvalidDocument(e){return new t(e,0,Y.min(),Y.min(),Y.min(),jn.empty(),0)}static newFoundDocument(e,n,r,i){return new t(e,1,n,Y.min(),r,i,0)}static newNoDocument(e,n){return new t(e,2,n,Y.min(),Y.min(),jn.empty(),0)}static newUnknownDocument(e,n){return new t(e,3,n,Y.min(),Y.min(),jn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Y.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=jn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=jn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Y.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new t(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var Bo=class{constructor(e,n){this.position=e,this.inclusive=n}};function NC(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){let o=e[i],s=t.position[i];if(o.field.isKeyField()?r=B.comparator(B.fromName(s.referenceValue),n.key):r=jo(s,n.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function MC(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!yn(t.position[n],e.position[n]))return!1;return!0}var $o=class{constructor(e,n="asc"){this.field=e,this.dir=n}};function jV(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}var Od=class{},je=class t extends Od{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new Py(e,n,r):n==="array-contains"?new Oy(e,r):n==="in"?new Ly(e,r):n==="not-in"?new Fy(e,r):n==="array-contains-any"?new Vy(e,r):new t(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new xy(e,r):new ky(e,r)}matches(e){let n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(jo(n,this.value)):n!==null&&mr(this.value)===mr(n)&&this.matchesComparison(jo(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return G(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},vn=class t extends Od{constructor(e,n){super(),this.filters=e,this.op=n,this.he=null}static create(e,n){return new t(e,n)}matches(e){return kS(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.he!==null||(this.he=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.he}getFilters(){return Object.assign([],this.filters)}};function kS(t){return t.op==="and"}function OS(t){return UV(t)&&kS(t)}function UV(t){for(let e of t.filters)if(e instanceof vn)return!1;return!0}function My(t){if(t instanceof je)return t.field.canonicalString()+t.op.toString()+Uo(t.value);if(OS(t))return t.filters.map(e=>My(e)).join(",");{let e=t.filters.map(n=>My(n)).join(",");return`${t.op}(${e})`}}function LS(t,e){return t instanceof je?(function(r,i){return i instanceof je&&r.op===i.op&&r.field.isEqual(i.field)&&yn(r.value,i.value)})(t,e):t instanceof vn?(function(r,i){return i instanceof vn&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((o,s,c)=>o&&LS(s,i.filters[c]),!0):!1})(t,e):void G(19439)}function FS(t){return t instanceof je?(function(n){return`${n.field.canonicalString()} ${n.op} ${Uo(n.value)}`})(t):t instanceof vn?(function(n){return n.op.toString()+" {"+n.getFilters().map(FS).join(" ,")+"}"})(t):"Filter"}var Py=class extends je{constructor(e,n,r){super(e,n,r),this.key=B.fromName(r.referenceValue)}matches(e){let n=B.comparator(e.key,this.key);return this.matchesComparison(n)}},xy=class extends je{constructor(e,n){super(e,"in",n),this.keys=VS("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}},ky=class extends je{constructor(e,n){super(e,"not-in",n),this.keys=VS("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}};function VS(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>B.fromName(r.referenceValue))}var Oy=class extends je{constructor(e,n){super(e,"array-contains",n)}matches(e){let n=e.data.field(this.field);return Yv(n)&&Qa(n.arrayValue,this.value)}},Ly=class extends je{constructor(e,n){super(e,"in",n)}matches(e){let n=e.data.field(this.field);return n!==null&&Qa(this.value.arrayValue,n)}},Fy=class extends je{constructor(e,n){super(e,"not-in",n)}matches(e){if(Qa(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Qa(this.value.arrayValue,n)}},Vy=class extends je{constructor(e,n){super(e,"array-contains-any",n)}matches(e){let n=e.data.field(this.field);return!(!Yv(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Qa(this.value.arrayValue,r))}};var jy=class{constructor(e,n=null,r=[],i=[],o=null,s=null,c=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=s,this.endAt=c,this.Pe=null}};function PC(t,e=null,n=[],r=[],i=null,o=null,s=null){return new jy(t,e,n,r,i,o,s)}function Zv(t){let e=ie(t);if(e.Pe===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>My(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>(function(o){return o.field.canonicalString()+o.dir})(r)).join(","),rh(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Uo(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Uo(r)).join(",")),e.Pe=n}return e.Pe}function Jv(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!jV(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!LS(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!MC(t.startAt,e.startAt)&&MC(t.endAt,e.endAt)}function Uy(t){return B.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}var Ho=class{constructor(e,n=null,r=[],i=[],o=null,s="F",c=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=s,this.startAt=c,this.endAt=u,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}};function BV(t,e,n,r,i,o,s,c){return new Ho(t,e,n,r,i,o,s,c)}function Xv(t){return new Ho(t)}function xC(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function $V(t){return t.collectionGroup!==null}function $a(t){let e=ie(t);if(e.Te===null){e.Te=[];let n=new Set;for(let o of e.explicitOrderBy)e.Te.push(o),n.add(o.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let c=new qe(Xt.comparator);return s.filters.forEach(u=>{u.getFlattenedFilters().forEach(l=>{l.isInequality()&&(c=c.add(l.field))})}),c})(e).forEach(o=>{n.has(o.canonicalString())||o.isKeyField()||e.Te.push(new $o(o,r))}),n.has(Xt.keyField().canonicalString())||e.Te.push(new $o(Xt.keyField(),r))}return e.Te}function gn(t){let e=ie(t);return e.Ie||(e.Ie=HV(e,$a(t))),e.Ie}function HV(t,e){if(t.limitType==="F")return PC(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{let o=i.dir==="desc"?"asc":"desc";return new $o(i.field,o)});let n=t.endAt?new Bo(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Bo(t.startAt.position,t.startAt.inclusive):null;return PC(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function By(t,e,n){return new Ho(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function oh(t,e){return Jv(gn(t),gn(e))&&t.limitType===e.limitType}function jS(t){return`${Zv(gn(t))}|lt:${t.limitType}`}function Co(t){return`Query(target=${(function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>FS(i)).join(", ")}]`),rh(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>(function(s){return`${s.field.canonicalString()} (${s.dir})`})(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>Uo(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>Uo(i)).join(",")),`Target(${r})`})(gn(t))}; limitType=${t.limitType})`}function sh(t,e){return e.isFoundDocument()&&(function(r,i){let o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):B.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)})(t,e)&&(function(r,i){for(let o of $a(r))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0})(t,e)&&(function(r,i){for(let o of r.filters)if(!o.matches(i))return!1;return!0})(t,e)&&(function(r,i){return!(r.startAt&&!(function(s,c,u){let l=NC(s,c,u);return s.inclusive?l<=0:l<0})(r.startAt,$a(r),i)||r.endAt&&!(function(s,c,u){let l=NC(s,c,u);return s.inclusive?l>=0:l>0})(r.endAt,$a(r),i))})(t,e)}function zV(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function US(t){return(e,n)=>{let r=!1;for(let i of $a(t)){let o=qV(i,e,n);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function qV(t,e,n){let r=t.field.isKeyField()?B.comparator(e.key,n.key):(function(o,s,c){let u=s.data.field(o),l=c.data.field(o);return u!==null&&l!==null?jo(u,l):G(42886)})(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return G(19790,{direction:t.dir})}}var Hn=class{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){let n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(let[i,o]of r)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,n){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){let n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){ac(this.inner,(n,r)=>{for(let[i,o]of r)e(i,o)})}isEmpty(){return FV(this.inner)}size(){return this.innerSize}};var GV=new Re(B.comparator);function yr(){return GV}var BS=new Re(B.comparator);function Ua(...t){let e=BS;for(let n of t)e=e.insert(n.key,n);return e}function WV(t){let e=BS;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function vi(){return Ha()}function $S(){return Ha()}function Ha(){return new Hn(t=>t.toString(),(t,e)=>t.isEqual(e))}var SJ=new Re(B.comparator),KV=new qe(B.comparator);function oe(...t){let e=KV;for(let n of t)e=e.add(n);return e}var QV=new qe(ee);function YV(){return QV}function ZV(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Nd(e)?"-0":e}}function JV(t){return{integerValue:""+t}}var zo=class{constructor(){this._=void 0}};function XV(t,e,n){return t instanceof Ya?(function(i,o){let s={fields:{[CS]:{stringValue:bS},[AS]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&Qv(o)&&(o=ih(o)),o&&(s.fields[SS]=o),{mapValue:s}})(n,e):t instanceof qo?HS(t,e):t instanceof Go?zS(t,e):(function(i,o){let s=t2(i,o),c=kC(s)+kC(i.Ee);return Ny(s)&&Ny(i.Ee)?JV(c):ZV(i.serializer,c)})(t,e)}function e2(t,e,n){return t instanceof qo?HS(t,e):t instanceof Go?zS(t,e):n}function t2(t,e){return t instanceof Za?(function(r){return Ny(r)||(function(o){return!!o&&"doubleValue"in o})(r)})(e)?e:{integerValue:0}:null}var Ya=class extends zo{},qo=class extends zo{constructor(e){super(),this.elements=e}};function HS(t,e){let n=qS(e);for(let r of t.elements)n.some(i=>yn(i,r))||n.push(r);return{arrayValue:{values:n}}}var Go=class extends zo{constructor(e){super(),this.elements=e}};function zS(t,e){let n=qS(e);for(let r of t.elements)n=n.filter(i=>!yn(i,r));return{arrayValue:{values:n}}}var Za=class extends zo{constructor(e,n){super(),this.serializer=e,this.Ee=n}};function kC(t){return Ie(t.integerValue||t.doubleValue)}function qS(t){return Yv(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function n2(t,e){return t.field.isEqual(e.field)&&(function(r,i){return r instanceof qo&&i instanceof qo||r instanceof Go&&i instanceof Go?Vo(r.elements,i.elements,yn):r instanceof Za&&i instanceof Za?yn(r.Ee,i.Ee):r instanceof Ya&&i instanceof Ya})(t.transform,e.transform)}var za=class t{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new t}static exists(e){return new t(void 0,e)}static updateTime(e){return new t(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function bd(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}var Ja=class{};function GS(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new $y(t.key,za.none()):new Xa(t.key,t.data,za.none());{let n=t.data,r=jn.empty(),i=new qe(Xt.comparator);for(let o of e.fields)if(!i.has(o)){let s=n.field(o);s===null&&o.length>1&&(o=o.popLast(),s=n.field(o)),s===null?r.delete(o):r.set(o,s),i=i.add(o)}return new Wo(t.key,r,new yi(i.toArray()),za.none())}}function r2(t,e,n){t instanceof Xa?(function(i,o,s){let c=i.value.clone(),u=LC(i.fieldTransforms,o,s.transformResults);c.setAll(u),o.convertToFoundDocument(s.version,c).setHasCommittedMutations()})(t,e,n):t instanceof Wo?(function(i,o,s){if(!bd(i.precondition,o))return void o.convertToUnknownDocument(s.version);let c=LC(i.fieldTransforms,o,s.transformResults),u=o.data;u.setAll(WS(i)),u.setAll(c),o.convertToFoundDocument(s.version,u).setHasCommittedMutations()})(t,e,n):(function(i,o,s){o.convertToNoDocument(s.version).setHasCommittedMutations()})(0,e,n)}function qa(t,e,n,r){return t instanceof Xa?(function(o,s,c,u){if(!bd(o.precondition,s))return c;let l=o.value.clone(),h=FC(o.fieldTransforms,u,s);return l.setAll(h),s.convertToFoundDocument(s.version,l).setHasLocalMutations(),null})(t,e,n,r):t instanceof Wo?(function(o,s,c,u){if(!bd(o.precondition,s))return c;let l=FC(o.fieldTransforms,u,s),h=s.data;return h.setAll(WS(o)),h.setAll(l),s.convertToFoundDocument(s.version,h).setHasLocalMutations(),c===null?null:c.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(p=>p.field))})(t,e,n,r):(function(o,s,c){return bd(o.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):c})(t,e,n)}function OC(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!(function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Vo(r,i,(o,s)=>n2(o,s))})(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}var Xa=class extends Ja{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},Wo=class extends Ja{constructor(e,n,r,i,o=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}};function WS(t){let e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){let r=t.data.field(n);e.set(n,r)}}),e}function LC(t,e,n){let r=new Map;we(t.length===n.length,32656,{Ae:n.length,Re:t.length});for(let i=0;i<n.length;i++){let o=t[i],s=o.transform,c=e.data.field(o.field);r.set(o.field,e2(s,c,n[i]))}return r}function FC(t,e,n){let r=new Map;for(let i of t){let o=i.transform,s=n.data.field(i.field);r.set(i.field,XV(o,s,e))}return r}var $y=class extends Ja{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}};var Hy=class{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){let r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){let o=this.mutations[i];o.key.isEqual(e.key)&&r2(o,e,r[i])}}applyToLocalView(e,n){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(n=qa(r,e,n,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(n=qa(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){let r=$S();return this.mutations.forEach(i=>{let o=e.get(i.key),s=o.overlayedDocument,c=this.applyToLocalView(s,o.mutatedFields);c=n.has(i.key)?null:c;let u=GS(s,c);u!==null&&r.set(i.key,u),s.isValidDocument()||s.convertToNoDocument(Y.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),oe())}isEqual(e){return this.batchId===e.batchId&&Vo(this.mutations,e.mutations,(n,r)=>OC(n,r))&&Vo(this.baseMutations,e.baseMutations,(n,r)=>OC(n,r))}};var zy=class{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var qy=class{constructor(e,n){this.count=e,this.unchangedNames=n}};var Ne,re;function KS(t){if(t===void 0)return Un("GRPC error has no .code"),x.UNKNOWN;switch(t){case Ne.OK:return x.OK;case Ne.CANCELLED:return x.CANCELLED;case Ne.UNKNOWN:return x.UNKNOWN;case Ne.DEADLINE_EXCEEDED:return x.DEADLINE_EXCEEDED;case Ne.RESOURCE_EXHAUSTED:return x.RESOURCE_EXHAUSTED;case Ne.INTERNAL:return x.INTERNAL;case Ne.UNAVAILABLE:return x.UNAVAILABLE;case Ne.UNAUTHENTICATED:return x.UNAUTHENTICATED;case Ne.INVALID_ARGUMENT:return x.INVALID_ARGUMENT;case Ne.NOT_FOUND:return x.NOT_FOUND;case Ne.ALREADY_EXISTS:return x.ALREADY_EXISTS;case Ne.PERMISSION_DENIED:return x.PERMISSION_DENIED;case Ne.FAILED_PRECONDITION:return x.FAILED_PRECONDITION;case Ne.ABORTED:return x.ABORTED;case Ne.OUT_OF_RANGE:return x.OUT_OF_RANGE;case Ne.UNIMPLEMENTED:return x.UNIMPLEMENTED;case Ne.DATA_LOSS:return x.DATA_LOSS;default:return G(39323,{code:t})}}(re=Ne||(Ne={}))[re.OK=0]="OK",re[re.CANCELLED=1]="CANCELLED",re[re.UNKNOWN=2]="UNKNOWN",re[re.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",re[re.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",re[re.NOT_FOUND=5]="NOT_FOUND",re[re.ALREADY_EXISTS=6]="ALREADY_EXISTS",re[re.PERMISSION_DENIED=7]="PERMISSION_DENIED",re[re.UNAUTHENTICATED=16]="UNAUTHENTICATED",re[re.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",re[re.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",re[re.ABORTED=10]="ABORTED",re[re.OUT_OF_RANGE=11]="OUT_OF_RANGE",re[re.UNIMPLEMENTED=12]="UNIMPLEMENTED",re[re.INTERNAL=13]="INTERNAL",re[re.UNAVAILABLE=14]="UNAVAILABLE",re[re.DATA_LOSS=15]="DATA_LOSS";var VC=null;var i2=new Fn([4294967295,4294967295],0);function jC(t){let e=lS().encode(t),n=new cy;return n.update(e),new Uint8Array(n.digest())}function UC(t){let e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new Fn([n,r],0),new Fn([i,o],0)]}var Gy=class t{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new _i(`Invalid padding: ${n}`);if(r<0)throw new _i(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new _i(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new _i(`Invalid padding when bitmap length is 0: ${n}`);this.fe=8*e.length-n,this.ge=Fn.fromNumber(this.fe)}pe(e,n,r){let i=e.add(n.multiply(Fn.fromNumber(r)));return i.compare(i2)===1&&(i=new Fn([i.getBits(0),i.getBits(1)],0)),i.modulo(this.ge).toNumber()}ye(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.fe===0)return!1;let n=jC(e),[r,i]=UC(n);for(let o=0;o<this.hashCount;o++){let s=this.pe(r,i,o);if(!this.ye(s))return!1}return!0}static create(e,n,r){let i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),s=new t(o,i,n);return r.forEach(c=>s.insert(c)),s}insert(e){if(this.fe===0)return;let n=jC(e),[r,i]=UC(n);for(let o=0;o<this.hashCount;o++){let s=this.pe(r,i,o);this.we(s)}}we(e){let n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}},_i=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var Ld=class t{constructor(e,n,r,i,o){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,n,r){let i=new Map;return i.set(e,ec.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new t(Y.min(),i,new Re(ee),yr(),oe())}},ec=class t{constructor(e,n,r,i,o){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new t(r,n,oe(),oe(),oe())}};var No=class{constructor(e,n,r,i){this.Se=e,this.removedTargetIds=n,this.key=r,this.be=i}},Fd=class{constructor(e,n){this.targetId=e,this.De=n}},Vd=class{constructor(e,n,r=it.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}},jd=class{constructor(){this.ve=0,this.Ce=BC(),this.Fe=it.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return this.ve!==0}get Ne(){return this.xe}Be(e){e.approximateByteSize()>0&&(this.xe=!0,this.Fe=e)}Le(){let e=oe(),n=oe(),r=oe();return this.Ce.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:G(38017,{changeType:o})}}),new ec(this.Fe,this.Me,e,n,r)}ke(){this.xe=!1,this.Ce=BC()}qe(e,n){this.xe=!0,this.Ce=this.Ce.insert(e,n)}Qe(e){this.xe=!0,this.Ce=this.Ce.remove(e)}$e(){this.ve+=1}Ue(){this.ve-=1,we(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}},Wy=class{constructor(e){this.We=e,this.Ge=new Map,this.ze=yr(),this.je=Id(),this.Je=Id(),this.He=new Re(ee)}Ye(e){for(let n of e.Se)e.be&&e.be.isFoundDocument()?this.Ze(n,e.be):this.Xe(n,e.key,e.be);for(let n of e.removedTargetIds)this.Xe(n,e.key,e.be)}et(e){this.forEachTarget(e,n=>{let r=this.tt(n);switch(e.state){case 0:this.nt(n)&&r.Be(e.resumeToken);break;case 1:r.Ue(),r.Oe||r.ke(),r.Be(e.resumeToken);break;case 2:r.Ue(),r.Oe||this.removeTarget(n);break;case 3:this.nt(n)&&(r.Ke(),r.Be(e.resumeToken));break;case 4:this.nt(n)&&(this.rt(n),r.Be(e.resumeToken));break;default:G(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Ge.forEach((r,i)=>{this.nt(i)&&n(i)})}it(e){let n=e.targetId,r=e.De.count,i=this.st(n);if(i){let o=i.target;if(Uy(o))if(r===0){let s=new B(o.path);this.Xe(n,s,en.newNoDocument(s,Y.min()))}else we(r===1,20013,{expectedCount:r});else{let s=this.ot(n);if(s!==r){let c=this._t(e),u=c?this.ut(c,e,s):1;if(u!==0){this.rt(n);let l=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.He=this.He.insert(n,l)}VC?.ct((function(h,p,m,y,C){var A,R,k,$,Q,ge;let ot={localCacheCount:h,existenceFilterCount:p.count,databaseId:m.database,projectId:m.projectId},he=p.unchangedNames;return he&&(ot.bloomFilter={applied:C===0,hashCount:(A=he?.hashCount)!==null&&A!==void 0?A:0,bitmapLength:($=(k=(R=he?.bits)===null||R===void 0?void 0:R.bitmap)===null||k===void 0?void 0:k.length)!==null&&$!==void 0?$:0,padding:(ge=(Q=he?.bits)===null||Q===void 0?void 0:Q.padding)!==null&&ge!==void 0?ge:0,mightContain:w=>{var v;return(v=y?.mightContain(w))!==null&&v!==void 0&&v}}),ot})(s,e.De,this.We.lt(),c,u))}}}}_t(e){let n=e.De.unchangedNames;if(!n||!n.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=n,s,c;try{s=$n(r).toUint8Array()}catch(u){if(u instanceof Pd)return gr("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{c=new Gy(s,i,o)}catch(u){return gr(u instanceof _i?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return c.fe===0?null:c}ut(e,n,r){return n.De.count===r-this.ht(e,n.targetId)?0:2}ht(e,n){let r=this.We.getRemoteKeysForTarget(n),i=0;return r.forEach(o=>{let s=this.We.lt(),c=`projects/${s.projectId}/databases/${s.database}/documents/${o.path.canonicalString()}`;e.mightContain(c)||(this.Xe(n,o,null),i++)}),i}Pt(e){let n=new Map;this.Ge.forEach((o,s)=>{let c=this.st(s);if(c){if(o.current&&Uy(c.target)){let u=new B(c.target.path);this.Tt(u).has(s)||this.It(s,u)||this.Xe(s,u,en.newNoDocument(u,e))}o.Ne&&(n.set(s,o.Le()),o.ke())}});let r=oe();this.Je.forEach((o,s)=>{let c=!0;s.forEachWhile(u=>{let l=this.st(u);return!l||l.purpose==="TargetPurposeLimboResolution"||(c=!1,!1)}),c&&(r=r.add(o))}),this.ze.forEach((o,s)=>s.setReadTime(e));let i=new Ld(e,n,this.He,this.ze,r);return this.ze=yr(),this.je=Id(),this.Je=Id(),this.He=new Re(ee),i}Ze(e,n){if(!this.nt(e))return;let r=this.It(e,n.key)?2:0;this.tt(e).qe(n.key,r),this.ze=this.ze.insert(n.key,n),this.je=this.je.insert(n.key,this.Tt(n.key).add(e)),this.Je=this.Je.insert(n.key,this.dt(n.key).add(e))}Xe(e,n,r){if(!this.nt(e))return;let i=this.tt(e);this.It(e,n)?i.qe(n,1):i.Qe(n),this.Je=this.Je.insert(n,this.dt(n).delete(e)),this.Je=this.Je.insert(n,this.dt(n).add(e)),r&&(this.ze=this.ze.insert(n,r))}removeTarget(e){this.Ge.delete(e)}ot(e){let n=this.tt(e).Le();return this.We.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}$e(e){this.tt(e).$e()}tt(e){let n=this.Ge.get(e);return n||(n=new jd,this.Ge.set(e,n)),n}dt(e){let n=this.Je.get(e);return n||(n=new qe(ee),this.Je=this.Je.insert(e,n)),n}Tt(e){let n=this.je.get(e);return n||(n=new qe(ee),this.je=this.je.insert(e,n)),n}nt(e){let n=this.st(e)!==null;return n||O("WatchChangeAggregator","Detected inactive target",e),n}st(e){let n=this.Ge.get(e);return n&&n.Oe?null:this.We.Et(e)}rt(e){this.Ge.set(e,new jd),this.We.getRemoteKeysForTarget(e).forEach(n=>{this.Xe(e,n,null)})}It(e,n){return this.We.getRemoteKeysForTarget(e).has(n)}};function Id(){return new Re(B.comparator)}function BC(){return new Re(B.comparator)}var o2={asc:"ASCENDING",desc:"DESCENDING"},s2={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},a2={and:"AND",or:"OR"},Ky=class{constructor(e,n){this.databaseId=e,this.useProto3Json=n}};function Qy(t,e){return t.useProto3Json||rh(e)?e:{value:e}}function c2(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function u2(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function Mo(t){return we(!!t,49232),Y.fromTimestamp((function(n){let r=Bn(n);return new pt(r.seconds,r.nanos)})(t))}function l2(t,e){return Yy(t,e).canonicalString()}function Yy(t,e){let n=(function(i){return new Ae(["projects",i.projectId,"databases",i.database])})(t).child("documents");return e===void 0?n:n.child(e)}function QS(t){let e=Ae.fromString(t);return we(eA(e),10190,{key:e.toString()}),e}function gy(t,e){let n=QS(e);if(n.get(1)!==t.databaseId.projectId)throw new F(x.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new F(x.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new B(ZS(n))}function YS(t,e){return l2(t.databaseId,e)}function d2(t){let e=QS(t);return e.length===4?Ae.emptyPath():ZS(e)}function $C(t){return new Ae(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function ZS(t){return we(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function h2(t,e){let n;if("targetChange"in e){e.targetChange;let r=(function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:G(39313,{state:l})})(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=(function(l,h){return l.useProto3Json?(we(h===void 0||typeof h=="string",58123),it.fromBase64String(h||"")):(we(h===void 0||h instanceof Buffer||h instanceof Uint8Array,16193),it.fromUint8Array(h||new Uint8Array))})(t,e.targetChange.resumeToken),s=e.targetChange.cause,c=s&&(function(l){let h=l.code===void 0?x.UNKNOWN:KS(l.code);return new F(h,l.message||"")})(s);n=new Vd(r,i,o,c||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=gy(t,r.document.name),o=Mo(r.document.updateTime),s=r.document.createTime?Mo(r.document.createTime):Y.min(),c=new jn({mapValue:{fields:r.document.fields}}),u=en.newFoundDocument(i,o,s,c),l=r.targetIds||[],h=r.removedTargetIds||[];n=new No(l,h,u.key,u)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=gy(t,r.document),o=r.readTime?Mo(r.readTime):Y.min(),s=en.newNoDocument(i,o),c=r.removedTargetIds||[];n=new No([],c,s.key,s)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=gy(t,r.document),o=r.removedTargetIds||[];n=new No([],o,i,null)}else{if(!("filter"in e))return G(11601,{At:e});{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:o}=r,s=new qy(i,o),c=r.targetId;n=new Fd(c,s)}}return n}function f2(t,e){return{documents:[YS(t,e.path)]}}function p2(t,e){let n={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=YS(t,i);let o=(function(l){if(l.length!==0)return XS(vn.create(l,"and"))})(e.filters);o&&(n.structuredQuery.where=o);let s=(function(l){if(l.length!==0)return l.map(h=>(function(m){return{field:So(m.field),direction:y2(m.dir)}})(h))})(e.orderBy);s&&(n.structuredQuery.orderBy=s);let c=Qy(t,e.limit);return c!==null&&(n.structuredQuery.limit=c),e.startAt&&(n.structuredQuery.startAt=(function(l){return{before:l.inclusive,values:l.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(l){return{before:!l.inclusive,values:l.position}})(e.endAt)),{Vt:n,parent:i}}function g2(t){let e=d2(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){we(r===1,65062);let h=n.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let o=[];n.where&&(o=(function(p){let m=JS(p);return m instanceof vn&&OS(m)?m.getFilters():[m]})(n.where));let s=[];n.orderBy&&(s=(function(p){return p.map(m=>(function(C){return new $o(Ao(C.field),(function(R){switch(R){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(C.direction))})(m))})(n.orderBy));let c=null;n.limit&&(c=(function(p){let m;return m=typeof p=="object"?p.value:p,rh(m)?null:m})(n.limit));let u=null;n.startAt&&(u=(function(p){let m=!!p.before,y=p.values||[];return new Bo(y,m)})(n.startAt));let l=null;return n.endAt&&(l=(function(p){let m=!p.before,y=p.values||[];return new Bo(y,m)})(n.endAt)),BV(e,i,s,o,c,"F",u,l)}function m2(t,e){let n=(function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return G(28987,{purpose:i})}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function JS(t){return t.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":let r=Ao(n.unaryFilter.field);return je.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=Ao(n.unaryFilter.field);return je.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let o=Ao(n.unaryFilter.field);return je.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let s=Ao(n.unaryFilter.field);return je.create(s,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return G(61313);default:return G(60726)}})(t):t.fieldFilter!==void 0?(function(n){return je.create(Ao(n.fieldFilter.field),(function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return G(58110);default:return G(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(t):t.compositeFilter!==void 0?(function(n){return vn.create(n.compositeFilter.filters.map(r=>JS(r)),(function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return G(1026)}})(n.compositeFilter.op))})(t):G(30097,{filter:t})}function y2(t){return o2[t]}function v2(t){return s2[t]}function _2(t){return a2[t]}function So(t){return{fieldPath:t.canonicalString()}}function Ao(t){return Xt.fromServerFormat(t.fieldPath)}function XS(t){return t instanceof je?(function(n){if(n.op==="=="){if(RC(n.value))return{unaryFilter:{field:So(n.field),op:"IS_NAN"}};if(AC(n.value))return{unaryFilter:{field:So(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(RC(n.value))return{unaryFilter:{field:So(n.field),op:"IS_NOT_NAN"}};if(AC(n.value))return{unaryFilter:{field:So(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:So(n.field),op:v2(n.op),value:n.value}}})(t):t instanceof vn?(function(n){let r=n.getFilters().map(i=>XS(i));return r.length===1?r[0]:{compositeFilter:{op:_2(n.op),filters:r}}})(t):G(54877,{filter:t})}function eA(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}var tc=class t{constructor(e,n,r,i,o=Y.min(),s=Y.min(),c=it.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=c,this.expectedCount=u}withSequenceNumber(e){return new t(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var Zy=class{constructor(e){this.gt=e}};function E2(t){let e=g2({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?By(e,e.limit,"L"):e}var Ud=class{constructor(){}bt(e,n){this.Dt(e,n),n.vt()}Dt(e,n){if("nullValue"in e)this.Ct(n,5);else if("booleanValue"in e)this.Ct(n,10),n.Ft(e.booleanValue?1:0);else if("integerValue"in e)this.Ct(n,15),n.Ft(Ie(e.integerValue));else if("doubleValue"in e){let r=Ie(e.doubleValue);isNaN(r)?this.Ct(n,13):(this.Ct(n,15),Nd(r)?n.Ft(0):n.Ft(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Ct(n,20),typeof r=="string"&&(r=Bn(r)),n.Mt(`${r.seconds||""}`),n.Ft(r.nanos||0)}else if("stringValue"in e)this.xt(e.stringValue,n),this.Ot(n);else if("bytesValue"in e)this.Ct(n,30),n.Nt($n(e.bytesValue)),this.Ot(n);else if("referenceValue"in e)this.Bt(e.referenceValue,n);else if("geoPointValue"in e){let r=e.geoPointValue;this.Ct(n,45),n.Ft(r.latitude||0),n.Ft(r.longitude||0)}else"mapValue"in e?xS(e)?this.Ct(n,Number.MAX_SAFE_INTEGER):PS(e)?this.Lt(e.mapValue,n):(this.kt(e.mapValue,n),this.Ot(n)):"arrayValue"in e?(this.qt(e.arrayValue,n),this.Ot(n)):G(19022,{Qt:e})}xt(e,n){this.Ct(n,25),this.$t(e,n)}$t(e,n){n.Mt(e)}kt(e,n){let r=e.fields||{};this.Ct(n,55);for(let i of Object.keys(r))this.xt(i,n),this.Dt(r[i],n)}Lt(e,n){var r,i;let o=e.fields||{};this.Ct(n,53);let s=Ka,c=((i=(r=o[s].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.length)||0;this.Ct(n,15),n.Ft(Ie(c)),this.xt(s,n),this.Dt(o[s],n)}qt(e,n){let r=e.values||[];this.Ct(n,50);for(let i of r)this.Dt(i,n)}Bt(e,n){this.Ct(n,37),B.fromName(e).path.forEach(r=>{this.Ct(n,60),this.$t(r,n)})}Ct(e,n){e.Ft(n)}Ot(e){e.Ft(2)}};Ud.Ut=new Ud;var Jy=class{constructor(){this.Dn=new Xy}addToCollectionParentIndex(e,n){return this.Dn.add(n),N.resolve()}getCollectionParents(e,n){return N.resolve(this.Dn.getEntries(n))}addFieldIndex(e,n){return N.resolve()}deleteFieldIndex(e,n){return N.resolve()}deleteAllFieldIndexes(e){return N.resolve()}createTargetIndexes(e,n){return N.resolve()}getDocumentsMatchingTarget(e,n){return N.resolve(null)}getIndexType(e,n){return N.resolve(0)}getFieldIndexes(e,n){return N.resolve([])}getNextCollectionGroupToUpdate(e){return N.resolve(null)}getMinOffset(e,n){return N.resolve(Ti.min())}getMinOffsetFromCollectionGroup(e,n){return N.resolve(Ti.min())}updateCollectionGroup(e,n,r){return N.resolve()}updateIndexEntries(e,n){return N.resolve()}},Xy=class{constructor(){this.index={}}add(e){let n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new qe(Ae.comparator),o=!i.has(r);return this.index[n]=i.add(r),o}has(e){let n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new qe(Ae.comparator)).toArray()}};var AJ=new Uint8Array(0);var HC={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},tA=41943040,Lt=class t{static withCacheSize(e){return new t(e,t.DEFAULT_COLLECTION_PERCENTILE,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}};Lt.DEFAULT_COLLECTION_PERCENTILE=10,Lt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Lt.DEFAULT=new Lt(tA,Lt.DEFAULT_COLLECTION_PERCENTILE,Lt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Lt.DISABLED=new Lt(-1,0,0);var nc=class t{constructor(e){this._r=e}next(){return this._r+=2,this._r}static ar(){return new t(0)}static ur(){return new t(-1)}};var zC="LruGarbageCollector",I2=1048576;function qC([t,e],[n,r]){let i=ee(t,n);return i===0?ee(e,r):i}var ev=class{constructor(e){this.Tr=e,this.buffer=new qe(qC),this.Ir=0}dr(){return++this.Ir}Er(e){let n=[e,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(n);else{let r=this.buffer.last();qC(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}},tv=class{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Ar=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return this.Ar!==null}Rr(e){O(zC,`Garbage collection scheduled in ${e}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Ar=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Zo(n)?O(zC,"Ignoring IndexedDB error during garbage collection: ",n):await nh(n)}await this.Rr(3e5)})}},nv=class{constructor(e,n){this.Vr=e,this.params=n}calculateTargetCount(e,n){return this.Vr.mr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return N.resolve(Kv.ue);let r=new ev(n);return this.Vr.forEachTarget(e,i=>r.Er(i.sequenceNumber)).next(()=>this.Vr.gr(e,i=>r.Er(i))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.Vr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.Vr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(O("LruGarbageCollector","Garbage collection skipped; disabled"),N.resolve(HC)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(O("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),HC):this.pr(e,n))}getCacheSize(e){return this.Vr.getCacheSize(e)}pr(e,n){let r,i,o,s,c,u,l,h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(p=>(p>this.params.maximumSequenceNumbersToCollect?(O("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${p}`),i=this.params.maximumSequenceNumbersToCollect):i=p,s=Date.now(),this.nthSequenceNumber(e,i))).next(p=>(r=p,c=Date.now(),this.removeTargets(e,r,n))).next(p=>(o=p,u=Date.now(),this.removeOrphanedDocuments(e,r))).next(p=>(l=Date.now(),bo()<=te.DEBUG&&O("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${s-h}ms
	Determined least recently used ${i} in `+(c-s)+`ms
	Removed ${o} targets in `+(u-c)+`ms
	Removed ${p} documents in `+(l-u)+`ms
Total Duration: ${l-h}ms`),N.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:p})))}};function w2(t,e){return new nv(t,e)}var rv=class{constructor(){this.changes=new Hn(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,en.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();let r=this.changes.get(n);return r!==void 0?N.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var iv=class{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}};var ov=class{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&qa(r.mutation,i,yi.empty(),pt.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,oe()).next(()=>r))}getLocalViewOfDocuments(e,n,r=oe()){let i=vi();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(o=>{let s=Ua();return o.forEach((c,u)=>{s=s.insert(c,u.overlayedDocument)}),s}))}getOverlayedDocuments(e,n){let r=vi();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,oe()))}populateOverlays(e,n,r){let i=[];return r.forEach(o=>{n.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((s,c)=>{n.set(s,c)})})}computeViews(e,n,r,i){let o=yr(),s=Ha(),c=(function(){return Ha()})();return n.forEach((u,l)=>{let h=r.get(l.key);i.has(l.key)&&(h===void 0||h.mutation instanceof Wo)?o=o.insert(l.key,l):h!==void 0?(s.set(l.key,h.mutation.getFieldMask()),qa(h.mutation,l,h.mutation.getFieldMask(),pt.now())):s.set(l.key,yi.empty())}),this.recalculateAndSaveOverlays(e,o).next(u=>(u.forEach((l,h)=>s.set(l,h)),n.forEach((l,h)=>{var p;return c.set(l,new iv(h,(p=s.get(l))!==null&&p!==void 0?p:null))}),c))}recalculateAndSaveOverlays(e,n){let r=Ha(),i=new Re((s,c)=>s-c),o=oe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(s=>{for(let c of s)c.keys().forEach(u=>{let l=n.get(u);if(l===null)return;let h=r.get(u)||yi.empty();h=c.applyToLocalView(l,h),r.set(u,h);let p=(i.get(c.batchId)||oe()).add(u);i=i.insert(c.batchId,p)})}).next(()=>{let s=[],c=i.getReverseIterator();for(;c.hasNext();){let u=c.getNext(),l=u.key,h=u.value,p=$S();h.forEach(m=>{if(!o.has(m)){let y=GS(n.get(m),r.get(m));y!==null&&p.set(m,y),o=o.add(m)}}),s.push(this.documentOverlayCache.saveOverlays(e,l,p))}return N.waitFor(s)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return(function(s){return B.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0})(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):$V(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(o=>{let s=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-o.size):N.resolve(vi()),c=Ga,u=o;return s.next(l=>N.forEach(l,(h,p)=>(c<p.largestBatchId&&(c=p.largestBatchId),o.get(h)?N.resolve():this.remoteDocumentCache.getEntry(e,h).next(m=>{u=u.insert(h,m)}))).next(()=>this.populateOverlays(e,l,o)).next(()=>this.computeViews(e,u,l,oe())).next(h=>({batchId:c,changes:WV(h)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new B(n)).next(r=>{let i=Ua();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){let o=n.collectionGroup,s=Ua();return this.indexManager.getCollectionParents(e,o).next(c=>N.forEach(c,u=>{let l=(function(p,m){return new Ho(m,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)})(n,u.child(o));return this.getDocumentsMatchingCollectionQuery(e,l,r,i).next(h=>{h.forEach((p,m)=>{s=s.insert(p,m)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,n,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(s=>(o=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,o,i))).next(s=>{o.forEach((u,l)=>{let h=l.getKey();s.get(h)===null&&(s=s.insert(h,en.newInvalidDocument(h)))});let c=Ua();return s.forEach((u,l)=>{let h=o.get(u);h!==void 0&&qa(h.mutation,l,yi.empty(),pt.now()),sh(n,l)&&(c=c.insert(u,l))}),c})}};var sv=class{constructor(e){this.serializer=e,this.Br=new Map,this.Lr=new Map}getBundleMetadata(e,n){return N.resolve(this.Br.get(n))}saveBundleMetadata(e,n){return this.Br.set(n.id,(function(i){return{id:i.id,version:i.version,createTime:Mo(i.createTime)}})(n)),N.resolve()}getNamedQuery(e,n){return N.resolve(this.Lr.get(n))}saveNamedQuery(e,n){return this.Lr.set(n.name,(function(i){return{name:i.name,query:E2(i.bundledQuery),readTime:Mo(i.readTime)}})(n)),N.resolve()}};var av=class{constructor(){this.overlays=new Re(B.comparator),this.kr=new Map}getOverlay(e,n){return N.resolve(this.overlays.get(n))}getOverlays(e,n){let r=vi();return N.forEach(n,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,o)=>{this.wt(e,n,o)}),N.resolve()}removeOverlaysForBatchId(e,n,r){let i=this.kr.get(r);return i!==void 0&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.kr.delete(r)),N.resolve()}getOverlaysForCollection(e,n,r){let i=vi(),o=n.length+1,s=new B(n.child("")),c=this.overlays.getIteratorFrom(s);for(;c.hasNext();){let u=c.getNext().value,l=u.getKey();if(!n.isPrefixOf(l.path))break;l.path.length===o&&u.largestBatchId>r&&i.set(u.getKey(),u)}return N.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let o=new Re((l,h)=>l-h),s=this.overlays.getIterator();for(;s.hasNext();){let l=s.getNext().value;if(l.getKey().getCollectionGroup()===n&&l.largestBatchId>r){let h=o.get(l.largestBatchId);h===null&&(h=vi(),o=o.insert(l.largestBatchId,h)),h.set(l.getKey(),l)}}let c=vi(),u=o.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((l,h)=>c.set(l,h)),!(c.size()>=i)););return N.resolve(c)}wt(e,n,r){let i=this.overlays.get(r.key);if(i!==null){let s=this.kr.get(i.largestBatchId).delete(r.key);this.kr.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(r.key,new zy(n,r));let o=this.kr.get(n);o===void 0&&(o=oe(),this.kr.set(n,o)),this.kr.set(n,o.add(r.key))}};var cv=class{constructor(){this.sessionToken=it.EMPTY_BYTE_STRING}getSessionToken(e){return N.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,N.resolve()}};var rc=class{constructor(){this.qr=new qe(Me.Qr),this.$r=new qe(Me.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(e,n){let r=new Me(e,n);this.qr=this.qr.add(r),this.$r=this.$r.add(r)}Kr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Wr(new Me(e,n))}Gr(e,n){e.forEach(r=>this.removeReference(r,n))}zr(e){let n=new B(new Ae([])),r=new Me(n,e),i=new Me(n,e+1),o=[];return this.$r.forEachInRange([r,i],s=>{this.Wr(s),o.push(s.key)}),o}jr(){this.qr.forEach(e=>this.Wr(e))}Wr(e){this.qr=this.qr.delete(e),this.$r=this.$r.delete(e)}Jr(e){let n=new B(new Ae([])),r=new Me(n,e),i=new Me(n,e+1),o=oe();return this.$r.forEachInRange([r,i],s=>{o=o.add(s.key)}),o}containsKey(e){let n=new Me(e,0),r=this.qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}},Me=class{constructor(e,n){this.key=e,this.Hr=n}static Qr(e,n){return B.comparator(e.key,n.key)||ee(e.Hr,n.Hr)}static Ur(e,n){return ee(e.Hr,n.Hr)||B.comparator(e.key,n.key)}};var uv=class{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.er=1,this.Yr=new qe(Me.Qr)}checkEmpty(e){return N.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){let o=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let s=new Hy(o,n,r,i);this.mutationQueue.push(s);for(let c of i)this.Yr=this.Yr.add(new Me(c.key,o)),this.indexManager.addToCollectionParentIndex(e,c.key.path.popLast());return N.resolve(s)}lookupMutationBatch(e,n){return N.resolve(this.Zr(n))}getNextMutationBatchAfterBatchId(e,n){let r=n+1,i=this.Xr(r),o=i<0?0:i;return N.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return N.resolve(this.mutationQueue.length===0?DV:this.er-1)}getAllMutationBatches(e){return N.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){let r=new Me(n,0),i=new Me(n,Number.POSITIVE_INFINITY),o=[];return this.Yr.forEachInRange([r,i],s=>{let c=this.Zr(s.Hr);o.push(c)}),N.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new qe(ee);return n.forEach(i=>{let o=new Me(i,0),s=new Me(i,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([o,s],c=>{r=r.add(c.Hr)})}),N.resolve(this.ei(r))}getAllMutationBatchesAffectingQuery(e,n){let r=n.path,i=r.length+1,o=r;B.isDocumentKey(o)||(o=o.child(""));let s=new Me(new B(o),0),c=new qe(ee);return this.Yr.forEachWhile(u=>{let l=u.key.path;return!!r.isPrefixOf(l)&&(l.length===i&&(c=c.add(u.Hr)),!0)},s),N.resolve(this.ei(c))}ei(e){let n=[];return e.forEach(r=>{let i=this.Zr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){we(this.ti(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Yr;return N.forEach(n.mutations,i=>{let o=new Me(i.key,n.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Yr=r})}rr(e){}containsKey(e,n){let r=new Me(n,0),i=this.Yr.firstAfterOrEqual(r);return N.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,N.resolve()}ti(e,n){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){let n=this.Xr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}};var lv=class{constructor(e){this.ni=e,this.docs=(function(){return new Re(B.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){let r=n.key,i=this.docs.get(r),o=i?i.size:0,s=this.ni(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:s}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){let r=this.docs.get(n);return N.resolve(r?r.document.mutableCopy():en.newInvalidDocument(n))}getEntries(e,n){let r=yr();return n.forEach(i=>{let o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():en.newInvalidDocument(i))}),N.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let o=yr(),s=n.path,c=new B(s.child("__id-9223372036854775808__")),u=this.docs.getIteratorFrom(c);for(;u.hasNext();){let{key:l,value:{document:h}}=u.getNext();if(!s.isPrefixOf(l.path))break;l.path.length>s.length+1||IV(EV(h),r)<=0||(i.has(h.key)||sh(n,h))&&(o=o.insert(h.key,h.mutableCopy()))}return N.resolve(o)}getAllFromCollectionGroup(e,n,r,i){G(9500)}ri(e,n){return N.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new dv(this)}getSize(e){return N.resolve(this.size)}},dv=class extends rv{constructor(e){super(),this.Or=e}applyChanges(e){let n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.Or.addEntry(e,i)):this.Or.removeEntry(r)}),N.waitFor(n)}getFromCache(e,n){return this.Or.getEntry(e,n)}getAllFromCache(e,n){return this.Or.getEntries(e,n)}};var hv=class{constructor(e){this.persistence=e,this.ii=new Hn(n=>Zv(n),Jv),this.lastRemoteSnapshotVersion=Y.min(),this.highestTargetId=0,this.si=0,this.oi=new rc,this.targetCount=0,this._i=nc.ar()}forEachTarget(e,n){return this.ii.forEach((r,i)=>n(i)),N.resolve()}getLastRemoteSnapshotVersion(e){return N.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return N.resolve(this.si)}allocateTargetId(e){return this.highestTargetId=this._i.next(),N.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.si&&(this.si=n),N.resolve()}hr(e){this.ii.set(e.target,e);let n=e.targetId;n>this.highestTargetId&&(this._i=new nc(n),this.highestTargetId=n),e.sequenceNumber>this.si&&(this.si=e.sequenceNumber)}addTargetData(e,n){return this.hr(n),this.targetCount+=1,N.resolve()}updateTargetData(e,n){return this.hr(n),N.resolve()}removeTargetData(e,n){return this.ii.delete(n.target),this.oi.zr(n.targetId),this.targetCount-=1,N.resolve()}removeTargets(e,n,r){let i=0,o=[];return this.ii.forEach((s,c)=>{c.sequenceNumber<=n&&r.get(c.targetId)===null&&(this.ii.delete(s),o.push(this.removeMatchingKeysForTargetId(e,c.targetId)),i++)}),N.waitFor(o).next(()=>i)}getTargetCount(e){return N.resolve(this.targetCount)}getTargetData(e,n){let r=this.ii.get(n)||null;return N.resolve(r)}addMatchingKeys(e,n,r){return this.oi.Kr(n,r),N.resolve()}removeMatchingKeys(e,n,r){this.oi.Gr(n,r);let i=this.persistence.referenceDelegate,o=[];return i&&n.forEach(s=>{o.push(i.markPotentiallyOrphaned(e,s))}),N.waitFor(o)}removeMatchingKeysForTargetId(e,n){return this.oi.zr(n),N.resolve()}getMatchingKeysForTargetId(e,n){let r=this.oi.Jr(n);return N.resolve(r)}containsKey(e,n){return N.resolve(this.oi.containsKey(n))}};var Bd=class{constructor(e,n){this.ai={},this.overlays={},this.ui=new Kv(0),this.ci=!1,this.ci=!0,this.li=new cv,this.referenceDelegate=e(this),this.hi=new hv(this),this.indexManager=new Jy,this.remoteDocumentCache=(function(i){return new lv(i)})(r=>this.referenceDelegate.Pi(r)),this.serializer=new Zy(n),this.Ti=new sv(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new av,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ai[e.toKey()];return r||(r=new uv(n,this.referenceDelegate),this.ai[e.toKey()]=r),r}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(e,n,r){O("MemoryPersistence","Starting transaction:",e);let i=new fv(this.ui.next());return this.referenceDelegate.Ii(),r(i).next(o=>this.referenceDelegate.di(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Ei(e,n){return N.or(Object.values(this.ai).map(r=>()=>r.containsKey(e,n)))}},fv=class extends Sy{constructor(e){super(),this.currentSequenceNumber=e}},pv=class t{constructor(e){this.persistence=e,this.Ai=new rc,this.Ri=null}static Vi(e){return new t(e)}get mi(){if(this.Ri)return this.Ri;throw G(60996)}addReference(e,n,r){return this.Ai.addReference(r,n),this.mi.delete(r.toString()),N.resolve()}removeReference(e,n,r){return this.Ai.removeReference(r,n),this.mi.add(r.toString()),N.resolve()}markPotentiallyOrphaned(e,n){return this.mi.add(n.toString()),N.resolve()}removeTarget(e,n){this.Ai.zr(n.targetId).forEach(i=>this.mi.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(o=>this.mi.add(o.toString()))}).next(()=>r.removeTargetData(e,n))}Ii(){this.Ri=new Set}di(e){let n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return N.forEach(this.mi,r=>{let i=B.fromPath(r);return this.fi(e,i).next(o=>{o||n.removeEntry(i,Y.min())})}).next(()=>(this.Ri=null,n.apply(e)))}updateLimboDocument(e,n){return this.fi(e,n).next(r=>{r?this.mi.delete(n.toString()):this.mi.add(n.toString())})}Pi(e){return 0}fi(e,n){return N.or([()=>N.resolve(this.Ai.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ei(e,n)])}},$d=class t{constructor(e,n){this.persistence=e,this.gi=new Hn(r=>bV(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=w2(this,n)}static Vi(e,n){return new t(e,n)}Ii(){}di(e){return N.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}mr(e){let n=this.yr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(i=>r+i))}yr(e){let n=0;return this.gr(e,r=>{n++}).next(()=>n)}gr(e,n){return N.forEach(this.gi,(r,i)=>this.Sr(e,r,i).next(o=>o?N.resolve():n(i)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0,i=this.persistence.getRemoteDocumentCache(),o=i.newChangeBuffer();return i.ri(e,s=>this.Sr(e,s,n).next(c=>{c||(r++,o.removeEntry(s,Y.min()))})).next(()=>o.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.gi.set(n,e.currentSequenceNumber),N.resolve()}removeTarget(e,n){let r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.gi.set(r,e.currentSequenceNumber),N.resolve()}removeReference(e,n,r){return this.gi.set(r,e.currentSequenceNumber),N.resolve()}updateLimboDocument(e,n){return this.gi.set(n,e.currentSequenceNumber),N.resolve()}Pi(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Dd(e.data.value)),n}Sr(e,n,r){return N.or([()=>this.persistence.Ei(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{let i=this.gi.get(n);return N.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}};var gv=class t{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.Is=r,this.ds=i}static Es(e,n){let r=oe(),i=oe();for(let o of n.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new t(e,n.fromCache,r,i)}};var mv=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var yv=class{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=(function(){return Eb()?8:TV(St())>0?6:4})()}initialize(e,n){this.gs=e,this.indexManager=n,this.As=!0}getDocumentsMatchingQuery(e,n,r,i){let o={result:null};return this.ps(e,n).next(s=>{o.result=s}).next(()=>{if(!o.result)return this.ys(e,n,i,r).next(s=>{o.result=s})}).next(()=>{if(o.result)return;let s=new mv;return this.ws(e,n,s).next(c=>{if(o.result=c,this.Rs)return this.Ss(e,n,s,c.size)})}).next(()=>o.result)}Ss(e,n,r,i){return r.documentReadCount<this.Vs?(bo()<=te.DEBUG&&O("QueryEngine","SDK will not create cache indexes for query:",Co(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),N.resolve()):(bo()<=te.DEBUG&&O("QueryEngine","Query:",Co(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.fs*i?(bo()<=te.DEBUG&&O("QueryEngine","The SDK decides to create cache indexes for query:",Co(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,gn(n))):N.resolve())}ps(e,n){if(xC(n))return N.resolve(null);let r=gn(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=By(n,null,"F"),r=gn(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{let s=oe(...o);return this.gs.getDocuments(e,s).next(c=>this.indexManager.getMinOffset(e,r).next(u=>{let l=this.bs(n,c);return this.Ds(n,l,s,u.readTime)?this.ps(e,By(n,null,"F")):this.vs(e,l,n,u)}))})))}ys(e,n,r,i){return xC(n)||i.isEqual(Y.min())?N.resolve(null):this.gs.getDocuments(e,r).next(o=>{let s=this.bs(n,o);return this.Ds(n,s,r,i)?N.resolve(null):(bo()<=te.DEBUG&&O("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Co(n)),this.vs(e,s,n,_V(i,Ga)).next(c=>c))})}bs(e,n){let r=new qe(US(e));return n.forEach((i,o)=>{sh(e,o)&&(r=r.add(o))}),r}Ds(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;let o=e.limitType==="F"?n.last():n.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}ws(e,n,r){return bo()<=te.DEBUG&&O("QueryEngine","Using full collection scan to execute query:",Co(n)),this.gs.getDocumentsMatchingQuery(e,n,Ti.min(),r)}vs(e,n,r,i){return this.gs.getDocumentsMatchingQuery(e,r,i).next(o=>(n.forEach(s=>{o=o.insert(s.key,s)}),o))}};var e_="LocalStore",T2=3e8,vv=class{constructor(e,n,r,i){this.persistence=e,this.Cs=n,this.serializer=i,this.Fs=new Re(ee),this.Ms=new Hn(o=>Zv(o),Jv),this.xs=new Map,this.Os=e.getRemoteDocumentCache(),this.hi=e.getTargetCache(),this.Ti=e.getBundleCache(),this.Ns(r)}Ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new ov(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Fs))}};function D2(t,e,n,r){return new vv(t,e,n,r)}async function nA(t,e){let n=ie(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,n.Ns(e),n.mutationQueue.getAllMutationBatches(r))).next(o=>{let s=[],c=[],u=oe();for(let l of i){s.push(l.batchId);for(let h of l.mutations)u=u.add(h.key)}for(let l of o){c.push(l.batchId);for(let h of l.mutations)u=u.add(h.key)}return n.localDocuments.getDocuments(r,u).next(l=>({Bs:l,removedBatchIds:s,addedBatchIds:c}))})})}function rA(t){let e=ie(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.hi.getLastRemoteSnapshotVersion(n))}function b2(t,e){let n=ie(t),r=e.snapshotVersion,i=n.Fs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{let s=n.Os.newChangeBuffer({trackRemovals:!0});i=n.Fs;let c=[];e.targetChanges.forEach((h,p)=>{let m=i.get(p);if(!m)return;c.push(n.hi.removeMatchingKeys(o,h.removedDocuments,p).next(()=>n.hi.addMatchingKeys(o,h.addedDocuments,p)));let y=m.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(p)!==null?y=y.withResumeToken(it.EMPTY_BYTE_STRING,Y.min()).withLastLimboFreeSnapshotVersion(Y.min()):h.resumeToken.approximateByteSize()>0&&(y=y.withResumeToken(h.resumeToken,r)),i=i.insert(p,y),(function(A,R,k){return A.resumeToken.approximateByteSize()===0||R.snapshotVersion.toMicroseconds()-A.snapshotVersion.toMicroseconds()>=T2?!0:k.addedDocuments.size+k.modifiedDocuments.size+k.removedDocuments.size>0})(m,y,h)&&c.push(n.hi.updateTargetData(o,y))});let u=yr(),l=oe();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&c.push(n.persistence.referenceDelegate.updateLimboDocument(o,h))}),c.push(C2(o,s,e.documentUpdates).next(h=>{u=h.Ls,l=h.ks})),!r.isEqual(Y.min())){let h=n.hi.getLastRemoteSnapshotVersion(o).next(p=>n.hi.setTargetsMetadata(o,o.currentSequenceNumber,r));c.push(h)}return N.waitFor(c).next(()=>s.apply(o)).next(()=>n.localDocuments.getLocalViewOfDocuments(o,u,l)).next(()=>u)}).then(o=>(n.Fs=i,o))}function C2(t,e,n){let r=oe(),i=oe();return n.forEach(o=>r=r.add(o)),e.getEntries(t,r).next(o=>{let s=yr();return n.forEach((c,u)=>{let l=o.get(c);u.isFoundDocument()!==l.isFoundDocument()&&(i=i.add(c)),u.isNoDocument()&&u.version.isEqual(Y.min())?(e.removeEntry(c,u.readTime),s=s.insert(c,u)):!l.isValidDocument()||u.version.compareTo(l.version)>0||u.version.compareTo(l.version)===0&&l.hasPendingWrites?(e.addEntry(u),s=s.insert(c,u)):O(e_,"Ignoring outdated watch update for ",c,". Current version:",l.version," Watch version:",u.version)}),{Ls:s,ks:i}})}function S2(t,e){let n=ie(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.hi.getTargetData(r,e).next(o=>o?(i=o,N.resolve(i)):n.hi.allocateTargetId(r).next(s=>(i=new tc(e,s,"TargetPurposeListen",r.currentSequenceNumber),n.hi.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=n.Fs.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.Fs=n.Fs.insert(r.targetId,r),n.Ms.set(e,r.targetId)),r})}async function _v(t,e,n){let r=ie(t),i=r.Fs.get(e),o=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",o,s=>r.persistence.referenceDelegate.removeTarget(s,i))}catch(s){if(!Zo(s))throw s;O(e_,`Failed to update sequence numbers for target ${e}: ${s}`)}r.Fs=r.Fs.remove(e),r.Ms.delete(i.target)}function GC(t,e,n){let r=ie(t),i=Y.min(),o=oe();return r.persistence.runTransaction("Execute query","readwrite",s=>(function(u,l,h){let p=ie(u),m=p.Ms.get(h);return m!==void 0?N.resolve(p.Fs.get(m)):p.hi.getTargetData(l,h)})(r,s,gn(e)).next(c=>{if(c)return i=c.lastLimboFreeSnapshotVersion,r.hi.getMatchingKeysForTargetId(s,c.targetId).next(u=>{o=u})}).next(()=>r.Cs.getDocumentsMatchingQuery(s,e,n?i:Y.min(),n?o:oe())).next(c=>(A2(r,zV(e),c),{documents:c,qs:o})))}function A2(t,e,n){let r=t.xs.get(e)||Y.min();n.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),t.xs.set(e,r)}var Hd=class{constructor(){this.activeTargetIds=YV()}Gs(e){this.activeTargetIds=this.activeTargetIds.add(e)}zs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}};var Ev=class{constructor(){this.Fo=new Hd,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Fo.Gs(e),this.Mo[e]||"not-current"}updateQueryState(e,n,r){this.Mo[e]=n}removeLocalQueryTarget(e){this.Fo.zs(e)}isLocalQueryTarget(e){return this.Fo.activeTargetIds.has(e)}clearQueryState(e){delete this.Mo[e]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(e){return this.Fo.activeTargetIds.has(e)}start(){return this.Fo=new Hd,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var Iv=class{xo(e){}shutdown(){}};var WC="ConnectivityMonitor",zd=class{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(e){this.ko.push(e)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){O(WC,"Network connectivity changed: AVAILABLE");for(let e of this.ko)e(0)}Lo(){O(WC,"Network connectivity changed: UNAVAILABLE");for(let e of this.ko)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var wd=null;function wv(){return wd===null?wd=(function(){return 268435456+Math.round(2147483648*Math.random())})():wd++,"0x"+wd.toString(16)}var my="RestConnection",R2={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"},Tv=class{get Qo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;let n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.$o=n+"://"+e.host,this.Uo=`projects/${r}/databases/${i}`,this.Ko=this.databaseId.database===xd?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Wo(e,n,r,i,o){let s=wv(),c=this.Go(e,n.toUriEncodedString());O(my,`Sending RPC '${e}' ${s}:`,c,r);let u={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(u,i,o);let{host:l}=new URL(c),h=ai(l);return this.jo(e,c,u,r,h).then(p=>(O(my,`Received RPC '${e}' ${s}: `,p),p),p=>{throw gr(my,`RPC '${e}' ${s} failed with error: `,p,"url: ",c,"request:",r),p})}Jo(e,n,r,i,o,s){return this.Wo(e,n,r,i,o)}zo(e,n,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Yo})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((i,o)=>e[o]=i),r&&r.headers.forEach((i,o)=>e[o]=i)}Go(e,n){let r=R2[e];return`${this.$o}/v1/${n}:${r}`}terminate(){}};var Dv=class{constructor(e){this.Ho=e.Ho,this.Yo=e.Yo}Zo(e){this.Xo=e}e_(e){this.t_=e}n_(e){this.r_=e}onMessage(e){this.i_=e}close(){this.Yo()}send(e){this.Ho(e)}s_(){this.Xo()}o_(){this.t_()}__(e){this.r_(e)}a_(e){this.i_(e)}};var rt="WebChannelConnection",bv=class extends Tv{constructor(e){super(e),this.u_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}jo(e,n,r,i,o){let s=wv();return new Promise((c,u)=>{let l=new uy;l.setWithCredentials(!0),l.listenOnce(ly.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case ja.NO_ERROR:let p=l.getResponseJson();O(rt,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(p)),c(p);break;case ja.TIMEOUT:O(rt,`RPC '${e}' ${s} timed out`),u(new F(x.DEADLINE_EXCEEDED,"Request time out"));break;case ja.HTTP_ERROR:let m=l.getStatus();if(O(rt,`RPC '${e}' ${s} failed with status:`,m,"response text:",l.getResponseText()),m>0){let y=l.getResponseJson();Array.isArray(y)&&(y=y[0]);let C=y?.error;if(C&&C.status&&C.message){let A=(function(k){let $=k.toLowerCase().replace(/_/g,"-");return Object.values(x).indexOf($)>=0?$:x.UNKNOWN})(C.status);u(new F(A,C.message))}else u(new F(x.UNKNOWN,"Server responded with status "+l.getStatus()))}else u(new F(x.UNAVAILABLE,"Connection failed."));break;default:G(9055,{c_:e,streamId:s,l_:l.getLastErrorCode(),h_:l.getLastError()})}}finally{O(rt,`RPC '${e}' ${s} completed.`)}});let h=JSON.stringify(i);O(rt,`RPC '${e}' ${s} sending request:`,i),l.send(n,"POST",h,r,15)})}P_(e,n,r){let i=wv(),o=[this.$o,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=fy(),c=hy(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(u.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(u.useFetchStreams=!0),this.zo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;let h=o.join("");O(rt,`Creating RPC '${e}' stream ${i}: ${h}`,u);let p=s.createWebChannel(h,u);this.T_(p);let m=!1,y=!1,C=new Dv({Ho:R=>{y?O(rt,`Not sending because RPC '${e}' stream ${i} is closed:`,R):(m||(O(rt,`Opening RPC '${e}' stream ${i} transport.`),p.open(),m=!0),O(rt,`RPC '${e}' stream ${i} sending:`,R),p.send(R))},Yo:()=>p.close()}),A=(R,k,$)=>{R.listen(k,Q=>{try{$(Q)}catch(ge){setTimeout(()=>{throw ge},0)}})};return A(p,Do.EventType.OPEN,()=>{y||(O(rt,`RPC '${e}' stream ${i} transport opened.`),C.s_())}),A(p,Do.EventType.CLOSE,()=>{y||(y=!0,O(rt,`RPC '${e}' stream ${i} transport closed`),C.__(),this.I_(p))}),A(p,Do.EventType.ERROR,R=>{y||(y=!0,gr(rt,`RPC '${e}' stream ${i} transport errored. Name:`,R.name,"Message:",R.message),C.__(new F(x.UNAVAILABLE,"The operation could not be completed")))}),A(p,Do.EventType.MESSAGE,R=>{var k;if(!y){let $=R.data[0];we(!!$,16349);let Q=$,ge=Q?.error||((k=Q[0])===null||k===void 0?void 0:k.error);if(ge){O(rt,`RPC '${e}' stream ${i} received error:`,ge);let ot=ge.status,he=(function(E){let I=Ne[E];if(I!==void 0)return KS(I)})(ot),w=ge.message;he===void 0&&(he=x.INTERNAL,w="Unknown error status: "+ot+" with message "+ge.message),y=!0,C.__(new F(he,w)),p.close()}else O(rt,`RPC '${e}' stream ${i} received:`,$),C.a_($)}}),A(c,dy.STAT_EVENT,R=>{R.stat===_d.PROXY?O(rt,`RPC '${e}' stream ${i} detected buffering proxy`):R.stat===_d.NOPROXY&&O(rt,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{C.o_()},0),C}terminate(){this.u_.forEach(e=>e.close()),this.u_=[]}T_(e){this.u_.push(e)}I_(e){this.u_=this.u_.filter(n=>n===e)}};function yy(){return typeof document<"u"?document:null}function iA(t){return new Ky(t,!0)}var qd=class{constructor(e,n,r=1e3,i=1.5,o=6e4){this.Fi=e,this.timerId=n,this.d_=r,this.E_=i,this.A_=o,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();let n=Math.floor(this.R_+this.p_()),r=Math.max(0,Date.now()-this.m_),i=Math.max(0,n-r);i>0&&O("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.R_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,i,()=>(this.m_=Date.now(),e())),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}};var KC="PersistentStream",Cv=class{constructor(e,n,r,i,o,s,c,u){this.Fi=e,this.w_=r,this.S_=i,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=c,this.listener=u,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new qd(e,n)}M_(){return this.state===1||this.state===5||this.x_()}x_(){return this.state===2||this.state===3}start(){this.C_=0,this.state!==4?this.auth():this.O_()}async stop(){this.M_()&&await this.close(0)}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&this.D_===null&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,()=>this.L_()))}k_(e){this.q_(),this.stream.send(e)}async L_(){if(this.x_())return this.close(0)}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,e!==4?this.F_.reset():n&&n.code===x.RESOURCE_EXHAUSTED?(Un(n.toString()),Un("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):n&&n.code===x.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.U_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.n_(n)}U_(){}auth(){this.state=1;let e=this.K_(this.b_),n=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.b_===n&&this.W_(r,i)},r=>{e(()=>{let i=new F(x.UNKNOWN,"Fetching auth token failed: "+r.message);return this.G_(i)})})}W_(e,n){let r=this.K_(this.b_);this.stream=this.z_(e,n),this.stream.Zo(()=>{r(()=>this.listener.Zo())}),this.stream.e_(()=>{r(()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,()=>(this.x_()&&(this.state=3),Promise.resolve())),this.listener.e_()))}),this.stream.n_(i=>{r(()=>this.G_(i))}),this.stream.onMessage(i=>{r(()=>++this.C_==1?this.j_(i):this.onNext(i))})}O_(){this.state=5,this.F_.g_(async()=>{this.state=0,this.start()})}G_(e){return O(KC,`close with error: ${e}`),this.stream=null,this.close(4,e)}K_(e){return n=>{this.Fi.enqueueAndForget(()=>this.b_===e?n():(O(KC,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},Sv=class extends Cv{constructor(e,n,r,i,o,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,s),this.serializer=o}z_(e,n){return this.connection.P_("Listen",e,n)}j_(e){return this.onNext(e)}onNext(e){this.F_.reset();let n=h2(this.serializer,e),r=(function(o){if(!("targetChange"in o))return Y.min();let s=o.targetChange;return s.targetIds&&s.targetIds.length?Y.min():s.readTime?Mo(s.readTime):Y.min()})(e);return this.listener.J_(n,r)}H_(e){let n={};n.database=$C(this.serializer),n.addTarget=(function(o,s){let c,u=s.target;if(c=Uy(u)?{documents:f2(o,u)}:{query:p2(o,u).Vt},c.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){c.resumeToken=u2(o,s.resumeToken);let l=Qy(o,s.expectedCount);l!==null&&(c.expectedCount=l)}else if(s.snapshotVersion.compareTo(Y.min())>0){c.readTime=c2(o,s.snapshotVersion.toTimestamp());let l=Qy(o,s.expectedCount);l!==null&&(c.expectedCount=l)}return c})(this.serializer,e);let r=m2(this.serializer,e);r&&(n.labels=r),this.k_(n)}Y_(e){let n={};n.database=$C(this.serializer),n.removeTarget=e,this.k_(n)}};var Av=class{},Rv=class extends Av{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.ra=!1}ia(){if(this.ra)throw new F(x.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,n,r,i){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.Wo(e,Yy(n,r),i,o,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===x.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new F(x.UNKNOWN,o.toString())})}Jo(e,n,r,i,o){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,c])=>this.connection.Jo(e,Yy(n,r),i,s,c,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===x.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new F(x.UNKNOWN,s.toString())})}terminate(){this.ra=!0,this.connection.terminate()}},Nv=class{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){this.sa===0&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve())))}la(e){this.state==="Online"?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ua("Offline")))}set(e){this.ha(),this.sa=0,e==="Online"&&(this._a=!1),this.ua(e)}ua(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ca(e){let n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?(Un(n),this._a=!1):O("OnlineStateTracker",n)}ha(){this.oa!==null&&(this.oa.cancel(),this.oa=null)}};var Ko="RemoteStore",Mv=class{constructor(e,n,r,i,o){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=o,this.Ea.xo(s=>{r.enqueueAndForget(async()=>{uc(this)&&(O(Ko,"Restarting streams for network reachability change."),await(async function(u){let l=ie(u);l.Ia.add(4),await cc(l),l.Aa.set("Unknown"),l.Ia.delete(4),await ah(l)})(this))})}),this.Aa=new Nv(r,i)}};async function ah(t){if(uc(t))for(let e of t.da)await e(!0)}async function cc(t){for(let e of t.da)await e(!1)}function oA(t,e){let n=ie(t);n.Ta.has(e.targetId)||(n.Ta.set(e.targetId,e),i_(n)?r_(n):Jo(n).x_()&&n_(n,e))}function t_(t,e){let n=ie(t),r=Jo(n);n.Ta.delete(e),r.x_()&&sA(n,e),n.Ta.size===0&&(r.x_()?r.B_():uc(n)&&n.Aa.set("Unknown"))}function n_(t,e){if(t.Ra.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Y.min())>0){let n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Jo(t).H_(e)}function sA(t,e){t.Ra.$e(e),Jo(t).Y_(e)}function r_(t){t.Ra=new Wy({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>t.Ta.get(e)||null,lt:()=>t.datastore.serializer.databaseId}),Jo(t).start(),t.Aa.aa()}function i_(t){return uc(t)&&!Jo(t).M_()&&t.Ta.size>0}function uc(t){return ie(t).Ia.size===0}function aA(t){t.Ra=void 0}async function N2(t){t.Aa.set("Online")}async function M2(t){t.Ta.forEach((e,n)=>{n_(t,e)})}async function P2(t,e){aA(t),i_(t)?(t.Aa.la(e),r_(t)):t.Aa.set("Unknown")}async function x2(t,e,n){if(t.Aa.set("Online"),e instanceof Vd&&e.state===2&&e.cause)try{await(async function(i,o){let s=o.cause;for(let c of o.targetIds)i.Ta.has(c)&&(await i.remoteSyncer.rejectListen(c,s),i.Ta.delete(c),i.Ra.removeTarget(c))})(t,e)}catch(r){O(Ko,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await QC(t,r)}else if(e instanceof No?t.Ra.Ye(e):e instanceof Fd?t.Ra.it(e):t.Ra.et(e),!n.isEqual(Y.min()))try{let r=await rA(t.localStore);n.compareTo(r)>=0&&await(function(o,s){let c=o.Ra.Pt(s);return c.targetChanges.forEach((u,l)=>{if(u.resumeToken.approximateByteSize()>0){let h=o.Ta.get(l);h&&o.Ta.set(l,h.withResumeToken(u.resumeToken,s))}}),c.targetMismatches.forEach((u,l)=>{let h=o.Ta.get(u);if(!h)return;o.Ta.set(u,h.withResumeToken(it.EMPTY_BYTE_STRING,h.snapshotVersion)),sA(o,u);let p=new tc(h.target,u,l,h.sequenceNumber);n_(o,p)}),o.remoteSyncer.applyRemoteEvent(c)})(t,n)}catch(r){O(Ko,"Failed to raise snapshot:",r),await QC(t,r)}}async function QC(t,e,n){if(!Zo(e))throw e;t.Ia.add(1),await cc(t),t.Aa.set("Offline"),n||(n=()=>rA(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{O(Ko,"Retrying IndexedDB access"),await n(),t.Ia.delete(1),await ah(t)})}async function YC(t,e){let n=ie(t);n.asyncQueue.verifyOperationInProgress(),O(Ko,"RemoteStore received new credentials");let r=uc(n);n.Ia.add(3),await cc(n),r&&n.Aa.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ia.delete(3),await ah(n)}async function k2(t,e){let n=ie(t);e?(n.Ia.delete(2),await ah(n)):e||(n.Ia.add(2),await cc(n),n.Aa.set("Unknown"))}function Jo(t){return t.Va||(t.Va=(function(n,r,i){let o=ie(n);return o.ia(),new Sv(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)})(t.datastore,t.asyncQueue,{Zo:N2.bind(null,t),e_:M2.bind(null,t),n_:P2.bind(null,t),J_:x2.bind(null,t)}),t.da.push(async e=>{e?(t.Va.N_(),i_(t)?r_(t):t.Aa.set("Unknown")):(await t.Va.stop(),aA(t))})),t.Va}var Pv=class t{constructor(e,n,r,i,o){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new pr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,o){let s=Date.now()+r,c=new t(e,n,s,i,o);return c.start(r),c}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new F(x.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function cA(t,e){if(Un("AsyncQueue",`${e}: ${t}`),Zo(t))return new F(x.UNAVAILABLE,`${e}: ${t}`);throw t}var Gd=class t{static emptySet(e){return new t(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||B.comparator(n.key,r.key):(n,r)=>B.comparator(n.key,r.key),this.keyedMap=Ua(),this.sortedSet=new Re(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){let n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){let n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){let i=n.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){let e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){let r=new t;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}};var Wd=class{constructor(){this.fa=new Re(B.comparator)}track(e){let n=e.doc.key,r=this.fa.get(n);r?e.type!==0&&r.type===3?this.fa=this.fa.insert(n,e):e.type===3&&r.type!==1?this.fa=this.fa.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.fa=this.fa.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.fa=this.fa.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.fa=this.fa.remove(n):e.type===1&&r.type===2?this.fa=this.fa.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.fa=this.fa.insert(n,{type:2,doc:e.doc}):G(63341,{At:e,ga:r}):this.fa=this.fa.insert(n,e)}pa(){let e=[];return this.fa.inorderTraversal((n,r)=>{e.push(r)}),e}},Qo=class t{constructor(e,n,r,i,o,s,c,u,l){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=c,this.excludesMetadataChanges=u,this.hasCachedResults=l}static fromInitialDocuments(e,n,r,i,o){let s=[];return n.forEach(c=>{s.push({type:0,doc:c})}),new t(e,n,Gd.emptySet(n),s,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&oh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}};var xv=class{constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some(e=>e.ba())}},kv=class{constructor(){this.queries=ZC(),this.onlineState="Unknown",this.Da=new Set}terminate(){(function(n,r){let i=ie(n),o=i.queries;i.queries=ZC(),o.forEach((s,c)=>{for(let u of c.wa)u.onError(r)})})(this,new F(x.ABORTED,"Firestore shutting down"))}};function ZC(){return new Hn(t=>jS(t),oh)}async function O2(t,e){let n=ie(t),r=3,i=e.query,o=n.queries.get(i);o?!o.Sa()&&e.ba()&&(r=2):(o=new xv,r=e.ba()?0:1);try{switch(r){case 0:o.ya=await n.onListen(i,!0);break;case 1:o.ya=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(s){let c=cA(s,`Initialization of query '${Co(e.query)}' failed`);return void e.onError(c)}n.queries.set(i,o),o.wa.push(e),e.va(n.onlineState),o.ya&&e.Ca(o.ya)&&o_(n)}async function L2(t,e){let n=ie(t),r=e.query,i=3,o=n.queries.get(r);if(o){let s=o.wa.indexOf(e);s>=0&&(o.wa.splice(s,1),o.wa.length===0?i=e.ba()?0:1:!o.Sa()&&e.ba()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function F2(t,e){let n=ie(t),r=!1;for(let i of e){let o=i.query,s=n.queries.get(o);if(s){for(let c of s.wa)c.Ca(i)&&(r=!0);s.ya=i}}r&&o_(n)}function V2(t,e,n){let r=ie(t),i=r.queries.get(e);if(i)for(let o of i.wa)o.onError(n);r.queries.delete(e)}function o_(t){t.Da.forEach(e=>{e.next()})}var Ov,JC;(JC=Ov||(Ov={})).Fa="default",JC.Cache="cache";var Lv=class{constructor(e,n,r){this.query=e,this.Ma=n,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=r||{}}Ca(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new Qo(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.xa?this.Na(e)&&(this.Ma.next(e),n=!0):this.Ba(e,this.onlineState)&&(this.La(e),n=!0),this.Oa=e,n}onError(e){this.Ma.error(e)}va(e){this.onlineState=e;let n=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,e)&&(this.La(this.Oa),n=!0),n}Ba(e,n){if(!e.fromCache||!this.ba())return!0;let r=n!=="Offline";return(!this.options.ka||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Na(e){if(e.docChanges.length>0)return!0;let n=this.Oa&&this.Oa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}La(e){e=Qo.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.xa=!0,this.Ma.next(e)}ba(){return this.options.source!==Ov.Cache}};var Kd=class{constructor(e){this.key=e}},Qd=class{constructor(e){this.key=e}},Fv=class{constructor(e,n){this.query=e,this.Ha=n,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=oe(),this.mutatedKeys=oe(),this.Xa=US(e),this.eu=new Gd(this.Xa)}get tu(){return this.Ha}nu(e,n){let r=n?n.ru:new Wd,i=n?n.eu:this.eu,o=n?n.mutatedKeys:this.mutatedKeys,s=i,c=!1,u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,l=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((h,p)=>{let m=i.get(h),y=sh(this.query,p)?p:null,C=!!m&&this.mutatedKeys.has(m.key),A=!!y&&(y.hasLocalMutations||this.mutatedKeys.has(y.key)&&y.hasCommittedMutations),R=!1;m&&y?m.data.isEqual(y.data)?C!==A&&(r.track({type:3,doc:y}),R=!0):this.iu(m,y)||(r.track({type:2,doc:y}),R=!0,(u&&this.Xa(y,u)>0||l&&this.Xa(y,l)<0)&&(c=!0)):!m&&y?(r.track({type:0,doc:y}),R=!0):m&&!y&&(r.track({type:1,doc:m}),R=!0,(u||l)&&(c=!0)),R&&(y?(s=s.add(y),o=A?o.add(h):o.delete(h)):(s=s.delete(h),o=o.delete(h)))}),this.query.limit!==null)for(;s.size>this.query.limit;){let h=this.query.limitType==="F"?s.last():s.first();s=s.delete(h.key),o=o.delete(h.key),r.track({type:1,doc:h})}return{eu:s,ru:r,Ds:c,mutatedKeys:o}}iu(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){let o=this.eu;this.eu=e.eu,this.mutatedKeys=e.mutatedKeys;let s=e.ru.pa();s.sort((h,p)=>(function(y,C){let A=R=>{switch(R){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return G(20277,{At:R})}};return A(y)-A(C)})(h.type,p.type)||this.Xa(h.doc,p.doc)),this.su(r),i=i!=null&&i;let c=n&&!i?this.ou():[],u=this.Za.size===0&&this.current&&!i?1:0,l=u!==this.Ya;return this.Ya=u,s.length!==0||l?{snapshot:new Qo(this.query,e.eu,o,s,e.mutatedKeys,u===0,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),_u:c}:{_u:c}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({eu:this.eu,ru:new Wd,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(e){return!this.Ha.has(e)&&!!this.eu.has(e)&&!this.eu.get(e).hasLocalMutations}su(e){e&&(e.addedDocuments.forEach(n=>this.Ha=this.Ha.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ha=this.Ha.delete(n)),this.current=e.current)}ou(){if(!this.current)return[];let e=this.Za;this.Za=oe(),this.eu.forEach(r=>{this.au(r.key)&&(this.Za=this.Za.add(r.key))});let n=[];return e.forEach(r=>{this.Za.has(r)||n.push(new Qd(r))}),this.Za.forEach(r=>{e.has(r)||n.push(new Kd(r))}),n}uu(e){this.Ha=e.qs,this.Za=oe();let n=this.nu(e.documents);return this.applyChanges(n,!0)}cu(){return Qo.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,this.Ya===0,this.hasCachedResults)}},s_="SyncEngine",Vv=class{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}},jv=class{constructor(e){this.key=e,this.lu=!1}},Uv=class{constructor(e,n,r,i,o,s){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.hu={},this.Pu=new Hn(c=>jS(c),oh),this.Tu=new Map,this.Iu=new Set,this.du=new Re(B.comparator),this.Eu=new Map,this.Au=new rc,this.Ru={},this.Vu=new Map,this.mu=nc.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return this.fu===!0}};async function j2(t,e,n=!0){let r=fA(t),i,o=r.Pu.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.cu()):i=await uA(r,e,n,!0),i}async function U2(t,e){let n=fA(t);await uA(n,e,!0,!1)}async function uA(t,e,n,r){let i=await S2(t.localStore,gn(e)),o=i.targetId,s=t.sharedClientState.addLocalQueryTarget(o,n),c;return r&&(c=await B2(t,e,o,s==="current",i.resumeToken)),t.isPrimaryClient&&n&&oA(t.remoteStore,i),c}async function B2(t,e,n,r,i){t.gu=(p,m,y)=>(async function(A,R,k,$){let Q=R.view.nu(k);Q.Ds&&(Q=await GC(A.localStore,R.query,!1).then(({documents:w})=>R.view.nu(w,Q)));let ge=$&&$.targetChanges.get(R.targetId),ot=$&&$.targetMismatches.get(R.targetId)!=null,he=R.view.applyChanges(Q,A.isPrimaryClient,ge,ot);return eS(A,R.targetId,he._u),he.snapshot})(t,p,m,y);let o=await GC(t.localStore,e,!0),s=new Fv(e,o.qs),c=s.nu(o.documents),u=ec.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),l=s.applyChanges(c,t.isPrimaryClient,u);eS(t,n,l._u);let h=new Vv(e,n,s);return t.Pu.set(e,h),t.Tu.has(n)?t.Tu.get(n).push(e):t.Tu.set(n,[e]),l.snapshot}async function $2(t,e,n){let r=ie(t),i=r.Pu.get(e),o=r.Tu.get(i.targetId);if(o.length>1)return r.Tu.set(i.targetId,o.filter(s=>!oh(s,e))),void r.Pu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await _v(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&t_(r.remoteStore,i.targetId),Bv(r,i.targetId)}).catch(nh)):(Bv(r,i.targetId),await _v(r.localStore,i.targetId,!0))}async function H2(t,e){let n=ie(t),r=n.Pu.get(e),i=n.Tu.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),t_(n.remoteStore,r.targetId))}async function lA(t,e){let n=ie(t);try{let r=await b2(n.localStore,e);e.targetChanges.forEach((i,o)=>{let s=n.Eu.get(o);s&&(we(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?s.lu=!0:i.modifiedDocuments.size>0?we(s.lu,14607):i.removedDocuments.size>0&&(we(s.lu,42227),s.lu=!1))}),await hA(n,r,e)}catch(r){await nh(r)}}function XC(t,e,n){let r=ie(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){let i=[];r.Pu.forEach((o,s)=>{let c=s.view.va(e);c.snapshot&&i.push(c.snapshot)}),(function(s,c){let u=ie(s);u.onlineState=c;let l=!1;u.queries.forEach((h,p)=>{for(let m of p.wa)m.va(c)&&(l=!0)}),l&&o_(u)})(r.eventManager,e),i.length&&r.hu.J_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function z2(t,e,n){let r=ie(t);r.sharedClientState.updateQueryState(e,"rejected",n);let i=r.Eu.get(e),o=i&&i.key;if(o){let s=new Re(B.comparator);s=s.insert(o,en.newNoDocument(o,Y.min()));let c=oe().add(o),u=new Ld(Y.min(),new Map,new Re(ee),s,c);await lA(r,u),r.du=r.du.remove(o),r.Eu.delete(e),a_(r)}else await _v(r.localStore,e,!1).then(()=>Bv(r,e,n)).catch(nh)}function Bv(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(let r of t.Tu.get(e))t.Pu.delete(r),n&&t.hu.pu(r,n);t.Tu.delete(e),t.isPrimaryClient&&t.Au.zr(e).forEach(r=>{t.Au.containsKey(r)||dA(t,r)})}function dA(t,e){t.Iu.delete(e.path.canonicalString());let n=t.du.get(e);n!==null&&(t_(t.remoteStore,n),t.du=t.du.remove(e),t.Eu.delete(n),a_(t))}function eS(t,e,n){for(let r of n)r instanceof Kd?(t.Au.addReference(r.key,e),q2(t,r)):r instanceof Qd?(O(s_,"Document no longer in limbo: "+r.key),t.Au.removeReference(r.key,e),t.Au.containsKey(r.key)||dA(t,r.key)):G(19791,{yu:r})}function q2(t,e){let n=e.key,r=n.path.canonicalString();t.du.get(n)||t.Iu.has(r)||(O(s_,"New document in limbo: "+n),t.Iu.add(r),a_(t))}function a_(t){for(;t.Iu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){let e=t.Iu.values().next().value;t.Iu.delete(e);let n=new B(Ae.fromString(e)),r=t.mu.next();t.Eu.set(r,new jv(n)),t.du=t.du.insert(n,r),oA(t.remoteStore,new tc(gn(Xv(n.path)),r,"TargetPurposeLimboResolution",Kv.ue))}}async function hA(t,e,n){let r=ie(t),i=[],o=[],s=[];r.Pu.isEmpty()||(r.Pu.forEach((c,u)=>{s.push(r.gu(u,e,n).then(l=>{var h;if((l||n)&&r.isPrimaryClient){let p=l?!l.fromCache:(h=n?.targetChanges.get(u.targetId))===null||h===void 0?void 0:h.current;r.sharedClientState.updateQueryState(u.targetId,p?"current":"not-current")}if(l){i.push(l);let p=gv.Es(u.targetId,l);o.push(p)}}))}),await Promise.all(s),r.hu.J_(i),await(async function(u,l){let h=ie(u);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>N.forEach(l,m=>N.forEach(m.Is,y=>h.persistence.referenceDelegate.addReference(p,m.targetId,y)).next(()=>N.forEach(m.ds,y=>h.persistence.referenceDelegate.removeReference(p,m.targetId,y)))))}catch(p){if(!Zo(p))throw p;O(e_,"Failed to update sequence numbers: "+p)}for(let p of l){let m=p.targetId;if(!p.fromCache){let y=h.Fs.get(m),C=y.snapshotVersion,A=y.withLastLimboFreeSnapshotVersion(C);h.Fs=h.Fs.insert(m,A)}}})(r.localStore,o))}async function G2(t,e){let n=ie(t);if(!n.currentUser.isEqual(e)){O(s_,"User change. New user:",e.toKey());let r=await nA(n.localStore,e);n.currentUser=e,(function(o,s){o.Vu.forEach(c=>{c.forEach(u=>{u.reject(new F(x.CANCELLED,s))})}),o.Vu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await hA(n,r.Bs)}}function W2(t,e){let n=ie(t),r=n.Eu.get(e);if(r&&r.lu)return oe().add(r.key);{let i=oe(),o=n.Tu.get(e);if(!o)return i;for(let s of o){let c=n.Pu.get(s);i=i.unionWith(c.view.tu)}return i}}function fA(t){let e=ie(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=lA.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=W2.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=z2.bind(null,e),e.hu.J_=F2.bind(null,e.eventManager),e.hu.pu=V2.bind(null,e.eventManager),e}var pA=(()=>{class t{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(n){this.serializer=iA(n.databaseInfo.databaseId),this.sharedClientState=this.bu(n),this.persistence=this.Du(n),await this.persistence.start(),this.localStore=this.vu(n),this.gcScheduler=this.Cu(n,this.localStore),this.indexBackfillerScheduler=this.Fu(n,this.localStore)}Cu(n,r){return null}Fu(n,r){return null}vu(n){return D2(this.persistence,new yv,n.initialUser,this.serializer)}Du(n){return new Bd(pv.Vi,this.serializer)}bu(n){return new Ev}async terminate(){var n,r;(n=this.gcScheduler)===null||n===void 0||n.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}return t.provider={build:()=>new t},t})(),$v=class extends pA{constructor(e){super(),this.cacheSizeBytes=e}Cu(e,n){we(this.persistence.referenceDelegate instanceof $d,46915);let r=this.persistence.referenceDelegate.garbageCollector;return new tv(r,e.asyncQueue,n)}Du(e){let n=this.cacheSizeBytes!==void 0?Lt.withCacheSize(this.cacheSizeBytes):Lt.DEFAULT;return new Bd(r=>$d.Vi(r,n),this.serializer)}};var K2=(()=>{class t{async initialize(n,r){this.localStore||(this.localStore=n.localStore,this.sharedClientState=n.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!n.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>XC(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=G2.bind(null,this.syncEngine),await k2(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(n){return(function(){return new kv})()}createDatastore(n){let r=iA(n.databaseInfo.databaseId),i=(function(s){return new bv(s)})(n.databaseInfo);return(function(s,c,u,l){return new Rv(s,c,u,l)})(n.authCredentials,n.appCheckCredentials,i,r)}createRemoteStore(n){return(function(i,o,s,c,u){return new Mv(i,o,s,c,u)})(this.localStore,this.datastore,n.asyncQueue,r=>XC(this.syncEngine,r,0),(function(){return zd.C()?new zd:new Iv})())}createSyncEngine(n,r){return(function(o,s,c,u,l,h,p){let m=new Uv(o,s,c,u,l,h);return p&&(m.fu=!0),m})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,n.initialUser,n.maxConcurrentLimboResolutions,r)}async terminate(){var n,r;await(async function(o){let s=ie(o);O(Ko,"RemoteStore shutting down."),s.Ia.add(5),await cc(s),s.Ea.shutdown(),s.Aa.set("Unknown")})(this.remoteStore),(n=this.datastore)===null||n===void 0||n.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()}}return t.provider={build:()=>new t},t})();var Hv=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.xu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.xu(this.observer.error,e):Un("Uncaught Error in snapshot listener:",e.toString()))}Ou(){this.muted=!0}xu(e,n){setTimeout(()=>{this.muted||e(n)},0)}};var vr="FirestoreClient",zv=class{constructor(e,n,r,i,o){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=ze.UNAUTHENTICATED,this.clientId=Ad.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,async s=>{O(vr,"Received user=",s.uid),await this.authCredentialListener(s),this.user=s}),this.appCheckCredentials.start(r,s=>(O(vr,"Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new pr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){let r=cA(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}};async function vy(t,e){t.asyncQueue.verifyOperationInProgress(),O(vr,"Initializing OfflineComponentProvider");let n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await nA(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>{gr("Terminating Firestore due to IndexedDb database deletion"),t.terminate().then(()=>{O("Terminating Firestore due to IndexedDb database deletion completed successfully")}).catch(i=>{gr("Terminating Firestore due to IndexedDb database deletion failed",i)})}),t._offlineComponents=e}async function tS(t,e){t.asyncQueue.verifyOperationInProgress();let n=await Q2(t);O(vr,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>YC(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>YC(e.remoteStore,i)),t._onlineComponents=e}async function Q2(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){O(vr,"Using user provided OfflineComponentProvider");try{await vy(t,t._uninitializedComponentsProvider._offline)}catch(e){let n=e;if(!(function(i){return i.name==="FirebaseError"?i.code===x.FAILED_PRECONDITION||i.code===x.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11})(n))throw n;gr("Error using user provided cache. Falling back to memory cache: "+n),await vy(t,new pA)}}else O(vr,"Using default OfflineComponentProvider"),await vy(t,new $v(void 0));return t._offlineComponents}async function Y2(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(O(vr,"Using user provided OnlineComponentProvider"),await tS(t,t._uninitializedComponentsProvider._online)):(O(vr,"Using default OnlineComponentProvider"),await tS(t,new K2))),t._onlineComponents}async function nS(t){let e=await Y2(t),n=e.eventManager;return n.onListen=j2.bind(null,e.syncEngine),n.onUnlisten=$2.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=U2.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=H2.bind(null,e.syncEngine),n}function gA(t){let e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}var rS=new Map;var mA="firestore.googleapis.com",iS=!0,Yd=class{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new F(x.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=mA,this.ssl=iS}else this.host=e.host,this.ssl=(n=e.ssl)!==null&&n!==void 0?n:iS;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=tA;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<I2)throw new F(x.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}mV("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=gA((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),(function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new F(x.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new F(x.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new F(x.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,i){return r.timeoutSeconds===i.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},ic=class{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Yd({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new F(x.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new F(x.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Yd(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new _y;switch(r.type){case"firstParty":return new Ty(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new F(x.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){let r=rS.get(n);r&&(O("ComponentProvider","Removing Datastore"),rS.delete(n),r.terminate())})(this),Promise.resolve()}};function yA(t,e,n,r={}){var i;t=Td(t,ic);let o=ai(e),s=t._getSettings(),c=Object.assign(Object.assign({},s),{emulatorOptions:t._getEmulatorOptions()}),u=`${e}:${n}`;o&&(Tm(`https://${u}`),Dm("Firestore",!0)),s.host!==mA&&s.host!==u&&gr("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");let l=Object.assign(Object.assign({},s),{host:u,ssl:o,emulatorOptions:r});if(!ci(l,c)&&(t._setSettings(l),r.mockUserToken)){let h,p;if(typeof r.mockUserToken=="string")h=r.mockUserToken,p=ze.MOCK_USER;else{h=gb(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);let m=r.mockUserToken.sub||r.mockUserToken.user_id;if(!m)throw new F(x.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");p=new ze(m)}t._authCredentials=new Ey(new Cd(h,p))}}var Zd=class t{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new t(this.firestore,e,this._query)}},mn=class t{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Po(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new t(this.firestore,e,this._key)}toJSON(){return{type:t._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(sc(n,t._jsonSchema))return new t(e,r||null,new B(Ae.fromString(n.referencePath)))}};mn._jsonSchemaVersion="firestore/documentReference/1.0",mn._jsonSchema={type:Pe("string",mn._jsonSchemaVersion),referencePath:Pe("string")};var Po=class t extends Zd{constructor(e,n,r){super(e,n,Xv(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new mn(this.firestore,null,new B(e))}withConverter(e){return new t(this.firestore,e,this._path)}};function vA(t,e,...n){if(t=kn(t),gV("collection","path",e),t instanceof ic){let r=Ae.fromString(e,...n);return IC(r),new Po(t,null,r)}{if(!(t instanceof mn||t instanceof Po))throw new F(x.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=t._path.child(Ae.fromString(e,...n));return IC(r),new Po(t.firestore,null,r)}}var oS="AsyncQueue",Jd=class{constructor(e=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new qd(this,"async_queue_retry"),this.oc=()=>{let r=yy();r&&O(oS,"Visibility state changed to "+r.visibilityState),this.F_.y_()},this._c=e;let n=yy();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;let n=yy();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise(()=>{});let n=new pr;return this.uc(()=>this.Xu&&this.rc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Zu.push(e),this.cc()))}async cc(){if(this.Zu.length!==0){try{await this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(e){if(!Zo(e))throw e;O(oS,"Operation failed with retryable error: "+e)}this.Zu.length>0&&this.F_.g_(()=>this.cc())}}uc(e){let n=this._c.then(()=>(this.nc=!0,e().catch(r=>{throw this.tc=r,this.nc=!1,Un("INTERNAL UNHANDLED ERROR: ",sS(r)),r}).then(r=>(this.nc=!1,r))));return this._c=n,n}enqueueAfterDelay(e,n,r){this.ac(),this.sc.indexOf(e)>-1&&(n=0);let i=Pv.createAndSchedule(this,e,n,r,o=>this.lc(o));return this.ec.push(i),i}ac(){this.tc&&G(47125,{hc:sS(this.tc)})}verifyOperationInProgress(){}async Pc(){let e;do e=this._c,await e;while(e!==this._c)}Tc(e){for(let n of this.ec)if(n.timerId===e)return!0;return!1}Ic(e){return this.Pc().then(()=>{this.ec.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(let n of this.ec)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Pc()})}dc(e){this.sc.push(e)}lc(e){let n=this.ec.indexOf(e);this.ec.splice(n,1)}};function sS(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}function aS(t){return(function(n,r){if(typeof n!="object"||n===null)return!1;let i=n;for(let o of r)if(o in i&&typeof i[o]=="function")return!0;return!1})(t,["next","error","complete"])}var oc=class extends ic{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new Jd,this._persistenceKey=i?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new Jd(e),this._firestoreClient=void 0,await e}}};function _A(t,e){let n=typeof t=="object"?t:Io(),r=typeof t=="string"?t:e||xd,i=ed(n,"firestore").getImmediate({identifier:r});if(!i._initialized){let o=fb("firestore");o&&yA(i,...o)}return i}function Z2(t){if(t._terminated)throw new F(x.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||J2(t),t._firestoreClient}function J2(t){var e,n,r;let i=t._freezeSettings(),o=(function(c,u,l,h){return new Ay(c,u,l,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,gA(h.experimentalLongPollingOptions),h.useFetchStreams,h.isUsingEmulator)})(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._componentsProvider||!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),t._firestoreClient=new zv(t._authCredentials,t._appCheckCredentials,t._queue,o,t._componentsProvider&&(function(c){let u=c?._online.build();return{_offline:c?._offline.build(u),_online:u}})(t._componentsProvider))}var xo=class t{constructor(e){this._byteString=e}static fromBase64String(e){try{return new t(it.fromBase64String(e))}catch(n){throw new F(x.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new t(it.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:t._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(sc(e,t._jsonSchema))return t.fromBase64String(e.bytes)}};xo._jsonSchemaVersion="firestore/bytes/1.0",xo._jsonSchema={type:Pe("string",xo._jsonSchemaVersion),bytes:Pe("string")};var Xd=class{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new F(x.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Xt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var ko=class t{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new F(x.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new F(x.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return ee(this._lat,e._lat)||ee(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:t._jsonSchemaVersion}}static fromJSON(e){if(sc(e,t._jsonSchema))return new t(e.latitude,e.longitude)}};ko._jsonSchemaVersion="firestore/geoPoint/1.0",ko._jsonSchema={type:Pe("string",ko._jsonSchemaVersion),latitude:Pe("number"),longitude:Pe("number")};var Oo=class t{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return(function(r,i){if(r.length!==i.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0})(this._values,e._values)}toJSON(){return{type:t._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(sc(e,t._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new t(e.vectorValues);throw new F(x.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}};Oo._jsonSchemaVersion="firestore/vectorValue/1.0",Oo._jsonSchema={type:Pe("string",Oo._jsonSchemaVersion),vectorValues:Pe("object")};var X2=new RegExp("[~\\*/\\[\\]]");function ej(t,e,n){if(e.search(X2)>=0)throw cS(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Xd(...e.split("."))._internalPath}catch{throw cS(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function cS(t,e,n,r,i){let o=r&&!r.isEmpty(),s=i!==void 0,c=`Function ${e}() called with invalid data`;n&&(c+=" (via `toFirestore()`)"),c+=". ";let u="";return(o||s)&&(u+=" (found",o&&(u+=` in field ${r}`),s&&(u+=` in document ${i}`),u+=")"),new F(x.INVALID_ARGUMENT,c+t+u)}var eh=class{constructor(e,n,r,i,o){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new mn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new qv(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let n=this._document.data.field(EA("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}},qv=class extends eh{data(){return super.data()}};function EA(t,e){return typeof e=="string"?ej(t,e):e instanceof Xd?e._internalPath:e._delegate._internalPath}function tj(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new F(x.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var Gv=class{convertValue(e,n="none"){switch(mr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ie(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes($n(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw G(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){let r={};return ac(e,(i,o)=>{r[i]=this.convertValue(o,n)}),r}convertVectorValue(e){var n,r,i;let o=(i=(r=(n=e.fields)===null||n===void 0?void 0:n[Ka].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(s=>Ie(s.doubleValue));return new Oo(o)}convertGeoPoint(e){return new ko(Ie(e.latitude),Ie(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":let r=ih(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Wa(e));default:return null}}convertTimestamp(e){let n=Bn(e);return new pt(n.seconds,n.nanos)}convertDocumentKey(e,n){let r=Ae.fromString(e);we(eA(r),9688,{name:e});let i=new kd(r.get(1),r.get(3)),o=new B(r.popFirst(5));return i.isEqual(n)||Un(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),o}};var Ei=class{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},Ii=class t extends eh{constructor(e,n,r,i,o,s){super(e,n,r,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let n=new Lo(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){let r=this._document.data.field(EA("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new F(x.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e=this._document,n={};return n.type=t._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}};Ii._jsonSchemaVersion="firestore/documentSnapshot/1.0",Ii._jsonSchema={type:Pe("string",Ii._jsonSchemaVersion),bundleSource:Pe("string","DocumentSnapshot"),bundleName:Pe("string"),bundle:Pe("string")};var Lo=class extends Ii{data(e={}){return super.data(e)}},Fo=class t{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new Ei(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Lo(this._firestore,this._userDataWriter,r.key,r,new Ei(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new F(x.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(i,o){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(c=>{let u=new Lo(i._firestore,i._userDataWriter,c.doc.key,c.doc,new Ei(i._snapshot.mutatedKeys.has(c.doc.key),i._snapshot.fromCache),i.query.converter);return c.doc,{type:"added",doc:u,oldIndex:-1,newIndex:s++}})}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(c=>o||c.type!==3).map(c=>{let u=new Lo(i._firestore,i._userDataWriter,c.doc.key,c.doc,new Ei(i._snapshot.mutatedKeys.has(c.doc.key),i._snapshot.fromCache),i.query.converter),l=-1,h=-1;return c.type!==0&&(l=s.indexOf(c.doc.key),s=s.delete(c.doc.key)),c.type!==1&&(s=s.add(c.doc),h=s.indexOf(c.doc.key)),{type:nj(c.type),doc:u,oldIndex:l,newIndex:h}})}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new F(x.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e={};e.type=t._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Ad.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;let n=[],r=[],i=[];return this.docs.forEach(o=>{o._document!==null&&(n.push(o._document),r.push(this._userDataWriter.convertObjectMap(o._document.data.value.mapValue.fields,"previous")),i.push(o.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}};function nj(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return G(61501,{type:t})}}Fo._jsonSchemaVersion="firestore/querySnapshot/1.0",Fo._jsonSchema={type:Pe("string",Fo._jsonSchemaVersion),bundleSource:Pe("string","QuerySnapshot"),bundleName:Pe("string"),bundle:Pe("string")};var th=class extends Gv{constructor(e){super(),this.firestore=e}convertBytes(e){return new xo(e)}convertReference(e){let n=this.convertDocumentKey(e,this.firestore._databaseId);return new mn(this.firestore,null,n)}};function c_(t,...e){var n,r,i;t=kn(t);let o={includeMetadataChanges:!1,source:"default"},s=0;typeof e[s]!="object"||aS(e[s])||(o=e[s++]);let c={includeMetadataChanges:o.includeMetadataChanges,source:o.source};if(aS(e[s])){let p=e[s];e[s]=(n=p.next)===null||n===void 0?void 0:n.bind(p),e[s+1]=(r=p.error)===null||r===void 0?void 0:r.bind(p),e[s+2]=(i=p.complete)===null||i===void 0?void 0:i.bind(p)}let u,l,h;if(t instanceof mn)l=Td(t.firestore,oc),h=Xv(t._key.path),u={next:p=>{e[s]&&e[s](rj(l,t,p))},error:e[s+1],complete:e[s+2]};else{let p=Td(t,Zd);l=Td(p.firestore,oc),h=p._query;let m=new th(l);u={next:y=>{e[s]&&e[s](new Fo(l,m,p,y))},error:e[s+1],complete:e[s+2]},tj(t._query)}return(function(m,y,C,A){let R=new Hv(A),k=new Lv(y,R,C);return m.asyncQueue.enqueueAndForget(async()=>O2(await nS(m),k)),()=>{R.Ou(),m.asyncQueue.enqueueAndForget(async()=>L2(await nS(m),k))}})(Z2(l),h,c,u)}function rj(t,e,n){let r=n.docs.get(e._key),i=new th(t);return new Ii(t,i,e._key,r,new Ei(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(i){Yo=i})(Eo),Zt(new ft("firestore",(r,{instanceIdentifier:i,options:o})=>{let s=r.getProvider("app").getImmediate(),c=new oc(new Iy(r.getProvider("auth-internal")),new Dy(s,r.getProvider("app-check-internal")),(function(l,h){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new F(x.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new kd(l.options.projectId,h)})(s,i),s);return o=Object.assign({useFetchStreams:n},o),c._setSettings(o),c},"PUBLIC").setMultipleInstances(!0)),Se(yC,vC,e),Se(yC,vC,"esm2017")})();var ch=function(){return ch=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},ch.apply(this,arguments)};var sj={includeMetadataChanges:!1};function IA(t,e){return e===void 0&&(e=sj),new J(function(n){var r=c_(t,e,{next:n.next.bind(n),error:n.error.bind(n),complete:n.complete.bind(n)});return{unsubscribe:r}})}function wA(t,e){var n;e===void 0&&(e={});var r=t.data(e);return!t.exists()||typeof r!="object"||r===null||!e.idField?r:ch(ch({},r),(n={},n[e.idField]=t.id,n))}function TA(t){return IA(t,{includeMetadataChanges:!0}).pipe(ye(function(e){return e.docs}))}function DA(t,e){return e===void 0&&(e={}),TA(t).pipe(ye(function(n){return n.map(function(r){return wA(r,e)})}))}var zn=class{constructor(e){return e}},bA="firestore",u_=class{constructor(){return To(bA)}};var l_=new U("angularfire2.firestore-instances");function aj(t,e){let n=rd(bA,t,e);return n&&new zn(n)}function cj(t){return(e,n)=>{let r=e.runOutsideAngular(()=>t(n));return new zn(r)}}var uj={provide:u_,deps:[[new Nn,l_]]},lj={provide:zn,useFactory:aj,deps:[[new Nn,l_],fi]};function CA(t,...e){return Se("angularfire",di.full,"fst"),Bt([lj,uj,{provide:l_,useFactory:cj(t),multi:!0,deps:[De,tt,hi,Pa,[new Nn,yd],[new Nn,od],...e]}])}var uh=dr(DA,!0);var lh=dr(vA,!0,2);var SA=dr(_A,!0);var RA=[];var dj={apiKey:"AIzaSyCqZ9ektyzgI7zlwbGEHWohplXSqsR_kdg",authDomain:"dhama-1095f.firebaseapp.com",projectId:"dhama-1095f",storageBucket:"dhama-1095f.firebasestorage.app",messagingSenderId:"377776492558",appId:"1:377776492558:web:17e6b714183bef98b36c5f",measurementId:"G-7ER6Z9WTJE"},NA={providers:[yp(),ym(RA),Ub(()=>Bb(dj)),CA(()=>SA())]};var dh=class t{constructor(e){this.firestore=e;let n=lh(this.firestore,"caption");this.items$=uh(n)}items$;getAllPosts(){return this.items$}static \u0275fac=function(n){return new(n||t)(z(zn))};static \u0275prov=j({token:t,factory:t.\u0275fac,providedIn:"root"})};var hh=class t{constructor(e){this.firestore=e;let n=lh(this.firestore,"lecture");this.items$=uh(n)}items$;getAllPosts(){return this.items$}static \u0275fac=function(n){return new(n||t)(z(zn))};static \u0275prov=j({token:t,factory:t.\u0275fac,providedIn:"root"})};var hj=(t,e)=>e.name,MA=(t,e)=>e.message;function fj(t,e){if(t&1){let n=oa();He(0,"button",9),so("click",function(){let i=Ki(n).$implicit,o=Mn();return Qi(o.menuActive.set(i.name))}),Kt(1),nt()}if(t&2){let n=e.$implicit,r=Mn();Ig(r.menuActive()==n.name?"rounded-md px-2 py-0.5 bg-yellow-600 border-white text-white":"text-white font-bold"),bt(),sr(" ",n.name," ")}}function pj(t,e){if(t&1&&(He(0,"div",10)(1,"p",11),Kt(2),nt(),He(3,"div",12)(4,"p",13),Kt(5),nt()()()),t&2){let n=e.$implicit;bt(2),Xr(n.title),bt(3),Xr(n.message)}}function gj(t,e){if(t&1&&(na(0,pj,6,2,"div",10,MA),gl(2,"async")),t&2){let n=Mn();ra(ml(2,0,n.posts()))}}function mj(t,e){if(t&1){let n=oa();He(0,"div",14)(1,"p",15),Kt(2),nt(),He(3,"div",12)(4,"p",16),Kt(5),nt()(),He(6,"button",17),so("click",function(){let i=Ki(n).$implicit,o=Mn(2);return Qi(o.clickReadPost(i.title,i.message))}),Kt(7," \u0E2D\u0E48\u0E32\u0E19\u0E40\u0E19\u0E37\u0E49\u0E2D\u0E2B\u0E32 "),nt()()}if(t&2){let n=e.$implicit;bt(2),Xr(n.title),bt(3),sr(" ",n.message," ")}}function yj(t,e){if(t&1&&(na(0,mj,8,2,"div",14,MA),gl(2,"async")),t&2){let n=Mn();ra(ml(2,0,n.readingPost()))}}function vj(t,e){if(t&1){let n=oa();He(0,"div",8)(1,"button",18),so("click",function(){Ki(n);let i=Mn();return Qi(i.closeModal())}),Su(),He(2,"svg",19),ia(3,"path",20),nt()(),Au(),He(4,"p",21),Kt(5),nt(),He(6,"p",22),Kt(7),nt()()}if(t&2){let n=Mn();bt(5),Xr(n.readPostActive().title),bt(2),sr(" ",n.readPostActive().message," ")}}var fh=class t{postService=M(dh);readingPostService=M(hh);posts=ht(this.postService.getAllPosts());readingPost=ht(this.readingPostService.getAllPosts());title="\u0E1A\u0E31\u0E19\u0E17\u0E36\u0E01\u0E18\u0E23\u0E23\u0E21";menu=[{name:"\u0E18\u0E23\u0E23\u0E21\u0E30\u0E2A\u0E31\u0E49\u0E19\u0E46",link:""},{name:"\u0E18\u0E23\u0E23\u0E21\u0E30\u0E1A\u0E23\u0E23\u0E22\u0E32\u0E22",link:""}];menuActive=ht(this.menu[0].name);isModalOpen=ht(!1);readPostActive=ht({title:"",message:""});constructor(){this.readingPost().pipe(Rt()).subscribe(e=>{this.readPostActive.set(e[0])})}closeModal=()=>{this.isModalOpen.set(!1)};clickReadPost=(e,n)=>{this.readPostActive.set({title:e,message:n}),this.isModalOpen.set(!0)};static \u0275fac=function(n){return new(n||t)};static \u0275cmp=Zr({type:t,selectors:[["app-home"]],decls:13,vars:3,consts:[[1,"sm:p-5","p-0","flex","flex-col","h-screen","overflow-hidden","bg-gray-800"],[1,"flex","flex-col","border-b-2","pb-2","border-gray-300"],[1,"flex","mx-2","sm:mt-0","mb-0","sm:mb-4","mt-1.5"],["src","img/logo.png",1,"w-10","sm:w-25","mr-1.5"],[1,"text-yellow-500","font-bold","text-xl","sm:text-2xl","flex","items-center","pt-2","sm:pt-7"],[1,"flex","gap-2","px-2","pt-2","mt-2","mb-1"],[1,"cursor-pointer",3,"class"],[1,"overflow-y-auto","bg-gray-800","sm:bg-transparent","grid","md:grid-cols-3","sm:grid-cols-2","grid-cols-1","md:gap-4","my-2"],[1,"fixed","top-0","left-0","right-0","bottom-0","z-50","px-4","pt-2","flex","flex-col","gap-1","bg-cyan-950","bg-opacity-50"],[1,"cursor-pointer",3,"click"],[1,"bg-cyan-950","pt-2","mx-2","shadow-md","h-auto","flex","flex-col","md:mt-0","mb-0.5","first:mt-0","mt-2","border-2","border-gray-700","rounded-md"],[1,"px-2","text-yellow-600","font-bold","text-md"],[1,"px-2","my-2","flex","flex-1"],[1,"text-gray-200","text-md","leading-relaxed","whitespace-pre-wrap"],[1,"bg-cyan-950","shadow-md","p-2","mt-2","h-auto","flex","flex-col","md:mt-0","mb-0.5","border-2","border-gray-700","rounded-xl","mx-4"],[1,"pl-2","mt-2","text-yellow-500","font-bold","text-md"],[1,"text-gray-200","text-md","leading-relaxed","whitespace-pre-wrap","line-clamp-3"],[1,"bg-blue-500","font-bold","text-white","rounded-md","px-2","p-1.5","flex","self-end","justify-center","mr-4","hover:bg-blue-800",3,"click"],[3,"click"],["aria-hidden","true","xmlns","http://www.w3.org/2000/svg","width","24","height","24","fill","none","viewBox","0 0 24 24",1,"w-[35px]","h-[35px]","text-gray-800","dark:text-white"],["stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M5 12h14M5 12l4-4m-4 4 4 4"],[1,"font-bold","text-xl","mt-4","text-white"],[1,"text-white","mt-2","text-md","leading-relaxed","whitespace-pre-wrap"]],template:function(n,r){n&1&&(He(0,"div",0)(1,"div",1)(2,"div",2),ia(3,"img",3),He(4,"p",4),Kt(5),nt()(),He(6,"div",5),na(7,fj,2,3,"button",6,hj),nt()(),He(9,"div",7),fl(10,gj,3,2)(11,yj,3,2),nt()(),fl(12,vj,8,2,"div",8)),n&2&&(bt(5),sr(" ",r.title," "),bt(2),ra(r.menu),bt(3),pl(r.menuActive()==r.menu[0].name?10:11),bt(2),pl(r.isModalOpen()?12:-1))},dependencies:[wl,Ag],encapsulation:2})};var ph=class t{title=ht("dhamma_caption");static \u0275fac=function(n){return new(n||t)};static \u0275cmp=Zr({type:t,selectors:[["app-root"]],decls:1,vars:0,template:function(n,r){n&1&&oo(0,"app-home")},dependencies:[fh],encapsulation:2})};Fg(ph,NA).catch(t=>console.error(t));
